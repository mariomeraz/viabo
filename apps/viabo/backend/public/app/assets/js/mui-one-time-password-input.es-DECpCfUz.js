import{s as G,bB as J,bQ as x,i as I,B as U}from"./vendor-5lkxkETF.js";const X=G(J)`
  input {
    text-align: center;
  }
`,Y={TextFieldStyled:X},Z=a=>I.jsx(Y.TextFieldStyled,{...a}),F={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function _(a,c){return a<=0?[]:Array.from({length:a},c)}function q(a,c,h){return a.map((s,R)=>c===R?h:s)}function b(a){return a.join("")}function N(a,c){return[...a,c]}function z(a,c,h){return a.reduce((s,R,l)=>{const{characters:y,restArrayMerged:u}=s;if(l<h)return{restArrayMerged:u,characters:N(y,R)};const[k,...B]=u;return{restArrayMerged:B,characters:N(y,k||"")}},{restArrayMerged:c,characters:[]}).characters}function W(a){return a.split("")}function O(a){const c=x.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return x.useInsertionEffect(()=>{c.current=a}),x.useCallback((...h)=>{var s;return(s=c.current)==null?void 0:s.call(c,...h)},[])}const ee=()=>!0,ne=x.forwardRef((a,c)=>{const{value:h="",length:s=4,autoFocus:R=!1,onChange:l,TextFieldsProps:y,onComplete:u,validateChar:k=ee,className:B,onBlur:w,...P}=a,S=x.useRef(h),M=O(u),v=O(e=>{const t=e.slice(0,s);return{isCompleted:t.length===s,finalValue:t}});x.useEffect(()=>{const{isCompleted:e,finalValue:t}=v(S.current);e&&M(t)},[s,M,v]);const d=_(s,(e,t)=>({character:h[t]||"",inputRef:x.createRef()})),T=e=>d.findIndex(({inputRef:t})=>t.current===e),V=()=>d.map(({character:e})=>e),j=(e,t)=>{const n=q(V(),e,t);return b(n)},$=e=>{var t,n;(n=(t=d[e])==null?void 0:t.inputRef.current)==null||n.focus()},f=e=>{var t,n;(n=(t=d[e])==null?void 0:t.inputRef.current)==null||n.select()},C=e=>{e+1!==s&&(d[e+1].character?f(e+1):$(e+1))},E=(e,t)=>typeof k!="function"?!0:k(e,t),K=e=>{const t=T(e.target);if(t===0&&e.target.value.length>1){const{finalValue:m,isCompleted:D}=v(e.target.value);l==null||l(m),D&&(u==null||u(m)),f(m.length-1);return}const n=e.target.value[0]||"";let i=n;i&&!E(i,t)&&(i="");const r=j(t,i);l==null||l(r);const{isCompleted:g,finalValue:p}=v(r);g&&(u==null||u(p)),i!==""?r.length-1<t?f(r.length):C(t):n===""&&r.length<=t&&f(t-1)},H=e=>{const t=e.target,n=t.selectionStart,i=t.selectionEnd,r=T(t),g=n===0&&i===0;if(t.value===e.key)e.preventDefault(),C(r);else if(F.backspace===e.key){if(!t.value)e.preventDefault(),f(r-1);else if(g){e.preventDefault();const p=j(r,"");l==null||l(p),p.length<=r&&f(r-1)}}else F.left===e.key?(e.preventDefault(),f(r-1)):F.right===e.key?(e.preventDefault(),f(r+1)):F.home===e.key?(e.preventDefault(),f(0)):F.end===e.key&&(e.preventDefault(),f(d.length-1))},L=e=>{const t=e.clipboardData.getData("text/plain"),n=e.target,i=d.findIndex(({character:o,inputRef:A})=>o===""||A.current===n),r=V(),g=z(r,W(t),i).map((o,A)=>E(o,A)?o:""),p=b(g);l==null||l(p);const{isCompleted:m,finalValue:D}=v(p);m?(u==null||u(D),f(s-1)):f(p.length)},Q=e=>{if(!d.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:n}=v(h);w==null||w(n,t)}};return I.jsx(U,{display:"flex",gap:"20px",alignItems:"center",ref:c,className:`MuiOtpInput-Box ${B||""}`,...P,children:d.map(({character:e,inputRef:t},n)=>{const{onPaste:i,onFocus:r,onKeyDown:g,className:p,onBlur:m,...D}=typeof y=="function"?y(n)||{}:y||{};return I.jsx(Z,{autoFocus:R?n===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${n+1} ${p||""}`,onPaste:o=>{o.preventDefault(),L(o),i==null||i(o)},onFocus:o=>{o.preventDefault(),o.target.select(),r==null||r(o)},onChange:K,onKeyDown:o=>{H(o),g==null||g(o)},onBlur:o=>{m==null||m(o),Q(o)},...D},n)})})});export{ne as o};
//# sourceMappingURL=mui-one-time-password-input.es-DECpCfUz.js.map
