{"version":3,"file":"AlertConfirmationDeleteAccount-CQ3EElFA.js","sources":["../../../../../frontend/src/app/business/viabo-spei/third-accounts/hooks/useDeleteSpeiThirdAccount.js","../../../../../frontend/src/app/business/viabo-spei/third-accounts/components/AlertConfirmationDeleteAccount.jsx"],"sourcesContent":["import { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { SPEI_THIRD_ACCOUNTS_KEYS } from '../adapters'\r\nimport { deleteSpeiThirdAccount } from '../services'\r\n\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\nimport { isFunction } from '@/shared/utils'\r\n\r\nexport const useDeleteSpeiThirdAccount = (options = {}) => {\r\n  const client = useQueryClient()\r\n  const speiThirdAccount = useMutation(deleteSpeiThirdAccount, options)\r\n  const mutate = async (formData, options) => {\r\n    const { onSuccess, onError, mutationOptions } = options\r\n\r\n    try {\r\n      await toast.promise(speiThirdAccount.mutateAsync(formData, mutationOptions), {\r\n        pending: 'Dando de baja cuenta ...',\r\n        success: {\r\n          render({ data }) {\r\n            client.invalidateQueries([SPEI_THIRD_ACCOUNTS_KEYS.THIRD_ACCOUNTS_LIST])\r\n            isFunction(onSuccess) && onSuccess(data)\r\n\r\n            return 'Se dio de baja la cuenta con éxito'\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      const errorFormatted = getErrorAPI(\r\n        error,\r\n        `No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas`\r\n      )\r\n      isFunction(onError) && onError(errorFormatted)\r\n      toast.error(errorFormatted, {\r\n        type: getNotificationTypeByErrorCode(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...speiThirdAccount,\r\n    mutate\r\n  }\r\n}\r\n","import { PersonRemove } from '@mui/icons-material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { Box, Button, Dialog, DialogActions, DialogTitle, Paper, Stack, Typography } from '@mui/material'\r\n\r\nimport { useDeleteSpeiThirdAccount } from '../hooks'\r\nimport { useSpeiThirdAccounts } from '../store'\r\n\r\nconst AlertConfirmationDeleteAccount = () => {\r\n  const { setSpeiThirdAccount, setOpenDeleteSpeiThirdAccount } = useSpeiThirdAccounts()\r\n  const openDeleteAccount = useSpeiThirdAccounts(state => state.openDeleteAccount)\r\n  const account = useSpeiThirdAccounts(state => state.account)\r\n\r\n  const { mutate, isLoading } = useDeleteSpeiThirdAccount()\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason && reason === 'backdropClick') return\r\n    if (reason && reason === 'escapeKeyDown') return\r\n    setSpeiThirdAccount(null)\r\n    setOpenDeleteSpeiThirdAccount(false)\r\n  }\r\n\r\n  const handleConfirm = () => {\r\n    const data = {\r\n      externalAccountId: account?.id\r\n    }\r\n    mutate(data, {\r\n      onSuccess: () => {\r\n        handleClose()\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Dialog open={openDeleteAccount} fullWidth maxWidth=\"xs\" onClose={handleClose}>\r\n      <DialogTitle>Baja de Cuenta</DialogTitle>\r\n      <DialogTitle sx={{ textWrap: 'pretty', textAlign: 'center', typography: 'subtitle1' }}>\r\n        ¿Está seguro de que quiere dar de baja la cuenta de tercero?\r\n      </DialogTitle>\r\n\r\n      <Stack spacing={3} sx={{ p: 3, pb: 0 }}>\r\n        <Box\r\n          component={Paper}\r\n          elevation={2}\r\n          display={'flex'}\r\n          direction=\"row\"\r\n          alignItems=\"center\"\r\n          justifyContent={'justify-between'}\r\n          spacing={2}\r\n          flex={1}\r\n          p={2}\r\n          sx={{\r\n            backgroundColor: theme => theme.palette.error.lighter,\r\n            color: theme => theme.palette.error.dark\r\n          }}\r\n        >\r\n          <Stack flex={1}>\r\n            <Typography fontWeight={'bold'} variant=\"subtitle2\">\r\n              {account?.name}\r\n            </Typography>\r\n            <Typography variant=\"body2\">{account?.bank?.name}</Typography>\r\n            <Typography variant=\"body2\">{account?.email}</Typography>\r\n            <Typography variant=\"body2\">{account?.phone}</Typography>\r\n          </Stack>\r\n          <Stack>\r\n            <PersonRemove color=\"error\" sx={{ width: 30, height: 30 }} />\r\n          </Stack>\r\n        </Box>\r\n      </Stack>\r\n      <DialogActions>\r\n        <LoadingButton loading={isLoading} variant=\"contained\" onClick={handleConfirm}>\r\n          Confirmar\r\n        </LoadingButton>\r\n        {!isLoading && <Button onClick={handleClose}>Cancelar</Button>}\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default AlertConfirmationDeleteAccount\r\n"],"names":["useDeleteSpeiThirdAccount","options","client","useQueryClient","speiThirdAccount","useMutation","deleteSpeiThirdAccount","formData","onSuccess","onError","mutationOptions","toast","data","SPEI_THIRD_ACCOUNTS_KEYS","isFunction","error","errorFormatted","getErrorAPI","getNotificationTypeByErrorCode","AlertConfirmationDeleteAccount","setSpeiThirdAccount","setOpenDeleteSpeiThirdAccount","useSpeiThirdAccounts","openDeleteAccount","state","account","mutate","isLoading","handleClose","event","reason","handleConfirm","externalAccountId","id","jsxs","Dialog","jsx","DialogTitle","textWrap","textAlign","typography","Stack","p","pb","Box","Paper","backgroundColor","theme","palette","lighter","color","dark","Typography","name","bank","email","phone","PersonRemove","width","height","DialogActions","LoadingButton","Button"],"mappings":"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"}