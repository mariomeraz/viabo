import{r as S,i as s,S as t,aR as T,aP as o,E as c,e5 as x,J as l,T as r,aC as m,l as W,P as e,ae as I,aH as k,aq as E,K as F}from"./vendor-5lkxkETF.js";import{o as L}from"./mui-one-time-password-input.es-DECpCfUz.js";import{S as A,Z as C,s as P}from"./index-DkbAsBWZ.js";import{m as q}from"./matchTypes-mENztEWg.js";const R=({onFinish:p,mutateTwoAuth:u,googleCode:n})=>{const{mutate:y,isLoading:g,isSuccess:d}=u,[f,h]=S.useState(""),b=i=>{h(i)},w=i=>q(i),v=i=>{h(""),y({code:i,secret:n==null?void 0:n.key},{onSuccess:a=>{a!=null&&a.token&&P(a==null?void 0:a.token)},onError:()=>{h("")}})};return s.jsx(A,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:s.jsxs(t,{gap:2,p:3,pb:6,children:[d&&s.jsx(j,{onFinish:p}),!d&&s.jsxs(s.Fragment,{children:[s.jsx(t,{children:s.jsxs(T,{dense:!1,children:[s.jsxs(o,{sx:{px:0},children:[s.jsx(c,{children:s.jsx(x,{})}),s.jsx(l,{primary:s.jsxs(r,{variant:"body2",fontWeight:600,sx:{color:"text.secondary",textWrap:"wrap"},children:["Descarga la aplicación Google Authenticator en tu teléfono  ",s.jsx(m,{color:"primary",rel:"noreferrer",target:"_blank",href:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&pcampaignid=web_share",sx:{cursor:"pointer"},children:"Android"}),"  ó  ",s.jsx(m,{color:"primary",rel:"noreferrer",target:"_blank",href:"https://apps.apple.com/es/app/google-authenticator/id388497605",sx:{cursor:"pointer"},children:"IOS"})]})})]}),s.jsxs(o,{sx:{px:0},children:[s.jsx(c,{children:s.jsx(x,{})}),s.jsx(l,{primary:s.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"text.secondary",textWrap:"wrap"},children:"En la Aplicación configura tu cuenta"})})]}),s.jsxs(o,{sx:{px:0},children:[s.jsx(c,{children:s.jsx(x,{})}),s.jsx(l,{primary:s.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"text.secondary",textWrap:"wrap"},children:"Elige la opción de escanear un código QR"})})]}),s.jsxs(o,{sx:{px:0},children:[s.jsx(c,{children:s.jsx(x,{})}),s.jsx(l,{primary:s.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"text.secondary",textWrap:"wrap"},children:"Escanea el siguiente QR e ingresa el código"})})]})]})}),g?s.jsxs(t,{spacing:1,justifyContent:"center",alignItems:"center",children:[s.jsx(W,{}),s.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"text.primary",textWrap:"wrap"},children:"Configurando dispositivo..."}),s.jsx(r,{variant:"body2",sx:{color:"text.disabled",textWrap:"wrap"},children:"No cierres la ventana hasta que se complete la configuración"})]}):s.jsxs(s.Fragment,{children:[s.jsx(t,{justifyContent:"center",alignItems:"center",children:s.jsx(C,{src:n==null?void 0:n.qr,sx:{width:150,m:0,p:0}})}),s.jsx(L,{length:6,value:f,onComplete:v,onChange:b,validateChar:w,sx:{gap:{xs:1.5,sm:2,md:3}},TextFieldsProps:{placeholder:"0"}})]})]})]})})};R.propTypes={googleCode:e.shape({key:e.any,qr:e.any}),mutateTwoAuth:e.shape({isLoading:e.any,isSuccess:e.any,mutate:e.func}),onFinish:e.any};function j({onFinish:p}){return s.jsxs(t,{flexDirection:"column",alignItems:"center",spacing:2,mt:3,children:[s.jsx(I,{sx:{width:50,height:50},color:"success"}),s.jsxs(t,{alignItems:"center",spacing:1,children:[s.jsx(r,{variant:"h6",children:"Configuración Exitosa"}),s.jsx(r,{variant:"caption",color:"text.disabled",children:k(new Date,"dd MMM yyyy hh:mm a",{locale:E})})]}),s.jsx(t,{sx:{px:9,pt:3},children:s.jsx(F,{type:"button",size:"large",variant:"contained",sx:{fontWeight:"bold"},onClick:p,children:"Finalizar"})})]})}j.propTypes={onFinish:e.any};export{R as default};
//# sourceMappingURL=TwoAuthForm-B7_MQieV.js.map
