import{a3 as z,g as j,b as T,A as E,a4 as M,L as S,_,a2 as m,u as I,k,R as G,a5 as g,E as R}from"./index-DkbAsBWZ.js";import{f as O,U as y,r as p,e as D,s as F,a as w,i as e,aW as B,S as n,ai as b,y as L,T as H,B as P,A as U}from"./vendor-5lkxkETF.js";import{i as A}from"./matchTypes-mENztEWg.js";const N=(s={})=>{const r=O(z,s);return{...r,mutate:async(t,a)=>{const{onSuccess:d,onError:l,mutationOptions:u}=a;try{const c=await y.promise(r.mutateAsync(t,u),{pending:"Configurando dispositivo ..."});A(d)&&d(c)}catch(c){const h=j(c,"No se puede realizar esta operaciÃ³n en este momento. Intente nuevamente o reporte a sistemas");A(l)&&l(h),y.error(h,{type:T(c)})}}}},Q=(s={})=>{const[r,i]=p.useState(null),t=D({queryKey:[E.GOOGLE_AUTH_QR],queryFn:({signal:a})=>M(),refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...s});return p.useEffect(()=>{if(t!=null&&t.isError){const a=j(t.error,"No se puede obtener el QR de Google Authenticator. Intente nuevamente o reporte a sistemas");i(a)}},[t.isError,t.error]),{...t,error:r||null}},V="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xml:space='preserve'%20id='Layer_1'%20x='0'%20y='0'%20style='enable-background:new%200%200%202481.9%202481.9'%20version='1.1'%20viewBox='0%200%202481.9%202481.9'%3e%3cstyle%3e.st0{fill:%23616161}.st1{fill:%239e9e9e}.st3{fill:%23212121;fill-opacity:.1}.st6{fill:%23bdbdbd}%3c/style%3e%3cg%20transform='translate(-27%20-27)'%3e%3ccircle%20cx='1268'%20cy='1268'%20r='1241'%20class='st0'/%3e%3cpath%20d='M1268%202057.7c-436.2%200-789.7-353.5-789.7-789.7%200-436.2%20353.5-789.7%20789.7-789.7%20218%200%20415.4%2088.4%20558.4%20231.3l319.1-319.1C1920.9%20165.9%201610.6%2027%201268%2027%20582.6%2027%2027%20582.6%2027%201268s555.6%201241%201241%201241c342.7%200%20652.9-138.9%20877.6-363.4l-319.1-319.1c-143.1%20142.8-340.5%20231.2-558.5%20231.2z'%20class='st1'/%3e%3cpath%20d='M2057.7%201268h-394.9c0-218-176.8-394.9-394.9-394.9S873.1%201049.9%20873.1%201268c0%20106.2%2042%20202.5%20110.3%20273.6l-.3.3%20488.9%20488.9.1.1c337.2-90%20585.6-397.4%20585.6-762.9z'%20style='fill:%23424242'/%3e%3cpath%20d='M2508.9%201268h-451.3c0%20365.5-248.5%20672.9-585.5%20762.9l348.5%20348.5c408-203.3%20688.3-624.6%20688.3-1111.4z'%20class='st0'/%3e%3cpath%20d='M1268%202494.8C585%202494.8%2031%201943%2027.1%201260.9c0%202.4-.1%204.7-.1%207.1%200%20685.4%20555.6%201241%201241%201241s1241-555.6%201241-1241c0-2.4-.1-4.7-.1-7.1-3.9%20682.1-558%201233.9-1240.9%201233.9z'%20class='st3'/%3e%3cpath%20d='m1472.2%202030.9%2011%2011c331.4-93.6%20574.5-398.2%20574.5-759.8V1268c0%20365.5-248.5%20672.9-585.5%20762.9z'%20style='fill:%23fff;fill-opacity:5.000000e-02'/%3e%3cpath%20d='M2283.355%201155.155h-1015.4c-62.3%200-112.8%2050.5-112.8%20112.8s50.5%20112.8%20112.8%20112.8h1015.3c62.3%200%20112.8-50.5%20112.8-112.8.1-62.3-50.4-112.8-112.7-112.8z'%20class='st1'/%3e%3cpath%20d='M2046.9%20918.7H1031.5c-62.3%200-112.8%2050.5-112.8%20112.8s50.5%20112.8%20112.8%20112.8h1015.3c62.3%200%20112.8-50.5%20112.8-112.8.1-62.3-50.4-112.8-112.7-112.8z'%20style='opacity:.5;fill:%23bdbdbd;enable-background:new'%20transform='translate(236.455%20236.455)'/%3e%3ccircle%20cx='252.6'%20cy='1268'%20r='84.6'%20class='st6'/%3e%3ccircle%20cx='1268'%20cy='252.6'%20r='84.6'%20class='st6'/%3e%3ccircle%20cx='1268'%20cy='2283.3'%20r='84.6'%20class='st6'/%3e%3ccircle%20cx='548.8'%20cy='550'%20r='84.6'%20class='st6'/%3e%3ccircle%20cx='548.8'%20cy='1987.2'%20r='84.6'%20class='st6'/%3e%3ccircle%20cx='1987.2'%20cy='1987.2'%20r='84.6'%20style='fill:%23757575'/%3e%3cpath%20d='M1268%201169.3h1015.3c59.9%200%20108.9%2046.8%20112.4%20105.8.1-2.4.4-4.7.4-7.1%200-62.3-50.5-112.8-112.8-112.8H1268c-62.3%200-112.8%2050.5-112.8%20112.8%200%202.4.1%204.7.4%207.1%203.5-59%2052.4-105.8%20112.4-105.8z'%20style='fill:%23fff;fill-opacity:.2'/%3e%3cpath%20d='M2395.7%201275c-3.7%2058.9-52.6%20105.8-112.4%20105.8H1268c-59.9%200-108.9-46.8-112.4-105.8-.3%202.4-.4%204.7-.4%207%200%2062.3%2050.5%20112.8%20112.8%20112.8h1015.3c62.3%200%20112.8-50.5%20112.8-112.8%200-2.3-.1-4.6-.4-7z'%20style='fill:%23212121;fill-opacity:.2'/%3e%3cpath%20d='M1268%20492.4c218%200%20415.4%2088.4%20558.4%20231.3l326-326.2c-2.4-2.4-4.7-4.8-7-7.1l-319%20319.1c-143-142.9-340.4-231.3-558.4-231.3-436.2%200-789.7%20353.5-789.7%20789.7%200%202.4.1%204.7.1%207.1%203.8-432.9%20355.8-782.6%20789.6-782.6z'%20class='st3'/%3e%3cradialGradient%20id='SVGID_1_'%20cx='706.725'%20cy='1774.029'%20r='.998'%20gradientTransform='matrix(2481.9333%200%200%20-2481.9333%20-1753654.125%204403410.5)'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20style='stop-color:%23fff;stop-opacity:.1'/%3e%3cstop%20offset='1'%20style='stop-color:%23fff;stop-opacity:0'/%3e%3c/radialGradient%3e%3ccircle%20cx='1268'%20cy='1268'%20r='1241'%20style='fill:url(%23SVGID_1_)'/%3e%3c/g%3e%3c/svg%3e",q=F("div")(({theme:s})=>({top:0,left:0,right:0,bottom:0,zIndex:8,position:"absolute",backgroundColor:s.palette.mode==="light"?w(s.palette.primary.main,.7):w(s.palette.secondary.main,.5)})),K=S(p.lazy(()=>_(()=>import("./TwoAuthForm-B7_MQieV.js"),__vite__mapDeps([0,1,2,3,4,5])))),J=()=>{const s=m(o=>o.setOpenTwoAuthConfig),r=m(o=>o.openTwoAuthConfig),i=N(),{data:t,isLoading:a,error:d,isError:l,refetch:u}=Q({enabled:!!r}),{setTwoAuth:c}=I(),h=p.useMemo(()=>i.isSuccess,[i.isSuccess]),f=()=>{s(!1),h&&c(!0)},x=k("down","md"),v=o=>{o.type==="keydown"&&(o.key==="Tab"||o.key==="Shift")||f()},C=()=>{s(!1),c(!0)};return e.jsxs(B,{keepMounted:!1,anchor:x?"bottom":"right",sx:{"& .MuiPaper-root.MuiDrawer-paper":{borderRadius:`${x?"none":"10px 0px 0px 10px"}`,width:{sm:"100%",lg:"40%",xl:"30%"}}},open:r,onClose:v,ModalProps:{keepMounted:!1},children:[a&&e.jsx(G,{sx:{p:3}}),l&&!a&&e.jsxs(n,{gap:2,children:[e.jsxs(n,{children:[e.jsx(n,{flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",sx:{px:2,py:1},children:e.jsx(g,{"aria-label":"close",size:"medium",onClick:f,children:e.jsx(b,{width:20,height:20,fontSize:"inherit",color:"primary"})})}),e.jsx(L,{})]}),e.jsx(R,{sx:{p:3},errorMessage:d,titleMessage:"Google Authenticator",handleButton:()=>u()})]}),!l&&!a&&r&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{position:"relative",sx:{minHeight:100,mb:3},children:[e.jsx(q,{}),e.jsxs(n,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{zIndex:11,px:2.5,py:2},children:[e.jsx(H,{variant:"h5",color:"white",children:"Google Authenticator"}),e.jsx("div",{children:e.jsx(g,{"aria-label":"close",size:"medium",onClick:f,children:e.jsx(b,{width:20,height:20,fontSize:"inherit",color:"primary",sx:{color:"white"}})})})]}),e.jsx(P,{component:"span",sx:{width:144,height:62,zIndex:10,left:0,right:0,bottom:-26,mx:"auto",position:"absolute",display:"inline-block",color:o=>o.palette.background.paper},children:e.jsx("svg",{height:"62",viewBox:"0 0 144 62",width:"144",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m111.34 23.88c-10.62-10.46-18.5-23.88-38.74-23.88h-1.2c-20.24 0-28.12 13.42-38.74 23.88-7.72 9.64-19.44 11.74-32.66 12.12v26h144v-26c-13.22-.38-24.94-2.48-32.66-12.12z",fill:"currentColor",fillRule:"evenodd"})})}),e.jsx(U,{alt:"google-authenticator",sx:{width:60,height:60,zIndex:11,left:0,right:0,bottom:-30,mx:"auto",position:"absolute"},src:V})]}),e.jsx(K,{onFinish:C,mutateTwoAuth:i,googleCode:t})]})]})};export{J as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/TwoAuthForm-B7_MQieV.js","assets/js/vendor-5lkxkETF.js","assets/js/mui-one-time-password-input.es-DECpCfUz.js","assets/js/index-DkbAsBWZ.js","assets/css/build-Bl0dWaDY.css","assets/js/matchTypes-mENztEWg.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=TwoAuthDrawer-akzTv99P.js.map
