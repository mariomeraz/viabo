import{aH as k,aI as W,aJ as U,r as h,e as G,U as $,P as o,i as e,B as g,S as y,T as j,aK as K,s as F,a as E,bg as P,A as q,di as Y,dV as z,I as J,u as Q,dL as X,bB as Z,y as A,V as ee,bm as w,bT as ae,bU as re}from"./vendor-5lkxkETF.js";import{V as se,b as te,C as L,u as b,c as ie,a as S,d as ne,B as O}from"./AdminDashboardViaboSpei-B1bJP65o.js";import{g as oe,b as le,F as de,C as xe}from"./index-DkbAsBWZ.js";import"./viabo-spei-paths-CvU5WLsk.js";import{b as he}from"./TextMaxLine-B63DtfW-.js";import{a as pe,b as me}from"./index-GDOudVRk.js";import"./formatNumber-dGNhWwxT.js";import"./formatTime-jCgU2sMR.js";import"./matchTypes-mENztEWg.js";import"./filterSearch-NGUmCbyG.js";import"./fade-CViozI82.js";import"./transition-anLY3gj9.js";import"./usePagination-Xa7qo0UK.js";import"./HeaderPage-Bqn_U64p.js";import"./formik.esm-CTTSENmf.js";import"./UploadSingleFile-ByYCreVQ.js";import"./iconBase-jHcAKz16.js";const ce=(s,l,a,i={})=>{const p=k(W(s),"yyyy-MM-dd"),r=k(U(l),"yyyy-MM-dd"),[t,u]=h.useState(null),d=G({queryKey:[se.BALANCE_RESUME],queryFn:({signal:x})=>te({initialDate:p,endDate:r,account:a}),refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...i});return h.useEffect(()=>{if(d!=null&&d.isError){const x=oe(d.error,"No se puede obtener el resumen del balance de la cuenta stp. Intente nuevamente o reporte a sistemas");u(x),$.error(x,{type:le(d.error)})}},[d.isError,d.error]),{...d,error:t||null}},T=({title:s,value:l,transactions:a,icon:i})=>e.jsxs(g,{display:"flex",component:L,variant:"outlined",flexDirection:"column",p:3,children:[e.jsxs(y,{justifyContent:"space-between",flexDirection:"row",children:[e.jsx(j,{variant:"subtitle1",color:"text.secondary",children:s}),i]}),e.jsx(j,{sx:{typography:"h4"},children:l}),e.jsxs(j,{sx:{typography:"subtitle2",fontWeight:500},children:[a," Transacciones"]})]});T.propTypes={icon:o.any,title:o.any,transactions:o.any,value:o.any};const ye=()=>{var D,B,I;const s=b(c=>c.setBalanceFilter),l=b(c=>c.setBalanceResume),a=b(c=>c.balanceFilter),i=b(c=>c.selectedAccount),p=new Date,r=h.useMemo(()=>a!=null&&a.startDate?new Date(a==null?void 0:a.startDate):K(p,{days:30}),[a==null?void 0:a.startDate]),t=h.useMemo(()=>a!=null&&a.endDate?new Date(a==null?void 0:a.endDate):p,[a==null?void 0:a.endDate]),[u,d]=h.useState(r),[x,v]=h.useState(t),{data:f,refetch:C,isError:n}=ce(u,x,(D=i==null?void 0:i.account)==null?void 0:D.number,{enabled:!!((B=i==null?void 0:i.account)!=null&&B.number)});h.useEffect(()=>{var c;u&&x&&((c=i==null?void 0:i.account)!=null&&c.number)&&(C(),s({startDate:u,endDate:x}))},[u,x,(I=i==null?void 0:i.account)==null?void 0:I.number]),h.useEffect(()=>{f&&l(f)},[f]),h.useEffect(()=>{n&&l(null)},[n]);const m=c=>{const{startDate:M,endDate:R}=c;R!==null&&M!==null&&(v(R),d(M))};return e.jsx(he,{startDate:u,endDate:x,onSubmit:m})},V=250,ue=F("div")(({theme:s})=>({position:"relative",height:V,borderRadius:Number(s.shape.borderRadius)*2})),je=F("div")(({theme:s})=>({position:"relative",height:V-16,padding:s.spacing(3),display:"flex",flexDirection:"column",justifyContent:"space-between",background:`linear-gradient(to right, ${E(s.palette.mode==="dark"?s.palette.secondary.dark:s.palette.primary.lighter,.7)}, 
  ${s.palette.mode==="light"?E(s.palette.info.light,.7):"rgba(22, 28, 36, 0.4)"}
  )`,backgroundRepeat:"no-repeat",backdropFilter:"blur(40px)",borderRadius:Number(s.shape.borderRadius)*2,boxShadow:s.customShadows.card})),N={mx:"auto",width:"calc(100% - 16px)",borderRadius:2,position:"absolute",height:200,zIndex:8,bottom:8,left:0,right:0,bgcolor:"grey.500",backdropFilter:"blur(40px)",opacity:.32},_=({stpAccount:s})=>{var i,p,r;const[l,a]=h.useState(!1);return e.jsxs(ue,{children:[e.jsx(g,{sx:{position:"relative",zIndex:9},children:e.jsxs(je,{children:[e.jsx(P,{sx:{p:0,pb:3},avatar:e.jsx(q,{sx:{backgroundColor:t=>t.palette.background.default,width:35,height:35},children:e.jsx(Y,{color:"primary",sx:{width:25,height:25}})}),title:e.jsx(j,{sx:{typography:"subtitle1"},children:s==null?void 0:s.name}),subheader:s==null?void 0:s.type}),e.jsx(z,{sx:{p:0,display:"flex"},children:e.jsxs(y,{gap:3,flex:1,children:[e.jsxs(y,{gap:0,children:[e.jsxs(y,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(j,{sx:{typography:"h6"},children:l?(i=s==null?void 0:s.account)==null?void 0:i.number:(p=s==null?void 0:s.account)==null?void 0:p.hidden}),e.jsx(g,{children:e.jsx(J,{size:"small",color:"inherit",onClick:()=>a(!l),sx:{opacity:.7},children:l?e.jsx(pe,{}):e.jsx(me,{})})})]}),e.jsx(j,{color:"primary.main",sx:{typography:"subtitle2"},children:"Cuenta Origen | STP"})]}),e.jsxs(y,{gap:0,justifyContent:"space-between",flexDirection:"row",children:[e.jsxs(y,{flex:1,children:[e.jsx(j,{sx:{typography:"h6"},children:(r=s==null?void 0:s.totalBalance)==null?void 0:r.format}),e.jsx(j,{color:"primary.main",sx:{typography:"subtitle2"},children:"Balance Total"})]}),e.jsx(y,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:e.jsxs(y,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(de,{sx:{width:50}}),e.jsx(j,{variant:"h5",color:"primary.main",children:"|"}),e.jsx(j,{variant:"h6",color:"primary.main",children:"spei"})]})})]})]})})]})}),e.jsx(g,{sx:{...N}}),e.jsx(g,{sx:{...N,opacity:.16,bottom:0,zIndex:7,width:"calc(100% - 40px)"}})]})};_.propTypes={stpAccount:o.shape({account:o.shape({hidden:o.any,number:o.any}),balance:o.shape({format:o.any}),name:o.any,totalBalance:o.shape({format:o.any}),type:o.any})};const H=({isEmptyAccount:s,isLoading:l})=>{var C;const a=Q(),{setOpenSpeiOut:i,setOpenTransactions:p,stpAccounts:r,selectedAccount:t,setSelectedAccount:u}=b(),d=b(n=>n.setCompanies),x=h.useMemo(()=>ie(r==null?void 0:r.type),[r]),v=(n,m)=>{u(m)},f=h.useMemo(()=>(r==null?void 0:r.type)===S.CONCENTRATOR?(r==null?void 0:r.accounts)||[]:(r==null?void 0:r.type)===S.COST_CENTER?(t==null?void 0:t.companies)||[]:(r==null?void 0:r.accounts)||[],[r,t]);return h.useEffect(()=>{var n;return(r==null?void 0:r.type)===S.CONCENTRATOR?d((t==null?void 0:t.companies)||[]):(r==null?void 0:r.type)===S.COST_CENTER?d((t==null?void 0:t.companies)||[]):d(((n=r==null?void 0:r.accounts)==null?void 0:n.filter(m=>(m==null?void 0:m.id)!==(t==null?void 0:t.id)))||[])},[r,t]),e.jsxs(g,{display:"flex",component:L,variant:"outlined",flexDirection:"column",children:[e.jsx(P,{sx:{p:2},title:e.jsxs(y,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(g,{sx:{flexGrow:1},children:e.jsx(j,{variant:"h6",children:x})}),((C=r==null?void 0:r.accounts)==null?void 0:C.length)>1&&e.jsx(y,{flexGrow:1,children:e.jsx(X,{disableClearable:!0,options:f||[],fullWidth:!0,size:"small",value:t,onChange:v,getOptionLabel:n=>(n==null?void 0:n.label)||"",getOptionDisabled:n=>n==null?void 0:n.isDisabled,isOptionEqualToValue:(n,m)=>(n==null?void 0:n.value)===(m==null?void 0:m.value),renderInput:n=>e.jsx(Z,{...n,label:x,placeholder:"Seleccionar",InputProps:{...n.InputProps,sx:{borderRadius:m=>1,borderColor:ne}}})})})]})}),e.jsx(A,{sx:{borderColor:E("#CFDBD5",.7)}}),e.jsxs(z,{sx:{p:4,display:"flex",flexDirection:"column",gap:2},children:[l&&e.jsx(y,{justifyContent:"center",alignItems:"center",children:e.jsx(xe,{})}),s&&!l&&e.jsxs(ee,{severity:"info",children:["No tienes ",x," asignados"]}),!s&&!l&&e.jsxs(e.Fragment,{children:[e.jsx(g,{mb:2,children:e.jsx(_,{stpAccount:t})}),e.jsx(O,{size:"large",variant:"outlined",sx:{color:"text.primary"},onClick:()=>i(!0),startIcon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",stroke:a.palette.text.primary,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 19h-6a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v4.5"}),e.jsx("path",{d:"M3 10h18"}),e.jsx("path",{d:"M16 19h6"}),e.jsx("path",{d:"M19 16l3 3l-3 3"}),e.jsx("path",{d:"M7.005 15h.005"}),e.jsx("path",{d:"M11 15h2"})]}),children:"SPEI OUT"}),e.jsx(O,{size:"large",variant:"outlined",sx:{color:"text.primary"},onClick:()=>p(!0),startIcon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:a.palette.text.primary,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"}),e.jsx("path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"}),e.jsx("path",{d:"M9 17v-5"}),e.jsx("path",{d:"M12 17v-1"}),e.jsx("path",{d:"M15 17v-3"})]}),children:"Detalles Movimientos"})]})]})]})};H.propTypes={isEmptyAccount:o.any,isLoading:o.any};const ge=({isEmptyAccount:s,isLoading:l})=>{var i,p,r,t;const a=b(u=>u.balanceResume);return e.jsxs(y,{gap:3,children:[e.jsx(ye,{}),e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{item:!0,xs:12,md:6,children:e.jsx(T,{title:"Dep√≥sitos",value:((i=a==null?void 0:a.deposits)==null?void 0:i.currency)||"$0.00",transactions:((p=a==null?void 0:a.deposits)==null?void 0:p.count)||0,icon:e.jsx(ae,{color:"success"})})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsx(T,{title:"Transferencias",value:((r=a==null?void 0:a.transfers)==null?void 0:r.currency)||"$0.00",transactions:((t=a==null?void 0:a.transfers)==null?void 0:t.count)||0,icon:e.jsx(re,{color:"error"})})})]}),e.jsx(H,{isEmptyAccount:s,isLoading:l})]})};ge.propTypes={isEmptyAccount:o.any,isLoading:o.any};export{ge as default};
//# sourceMappingURL=AdminSpeiBalance-CxLClFrp.js.map
