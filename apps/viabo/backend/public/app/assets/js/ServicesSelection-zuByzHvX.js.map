{"version":3,"file":"ServicesSelection-zuByzHvX.js","sources":["../../../../../frontend/src/app/business/commerce/services/servicesList.js","../../../../../frontend/src/app/business/commerce/components/process/ServicesSelection.jsx"],"sourcesContent":["import ViaboCard from '@/shared/assets/img/viabo-card.png'\r\nimport ViaboPay from '@/shared/assets/img/viabo-pay.png'\r\n\r\nexport const SERVICES_NAMES = {\r\n  VIABO_CARD: 'Viabo Card',\r\n  VIABO_PAY: 'Viabo Pay'\r\n}\r\n\r\nexport const SERVICES_LIST = [\r\n  {\r\n    type: 1,\r\n    name: SERVICES_NAMES.VIABO_PAY,\r\n    description: 'Herramienta de cobro/pago por pefiles,transparencia transaccional y alertas.',\r\n    image: ViaboPay\r\n  },\r\n  {\r\n    type: 2,\r\n    name: SERVICES_NAMES.VIABO_CARD,\r\n    description:\r\n      'Tarjeta CARNET X VIABO para control de gastos, pago de compensaciones, cash-back y fidelización por perfiles.',\r\n    image: ViaboCard\r\n  }\r\n]\r\n","import { useEffect, useState } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { AlertTitle, Box, Card, CardContent, CardMedia, Stack, Typography } from '@mui/material'\r\nimport { alpha } from '@mui/material/styles'\r\nimport { motion } from 'framer-motion'\r\n\r\nimport { CommerceUpdateAdapter } from '@/app/business/commerce/adapters/commerceUpdateAdapter'\r\nimport { useUpdateCommerceProcess } from '@/app/business/commerce/hooks'\r\nimport { PROCESS_LIST, SERVICES_LIST } from '@/app/business/commerce/services'\r\nimport { propTypesStore } from '@/app/business/commerce/store'\r\nimport { AlertWithFocus } from '@/shared/components/alerts'\r\n\r\nServicesSelection.propTypes = {\r\n  store: PropTypes.shape(propTypesStore)\r\n}\r\n\r\nconst variants = {\r\n  selected: {\r\n    backgroundColor: theme => alpha(theme.palette.primary.main, 0.3),\r\n    borderColor: theme => theme.palette.primary.main\r\n  },\r\n  unselected: {\r\n    backgroundColor: theme => theme.palette.background.neutral,\r\n    borderColor: 'transparent'\r\n  }\r\n}\r\n\r\nexport function ServicesSelection({ store }) {\r\n  const { setActualProcess, setLastProcess, resume } = store\r\n  const [selectedServices, setSelectedServices] = useState([])\r\n  const [emptyServices, setEmptyServices] = useState(false)\r\n  const { mutate: setServicesToCommerce, isLoading: isAddingServices } = useUpdateCommerceProcess()\r\n\r\n  useEffect(() => {\r\n    if (resume?.services) {\r\n      const services =\r\n        resume?.services.map(\r\n          service => SERVICES_LIST.find(serviceList => serviceList.type.toString() === service?.type)?.name\r\n        ) || []\r\n      setSelectedServices(services)\r\n    }\r\n  }, [resume?.services])\r\n  const handleCardClick = service => {\r\n    if (!selectedServices.includes(service.name)) {\r\n      return setSelectedServices([...selectedServices, service.name])\r\n    }\r\n\r\n    const filter = selectedServices.filter(selected => selected !== service.name)\r\n\r\n    return setSelectedServices(filter)\r\n  }\r\n\r\n  const handleSendServices = () => {\r\n    if (selectedServices.length === 0) {\r\n      return setEmptyServices(true)\r\n    }\r\n    const resumeAdapter = CommerceUpdateAdapter(resume, 2)\r\n\r\n    const services = SERVICES_LIST.filter(service => selectedServices.includes(service.name)).map(service => ({\r\n      type: service.type.toString(),\r\n      cardNumbers: '0',\r\n      cardUse: '',\r\n      personalized: '0'\r\n    }))\r\n\r\n    return setServicesToCommerce(\r\n      { ...resumeAdapter, services },\r\n      {\r\n        onSuccess: () => {\r\n          setActualProcess(PROCESS_LIST.COMMERCE_INFO)\r\n          setLastProcess({ info: selectedServices, name: PROCESS_LIST.SERVICES_SELECTION })\r\n          setEmptyServices(false)\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Stack direction=\"column\" width={1} spacing={1}>\r\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.5 }}>\r\n          <Typography variant=\"h4\" color=\"textPrimary\" align=\"center\">\r\n            ¡Bienvenido a Viabo!\r\n          </Typography>\r\n          <Typography paragraph align=\"center\" variant=\"body1\" color={'text.secondary'} whiteSpace=\"pre-line\">\r\n            Seleccione los servicios para habilitar su ecosistema.\r\n          </Typography>\r\n        </motion.div>\r\n      </Stack>\r\n\r\n      {emptyServices && (\r\n        <AlertWithFocus listenElement={emptyServices} sx={{ mb: 5, mx: 2, textAlign: 'initial' }} severity=\"warning\">\r\n          <AlertTitle sx={{ textAlign: 'initial' }}>Servicios</AlertTitle>\r\n          Se debe seleccionar al menos un servicio para continuar con el proceso\r\n        </AlertWithFocus>\r\n      )}\r\n\r\n      <motion.div initial={{ opacity: 0, y: 50 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.5 }}>\r\n        <Box\r\n          my={3}\r\n          px={2}\r\n          sx={{\r\n            display: 'grid',\r\n            gap: 3,\r\n            gridTemplateColumns: {\r\n              xs: 'repeat(1, 1fr)',\r\n              sm: 'repeat(2, 1fr)',\r\n              md: 'repeat(2, 1fr)',\r\n              lg: 'repeat(2, 1fr)',\r\n              xl: 'repeat(2, 1fr)'\r\n            }\r\n          }}\r\n        >\r\n          {SERVICES_LIST.map((service, index) => {\r\n            const isSelected = selectedServices.includes(service.name)\r\n\r\n            return (\r\n              <motion.div key={index} whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.9 }}>\r\n                <Card\r\n                  onClick={() => handleCardClick(service)}\r\n                  sx={{\r\n                    backgroundColor: 'transparent',\r\n                    cursor: 'pointer',\r\n                    height: '100%',\r\n                    ...(isSelected ? variants.selected : variants.unselected)\r\n                  }}\r\n                >\r\n                  <CardMedia sx={{ px: { xs: 10, sm: 5 }, pt: 3 }} component=\"img\" image={service.image} />\r\n                  <CardContent>\r\n                    <Typography variant=\"caption\" color={'text.disabled'}>\r\n                      {service.description}\r\n                    </Typography>\r\n                  </CardContent>\r\n                </Card>\r\n              </motion.div>\r\n            )\r\n          })}\r\n        </Box>\r\n      </motion.div>\r\n      <Stack mt={7} px={2}>\r\n        <LoadingButton\r\n          onClick={handleSendServices}\r\n          loading={isAddingServices}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          fullWidth\r\n          type=\"submit\"\r\n          sx={{ textTransform: 'uppercase' }}\r\n        >\r\n          Guardar\r\n        </LoadingButton>\r\n      </Stack>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ServicesSelection\r\n"],"names":["SERVICES_NAMES","SERVICES_LIST","ViaboPay","ViaboCard","ServicesSelection","propTypes","store","PropTypes","shape","propTypesStore","variants","selected","backgroundColor","alpha","theme","palette","primary","main","borderColor","unselected","background","neutral","setActualProcess","setLastProcess","resume","selectedServices","setSelectedServices","useState","emptyServices","setEmptyServices","mutate","setServicesToCommerce","isLoading","isAddingServices","useUpdateCommerceProcess","useEffect","services","map","service","find","serviceList","type","toString","name","handleCardClick","includes","filter","handleSendServices","length","resumeAdapter","CommerceUpdateAdapter","cardNumbers","cardUse","personalized","onSuccess","PROCESS_LIST","COMMERCE_INFO","info","SERVICES_SELECTION","jsxs","Fragment","jsx","Stack","motion","opacity","y","duration","Typography","AlertWithFocus","mb","mx","textAlign","AlertTitle","Box","display","gap","gridTemplateColumns","xs","sm","md","lg","xl","index","isSelected","scale","Card","cursor","height","CardMedia","px","pt","image","CardContent","description","LoadingButton","textTransform"],"mappings":"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"}