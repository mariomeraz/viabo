{"version":3,"file":"managementCommercesAdapter-DPuErDK7.js","sources":["../../../../../frontend/src/app/management/commerces/adapters/managementCommercesAdapter.js"],"sourcesContent":["import { PROCESS_LIST_STEPS } from '@/app/business/commerce/services'\r\nimport { convertCatalogToReactSelect, fDateTime, getDecryptInfo } from '@/shared/utils'\r\n\r\nconst ViaboCardAdapter = services => {\r\n  const viaboCard = services?.find(service => service?.type === '2')\r\n\r\n  if (viaboCard) {\r\n    return {\r\n      id: viaboCard?.id,\r\n      type: viaboCard?.type,\r\n      name: viaboCard?.name,\r\n      cardNumbers: viaboCard?.cardNumbers,\r\n      cardUse: viaboCard?.cardUse,\r\n      customCardsRequired: viaboCard?.personalized === '1'\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nconst DocumentsAdapter = documents =>\r\n  documents?.map(document => {\r\n    const { Id, Name, storePath } = document\r\n\r\n    return {\r\n      id: Id,\r\n      name: Name,\r\n      path: storePath\r\n    }\r\n  }) ?? []\r\n\r\nconst CommissionsAdapter = commissions => ({\r\n  available: Boolean(commissions),\r\n  speiInCarnet: parseFloat(commissions?.SpeiInCarnet ?? '0.0'),\r\n  speiOutCarnet: parseFloat(commissions?.SpeiOutCarnet ?? '0.0'),\r\n  speiInMasterCard: parseFloat(commissions?.SpeiInMasterCard ?? '0.0'),\r\n  speiOutMasterCard: parseFloat(commissions?.SpeiOutMasterCard ?? '0.0'),\r\n  viaboPay: parseFloat(commissions?.Pay ?? '0.0'),\r\n  cloud: parseFloat(commissions?.SharedTerminal ?? '0.0')\r\n})\r\n\r\nexport const ManagementCommercesAdapter = commerces => commerces.map((commerce, index) => CommerceAdapter(commerce))\r\n\r\nexport const CommerceAdapter = (commerce, hasEncrypted = false) => {\r\n  let commerceInformation = commerce\r\n\r\n  if (hasEncrypted) {\r\n    commerceInformation = getDecryptInfo(commerce?.ciphertext, commerce?.iv)\r\n  }\r\n\r\n  const {\r\n    id,\r\n    legalRepresentative,\r\n    legalRepresentativeName,\r\n    legalRepresentativePhone,\r\n    legalRepresentativeLastSession,\r\n    legalRepresentativeEmail,\r\n    fiscalName,\r\n    fiscalPersonType,\r\n    tradeName,\r\n    rfc,\r\n    employees,\r\n    branchOffices,\r\n    pointSaleTerminal,\r\n    paymentApi,\r\n    register,\r\n    statusId,\r\n    registerStep,\r\n    statusName,\r\n    services,\r\n    documents,\r\n    terminals,\r\n    commissions,\r\n    slug,\r\n    publicTerminal,\r\n    postalAddress,\r\n    phoneNumbers,\r\n    logo\r\n  } = commerceInformation\r\n  const dateLastSession = legalRepresentativeLastSession || ''\r\n\r\n  return {\r\n    id,\r\n    name: tradeName,\r\n    account: {\r\n      id: legalRepresentative,\r\n      name: legalRepresentativeName,\r\n      email: legalRepresentativeEmail,\r\n      phone: legalRepresentativePhone,\r\n      status: 'Activo',\r\n      lastLogged: dateLastSession === '' ? 'No ha iniciado sesiÃ³n' : fDateTime(dateLastSession),\r\n      register: register ? fDateTime(register) : ''\r\n    },\r\n    information: {\r\n      available: fiscalName !== '',\r\n      fiscalName,\r\n      commercialName: tradeName,\r\n      fiscalTypePerson: fiscalPersonType,\r\n      rfc,\r\n      employeesNumber: employees,\r\n      branchesNumber: branchOffices,\r\n      terminalCommerceSlug: slug || '',\r\n      publicTerminal: publicTerminal || null,\r\n      postalAddress: postalAddress || '',\r\n      phoneNumbers: phoneNumbers || '',\r\n      logo: logo || null\r\n    },\r\n    terminals: convertCatalogToReactSelect(terminals || [], 'id', 'name'),\r\n    services: {\r\n      names: services?.map(service => service?.name) || [],\r\n      catalog: services?.map(service => ({ id: service?.Id, type: service?.type, name: service?.name })) || [],\r\n      available: pointSaleTerminal !== '0',\r\n      viaboCard: ViaboCardAdapter(services),\r\n      viaboPay: {\r\n        tpvsNumber: pointSaleTerminal,\r\n        apiRequired: paymentApi === '1'\r\n      }\r\n    },\r\n    status: {\r\n      id: statusId,\r\n      name: statusName,\r\n      step: PROCESS_LIST_STEPS.find(step => step.step.toString() === registerStep)?.name ?? ''\r\n    },\r\n    documents: DocumentsAdapter(documents),\r\n    commissions: CommissionsAdapter(commissions)\r\n  }\r\n}\r\n"],"names":["ViaboCardAdapter","services","viaboCard","service","DocumentsAdapter","documents","document","Id","Name","storePath","CommissionsAdapter","commissions","ManagementCommercesAdapter","commerces","commerce","index","CommerceAdapter","hasEncrypted","commerceInformation","getDecryptInfo","id","legalRepresentative","legalRepresentativeName","legalRepresentativePhone","legalRepresentativeLastSession","legalRepresentativeEmail","fiscalName","fiscalPersonType","tradeName","rfc","employees","branchOffices","pointSaleTerminal","paymentApi","register","statusId","registerStep","statusName","terminals","slug","publicTerminal","postalAddress","phoneNumbers","logo","dateLastSession","fDateTime","convertCatalogToReactSelect","_a","PROCESS_LIST_STEPS","step"],"mappings":"6MAGA,MAAMA,EAAmBC,GAAY,CACnC,MAAMC,EAAYD,GAAA,YAAAA,EAAU,KAAKE,IAAWA,GAAA,YAAAA,EAAS,QAAS,KAE9D,OAAID,EACK,CACL,GAAIA,GAAA,YAAAA,EAAW,GACf,KAAMA,GAAA,YAAAA,EAAW,KACjB,KAAMA,GAAA,YAAAA,EAAW,KACjB,YAAaA,GAAA,YAAAA,EAAW,YACxB,QAASA,GAAA,YAAAA,EAAW,QACpB,qBAAqBA,GAAA,YAAAA,EAAW,gBAAiB,GAClD,EAEI,IACT,EAEME,EAAmBC,IACvBA,GAAA,YAAAA,EAAW,IAAIC,GAAY,CACzB,KAAM,CAAE,GAAAC,EAAI,KAAAC,EAAM,UAAAC,CAAW,EAAGH,EAEhC,MAAO,CACL,GAAIC,EACJ,KAAMC,EACN,KAAMC,CACP,CACF,KAAK,CAAE,EAEJC,EAAqBC,IAAgB,CACzC,UAAW,EAAQA,EACnB,aAAc,YAAWA,GAAA,YAAAA,EAAa,eAAgB,KAAK,EAC3D,cAAe,YAAWA,GAAA,YAAAA,EAAa,gBAAiB,KAAK,EAC7D,iBAAkB,YAAWA,GAAA,YAAAA,EAAa,mBAAoB,KAAK,EACnE,kBAAmB,YAAWA,GAAA,YAAAA,EAAa,oBAAqB,KAAK,EACrE,SAAU,YAAWA,GAAA,YAAAA,EAAa,MAAO,KAAK,EAC9C,MAAO,YAAWA,GAAA,YAAAA,EAAa,iBAAkB,KAAK,CACxD,GAEaC,EAA6BC,GAAaA,EAAU,IAAI,CAACC,EAAUC,IAAUC,EAAgBF,CAAQ,CAAC,EAEtGE,EAAkB,CAACF,EAAUG,EAAe,KAAU,OACjE,IAAIC,EAAsBJ,EAEtBG,IACFC,EAAsBC,EAAeL,GAAA,YAAAA,EAAU,WAAYA,GAAA,YAAAA,EAAU,EAAE,GAGzE,KAAM,CACJ,GAAAM,EACA,oBAAAC,EACA,wBAAAC,EACA,yBAAAC,EACA,+BAAAC,EACA,yBAAAC,EACA,WAAAC,EACA,iBAAAC,EACA,UAAAC,EACA,IAAAC,EACA,UAAAC,EACA,cAAAC,EACA,kBAAAC,EACA,WAAAC,EACA,SAAAC,EACA,SAAAC,EACA,aAAAC,EACA,WAAAC,EACA,SAAApC,EACA,UAAAI,EACA,UAAAiC,EACA,YAAA3B,EACA,KAAA4B,EACA,eAAAC,EACA,cAAAC,EACA,aAAAC,EACA,KAAAC,CACJ,EAAMzB,EACE0B,EAAkBpB,GAAkC,GAE1D,MAAO,CACL,GAAAJ,EACA,KAAMQ,EACN,QAAS,CACP,GAAIP,EACJ,KAAMC,EACN,MAAOG,EACP,MAAOF,EACP,OAAQ,SACR,WAAYqB,IAAoB,GAAK,wBAA0BC,EAAUD,CAAe,EACxF,SAAUV,EAAWW,EAAUX,CAAQ,EAAI,EAC5C,EACD,YAAa,CACX,UAAWR,IAAe,GAC1B,WAAAA,EACA,eAAgBE,EAChB,iBAAkBD,EAClB,IAAAE,EACA,gBAAiBC,EACjB,eAAgBC,EAChB,qBAAsBQ,GAAQ,GAC9B,eAAgBC,GAAkB,KAClC,cAAeC,GAAiB,GAChC,aAAcC,GAAgB,GAC9B,KAAMC,GAAQ,IACf,EACD,UAAWG,EAA4BR,GAAa,CAAA,EAAI,KAAM,MAAM,EACpE,SAAU,CACR,OAAOrC,GAAA,YAAAA,EAAU,IAAIE,GAAWA,GAAA,YAAAA,EAAS,QAAS,CAAE,EACpD,SAASF,GAAA,YAAAA,EAAU,IAAIE,IAAY,CAAE,GAAIA,GAAA,YAAAA,EAAS,GAAI,KAAMA,GAAA,YAAAA,EAAS,KAAM,KAAMA,GAAA,YAAAA,EAAS,IAAI,MAAQ,CAAE,EACxG,UAAW6B,IAAsB,IACjC,UAAWhC,EAAiBC,CAAQ,EACpC,SAAU,CACR,WAAY+B,EACZ,YAAaC,IAAe,GAC7B,CACF,EACD,OAAQ,CACN,GAAIE,EACJ,KAAME,EACN,OAAMU,EAAAC,EAAmB,KAAKC,GAAQA,EAAK,KAAK,aAAeb,CAAY,IAArE,YAAAW,EAAwE,OAAQ,EACvF,EACD,UAAW3C,EAAiBC,CAAS,EACrC,YAAaK,EAAmBC,CAAW,CAC5C,CACH"}