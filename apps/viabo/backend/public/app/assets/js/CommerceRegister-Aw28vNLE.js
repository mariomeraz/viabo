import{bx as y,e as k,P as n,r as R,i as a,B as f,S as N,K as v,l as j,s as A,a as L,bm as I,k as M}from"./vendor-5lkxkETF.js";import{a as u,g as D,t as w,_ as l,P as z}from"./index-DkbAsBWZ.js";import{P as s}from"./processList-CzVvLx1j.js";const G={TOKEN_COMMERCE:"tokenCommerce",VALIDATION_CODE:"validationCode",COMMERCE_PROCESS:"commerceProcess"},V=e=>{const{id:o,fiscalPersonType:t,fiscalName:r,tradeName:i,rfc:p,employees:d,branchOffices:C,paymentApi:P,registerStep:g,legalRepresentative:S,services:E,pointSaleTerminal:c,documents:x}=e,m=E==null?void 0:E.find(O=>O.type==="2"),b=(m==null?void 0:m.cardNumbers)||0,T=(m==null?void 0:m.cardUse)||"",h=(m==null?void 0:m.personalized)==="1"||!1;return{id:o,idUser:S,services:E,fiscalTypePerson:t,fiscalName:r||"",rfc:p,commercialName:i,employeesNumber:Number(d),branchesNumber:Number(C),tpvsNumber:Number(c),apiRequired:P==="1",cardsNumber:Number(b),cardsUse:T,customCardsRequired:h,files:x,step:Number(g)}},Z=async e=>{const{data:o}=await u.post("/api/security/legalRepresentative/new",e);return o},ee=async e=>{const{data:o}=await u.get("/api/legal-representative/verificate",{headers:{Username:`${e}`}});return o},B=async()=>{const{data:e}=await u.get("/api/commerce/legal-representative");return V(e)},te=async e=>{const{data:o}=await u.put("/api/commerce/update",e);return o},se=async e=>{const{data:o}=await u.post("/api/commerce/documents/create",e);return o},oe=async e=>{const{data:o}=await u.post("/api/commerce/documents/delete",e);return o},U=(e={})=>{const{enqueueSnackbar:o}=y();return k([G.COMMERCE_PROCESS],B,{staleTime:60*5e3,onError:t=>{const r=D(t,"ðŸ˜Ÿ Error al obtener el proceso del comercio");o(r,{variant:"error",autoHideDuration:5e3})},...e})},ae={actualProcess:n.string,token:n.string,resume:n.object,lastProcess:n.shape({name:n.any,info:n.any}),getComponent:n.func,getBackProcess:n.func,setLastProcess:n.func,setActualProcess:n.func,setToken:n.func,setResume:n.func},F={actualProcess:s.REGISTER,token:null,resume:null,lastProcess:{name:null,info:null},processList:[{name:s.REGISTER,component:()=>l(()=>import("./CommerceRegisterForm-CcMSdky9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),backProcess:s.REGISTER},{name:s.CONTINUE_PROCESS,component:()=>l(()=>import("./ProcessContinue-cuPdFv9Q.js"),__vite__mapDeps([9,1,2,7,4,5,6,10,11])),backProcess:s.REGISTER},{name:s.VALIDATION_CODE,component:()=>l(()=>import("./ValidationCode-BRGtzEl_.js"),__vite__mapDeps([12,1,13,4,5,6,10,11,14,15])),backProcess:s.REGISTER},{name:s.SERVICES_SELECTION,component:()=>l(()=>import("./ServicesSelection-zuByzHvX.js"),__vite__mapDeps([16,1,17,4,5,6,18,19,8])),backProcess:s.REGISTER},{name:s.COMMERCE_INFO,component:()=>l(()=>import("./CommerceInfo-Dbax1sei.js"),__vite__mapDeps([20,1,2,17,4,5,6,7])),backProcess:s.SERVICES_SELECTION},{name:s.COMMERCE_DOCUMENTATION,component:()=>l(()=>import("./CommerceDocumentation-C5N4Hry1.js"),__vite__mapDeps([21,1,2,17,4,5,22,23,24,25,6])),backProcess:s.COMMERCE_INFO},{name:s.FINISHED_PROCESS,component:()=>l(()=>import("./FinishProcess-DsXw65G5.js"),__vite__mapDeps([26,1,4,5,6])),backProcess:s.COMMERCE_DOCUMENTATION}]},q=(e,o)=>({...F,getComponent:()=>{const{processList:t,actualProcess:r}=o(),i=()=>l(()=>import("./ValidationCode-BRGtzEl_.js"),__vite__mapDeps([12,1,13,4,5,6,10,11,14,15]));return t.find(p=>p.name===r).component??i},getBackProcess:()=>{const{processList:t,actualProcess:r}=o();return t.find(i=>i.name===r).backProcess??s.REGISTER},setLastProcess:t=>{e(r=>({lastProcess:{name:(t==null?void 0:t.name)||null,info:(t==null?void 0:t.info)||null}}))},setActualProcess:t=>{e(r=>({actualProcess:t})),t===s.REGISTER&&(localStorage.removeItem("token"),delete u.defaults.headers.common.Authorization)},setToken:t=>{e(r=>({token:t})),localStorage.setItem("token",t),u.defaults.headers.common.Authorization=`Bearer ${t}`},setResume:t=>{e(r=>({resume:t}))}}),_=w(q),H=()=>{const e=_(),o=_(c=>c.getComponent),t=_(c=>c.getBackProcess),{setActualProcess:r,setResume:i,setToken:p}=_(),d=_(c=>c.actualProcess),C=_(c=>c.token),{data:P,isSuccess:g}=U({enabled:!!C});R.useEffect(()=>{i(P&&g?P:null)},[P,g]),R.useEffect(()=>{d===s.REGISTER&&(p(null),i(null))},[d,p]);const S=()=>{const c=t();r(c)},E=R.useMemo(()=>R.lazy(o()),[d]);return a.jsx(f,{sx:{height:{xs:"100%",sm:"100%",md:"100%",lg:"100vh",xl:"100vh"},display:"flex",flexDirection:"column",overflow:"auto",zIndex:1},children:a.jsxs(R.Suspense,{fallback:a.jsx(K,{}),children:[d!==s.REGISTER&&a.jsx(N,{m:5,mb:0,direction:"row",children:a.jsx(v,{onClick:S,children:"< Regresar"})}),a.jsx(f,{m:5,height:1,children:a.jsx(E,{store:e})})]})})},K=()=>a.jsx(f,{sx:{position:"relative",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(1px)",zIndex:e=>e.zIndex.modal-1},children:a.jsx(j,{})}),$="/app/assets/img/integracion-tecnologica.png",Q=A("div")(({theme:e})=>({top:0,left:0,right:0,bottom:0,zIndex:8,position:"absolute",backgroundColor:L(e.palette.grey[900],.1)}));function Y(){return a.jsx(z,{title:"Registro Comercio",children:a.jsxs(I,{container:!0,spacing:0,component:"main",justifyContent:"center",height:"100vH",children:[a.jsx(I,{item:!0,elevation:0,xs:!1,sm:!1,md:6,xl:7,children:a.jsxs(f,{sx:{position:"relative",display:{xs:"none",md:"flex"},height:1,backgroundColor:"#161C24"},children:[a.jsx(Q,{}),a.jsx(f,{component:M.LazyLoadImage,wrapperClassName:"wrapper",effect:"blur",placeholderSrc:"https://zone-assets-api.vercel.app/assets/img_placeholder.svg",sx:{width:1,height:1,objectFit:"cover"},src:$})]})}),a.jsx(I,{item:!0,xs:12,sm:12,md:6,xl:5,alignItems:"center",justify:"center",sx:{overflow:"auto"},children:a.jsx(H,{})})]})})}const re=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{G as C,se as a,re as b,Z as c,oe as d,ee as g,ae as p,te as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/CommerceRegisterForm-CcMSdky9.js","assets/js/vendor-5lkxkETF.js","assets/js/formik.esm-CTTSENmf.js","assets/js/mui-tel-input.es-CLQYayqs.js","assets/js/index-DkbAsBWZ.js","assets/css/build-Bl0dWaDY.css","assets/js/processList-CzVvLx1j.js","assets/js/index.esm-gIIytEq8.js","assets/js/AlertWithFocus-CbRaRhiM.js","assets/js/ProcessContinue-cuPdFv9Q.js","assets/js/useFindCommerceToken-D051pF_x.js","assets/js/useSendValidationCode-CUm7PjRd.js","assets/js/ValidationCode-BRGtzEl_.js","assets/js/mui-one-time-password-input.es-DECpCfUz.js","assets/js/useValidateCode-BtcjmgpO.js","assets/js/matchTypes-mENztEWg.js","assets/js/ServicesSelection-zuByzHvX.js","assets/js/commerceUpdateAdapter-CObYPfcj.js","assets/js/viabo-card-CcTpX9JZ.js","assets/js/viabo-pay-Tb0TUikx.js","assets/js/CommerceInfo-Dbax1sei.js","assets/js/CommerceDocumentation-C5N4Hry1.js","assets/js/UploadSingleFile-ByYCreVQ.js","assets/js/fade-CViozI82.js","assets/js/transition-anLY3gj9.js","assets/js/formatNumber-dGNhWwxT.js","assets/js/FinishProcess-DsXw65G5.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=CommerceRegister-Aw28vNLE.js.map
