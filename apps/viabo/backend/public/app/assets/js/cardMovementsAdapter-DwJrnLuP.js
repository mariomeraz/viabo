import{r as D}from"./index-DkbAsBWZ.js";import{aH as g,aq as T}from"./vendor-5lkxkETF.js";import{f as r}from"./formatNumber-dGNhWwxT.js";import{f as E}from"./formatTime-jCgU2sMR.js";const A=s=>{const f=D(s==null?void 0:s.ciphertext,s==null?void 0:s.iv);let h=0,u=0,C=0,x=0,y=0;return{movements:(f==null?void 0:f.map(a=>{var w,W,N;const c=parseFloat((a==null?void 0:a.amount)||"0");(a==null?void 0:a.type.toLowerCase())==="gasto"?h+=c:u+=c;const k=a!=null&&a.date?g(new Date(a==null?void 0:a.date),"dd MMM yyyy",{locale:T}):"",B=a!=null&&a.date?g(new Date(a==null?void 0:a.date),"p"):"",i=a!=null&&a.receiptFiles?(w=a==null?void 0:a.receiptFiles)==null?void 0:w.split(","):[],d=i==null?void 0:i.reduce((M,l)=>(l.endsWith(".xml")?M.xml=l:l.endsWith(".pdf")&&(M.pdf=l),M),{xml:null,pdf:null}),p=(d==null?void 0:d.xml)!==null&&(d==null?void 0:d.pdf)!==null,I=((W=a==null?void 0:a.operationType)==null?void 0:W.toLowerCase())==="otros cargos";return I&&(a!=null&&a.checked)&&p&&(x+=c),I&&(a!=null&&a.checked)&&!p&&(C+=c),I&&!(a!=null&&a.checked)&&(y+=c),{id:a==null?void 0:a.transactionId,serverDate:a==null?void 0:a.date,fullDate:E(a==null?void 0:a.date),date:k,time:B,description:a==null?void 0:a.description,amount:c,amountFormat:r(c),type:a==null?void 0:a.type.toLowerCase(),concept:(a==null?void 0:a.concept)??"",operationType:(N=a==null?void 0:a.operationType)==null?void 0:N.toUpperCase(),cardId:a==null?void 0:a.cardId,commerceId:a==null?void 0:a.cardCommerceId,ownerCard:a!=null&&a.cardMain?a==null?void 0:a.cardCommerceName:(a==null?void 0:a.cardOwnerName)===""?"Sin Asignar":a==null?void 0:a.cardOwnerName,cardNumber:a!=null&&a.cardMain?"Cuenta Maestra":a==null?void 0:a.cardNumber,cardCommerceName:a==null?void 0:a.cardCommerceName,paymentProcessor:a==null?void 0:a.cardPaymentProcessor,verified:!!(a!=null&&a.checked),isMainCard:!!(a!=null&&a.cardMain),expensesControl:{id:a==null?void 0:a.receiptId,isInvoice:p,invoiceFiles:d,otherFiles:p?[]:i},original:a}}))??[],income:r(u),expenses:r(h),balanceMovements:r(u-h),expensesWithInvoice:r(x),expensesWithoutInvoice:r(C),expensesWithoutChecked:r(y),totalExpensesOtherCharges:r(x+C+y)}};export{A as C};
//# sourceMappingURL=cardMovementsAdapter-DwJrnLuP.js.map
