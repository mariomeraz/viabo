{"version":3,"file":"LiquidateTerminalMovementForm-C3tlJa5U.js","sources":["../../../../../frontend/src/app/business/viabo-pay/cloud/hooks/useLiquidateTerminalMovement.js","../../../../../frontend/src/app/business/viabo-pay/cloud/components/movements/actions/LiquidateTerminalMovementForm.jsx"],"sourcesContent":["import { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { CLOUD_VIABO_PAY_KEYS } from '../adapters'\r\nimport { liquidateTerminalMovement } from '../services'\r\n\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\nimport { isFunction } from '@/shared/utils'\r\n\r\nexport const useLiquidateTerminalMovement = (options = {}) => {\r\n  const client = useQueryClient()\r\n  const liquidateMovement = useMutation(liquidateTerminalMovement, options)\r\n  const liquidate = async (formData, options) => {\r\n    const { onSuccess, onError, mutationOptions } = options\r\n\r\n    try {\r\n      await toast.promise(liquidateMovement.mutateAsync(formData, mutationOptions), {\r\n        pending: 'Liquidando movimiento ...',\r\n        success: {\r\n          render({ data }) {\r\n            client.invalidateQueries([CLOUD_VIABO_PAY_KEYS.MOVEMENTS])\r\n            isFunction(onSuccess) && onSuccess(data)\r\n            return 'Se liquidó el movimiento con éxito'\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      const errorFormatted = getErrorAPI(\r\n        error,\r\n        `No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas`\r\n      )\r\n      isFunction(onError) && onError(errorFormatted)\r\n      toast.error(errorFormatted, {\r\n        type: getNotificationTypeByErrorCode(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...liquidateMovement,\r\n    mutate: liquidate\r\n  }\r\n}\r\n","import PropTypes from 'prop-types'\r\n\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { Box, Divider, Stack, Typography } from '@mui/material'\r\n\r\nimport { useLiquidateTerminalMovement } from '../../../hooks'\r\n\r\nimport { getCardTypeByName } from '@/app/shared/services'\r\n\r\nconst LiquidateTerminalMovementForm = ({ movement, onSuccess }) => {\r\n  const cardLogo = getCardTypeByName(movement?.cardType)\r\n  const CardLogoComponent = cardLogo?.component\r\n\r\n  const { mutate, isLoading } = useLiquidateTerminalMovement()\r\n\r\n  const handleLiquidateMovement = () => {\r\n    mutate(movement?.dataToLiquidate, {\r\n      onSuccess: () => {\r\n        onSuccess()\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Stack px={5} py={3}>\r\n      <Stack alignItems={'center'} justifyContent={'center'} spacing={0.5}>\r\n        <Stack alignItems={'center'} justifyContent={'center'}>\r\n          <Stack direction={'row'} spacing={1} alignItems={'center'}>\r\n            <Typography variant=\"h2\"> {movement?.amount}</Typography>\r\n            <Typography variant=\"caption\">MXN</Typography>\r\n          </Stack>\r\n        </Stack>\r\n        <Stack direction={'row'} spacing={0.5} alignItems={'center'}>\r\n          <CardLogoComponent sx={{ width: 25, height: 25 }} />\r\n          <Typography textAlign={'center'} variant=\"body1\">\r\n            {movement?.description}\r\n          </Typography>\r\n        </Stack>\r\n      </Stack>\r\n\r\n      <Stack\r\n        divider={<Divider flexItem sx={{ borderStyle: 'dashed' }} />}\r\n        spacing={1}\r\n        alignItems={'center'}\r\n        justifyContent={'center'}\r\n      >\r\n        <Box />\r\n        <Typography variant=\"subtitle1\" color={'text.secondary'}>\r\n          Detalles de la Transacción\r\n        </Typography>\r\n\r\n        <Stack flex={1} width={1} spacing={1}>\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">Comercio:</Typography>\r\n            <Box component={'span'} color={'primary.light'} fontWeight={'bold'}>\r\n              {movement?.commerceName}\r\n            </Box>\r\n          </Stack>\r\n\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">Terminal:</Typography>\r\n            <Box component={'span'} color={'primary.main'} fontWeight={'bold'}>\r\n              {movement?.terminalName}\r\n            </Box>\r\n          </Stack>\r\n\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">No. Referencia:</Typography>\r\n            <Box component={'span'} color={'primary.main'} fontWeight={'bold'}>\r\n              {movement?.id}\r\n            </Box>\r\n          </Stack>\r\n\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">No. Autorización:</Typography>\r\n            <Box component={'span'} color={'primary.main'} fontWeight={'bold'}>\r\n              {movement?.authNumber}\r\n            </Box>\r\n          </Stack>\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">Fecha:</Typography>\r\n            <Box component={Typography} variant=\"subtitle2\" color={'text.primary'}>\r\n              {movement?.transactionDate?.fullDate}\r\n            </Box>\r\n          </Stack>\r\n        </Stack>\r\n      </Stack>\r\n\r\n      <Stack\r\n        divider={<Divider flexItem sx={{ borderStyle: 'dashed' }} />}\r\n        spacing={1}\r\n        alignItems={'center'}\r\n        justifyContent={'center'}\r\n      >\r\n        <Box />\r\n        <Typography variant=\"subtitle1\" color={'text.secondary'}>\r\n          Liquidación\r\n        </Typography>\r\n\r\n        <Stack flex={1} width={1} spacing={1}>\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">Monto:</Typography>\r\n            <Box component={'span'} fontWeight={'bold'}>\r\n              {movement?.amountFormat}\r\n            </Box>\r\n          </Stack>\r\n\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">Comisión:</Typography>\r\n            <Box component={'span'} color={'error.main'} fontWeight={'bold'}>\r\n              -{movement?.commission}\r\n            </Box>\r\n          </Stack>\r\n\r\n          <Stack justifyContent={'space-between'} direction={'row'}>\r\n            <Typography variant=\"subtitle2\">Monto a Liquidar:</Typography>\r\n            <Box component={'span'} color={'success.main'} fontWeight={'bold'}>\r\n              {movement?.amountToLiquidateFormat}\r\n            </Box>\r\n          </Stack>\r\n        </Stack>\r\n        <Stack width={1} pt={2}>\r\n          <LoadingButton\r\n            loading={isLoading}\r\n            size=\"large\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            onClick={handleLiquidateMovement}\r\n          >\r\n            Liquidar\r\n          </LoadingButton>\r\n        </Stack>\r\n      </Stack>\r\n    </Stack>\r\n  )\r\n}\r\n\r\nexport default LiquidateTerminalMovementForm\r\n\r\nLiquidateTerminalMovementForm.propTypes = {\r\n  movement: PropTypes.shape({\r\n    amount: PropTypes.any,\r\n    amountFormat: PropTypes.any,\r\n    amountToLiquidateFormat: PropTypes.any,\r\n    authNumber: PropTypes.any,\r\n    cardType: PropTypes.any,\r\n    commerceName: PropTypes.any,\r\n    commission: PropTypes.any,\r\n    dataToLiquidate: PropTypes.any,\r\n    description: PropTypes.any,\r\n    id: PropTypes.any,\r\n    terminalName: PropTypes.any,\r\n    transactionDate: PropTypes.shape({\r\n      fullDate: PropTypes.any\r\n    })\r\n  }),\r\n  onSuccess: PropTypes.func\r\n}\r\n"],"names":["useLiquidateTerminalMovement","options","client","useQueryClient","liquidateMovement","useMutation","liquidateTerminalMovement","formData","onSuccess","onError","mutationOptions","toast","data","CLOUD_VIABO_PAY_KEYS","isFunction","error","errorFormatted","getErrorAPI","getNotificationTypeByErrorCode","LiquidateTerminalMovementForm","movement","cardLogo","getCardTypeByName","cardType","CardLogoComponent","component","mutate","isLoading","handleLiquidateMovement","dataToLiquidate","jsxs","Stack","jsx","Typography","amount","width","height","description","Divider","borderStyle","Box","commerceName","terminalName","id","authNumber","transactionDate","fullDate","amountFormat","commission","amountToLiquidateFormat","LoadingButton","propTypes","PropTypes","shape","any","func"],"mappings":"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"}