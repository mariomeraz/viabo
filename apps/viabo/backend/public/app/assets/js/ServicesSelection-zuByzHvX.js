import{P as E,r as c,i as e,S as x,m as l,T as p,ab as V,B as T,aM as I,e2 as P,dV as k,Q as B,a as O}from"./vendor-5lkxkETF.js";import{u as R,C as _}from"./commerceUpdateAdapter-CObYPfcj.js";import"./index-DkbAsBWZ.js";import{P as S}from"./processList-CzVvLx1j.js";import{V as L}from"./viabo-card-CcTpX9JZ.js";import{V as w}from"./viabo-pay-Tb0TUikx.js";import{p as M}from"./CommerceRegister-Aw28vNLE.js";import{A as N}from"./AlertWithFocus-CbRaRhiM.js";const g={VIABO_CARD:"Viabo Card",VIABO_PAY:"Viabo Pay"},d=[{type:1,name:g.VIABO_PAY,description:"Herramienta de cobro/pago por pefiles,transparencia transaccional y alertas.",image:w},{type:2,name:g.VIABO_CARD,description:"Tarjeta CARNET X VIABO para control de gastos, pago de compensaciones, cash-back y fidelización por perfiles.",image:L}];F.propTypes={store:E.shape(M)};const y={selected:{backgroundColor:s=>O(s.palette.primary.main,.3),borderColor:s=>s.palette.primary.main},unselected:{backgroundColor:s=>s.palette.background.neutral,borderColor:"transparent"}};function F({store:s}){const{setActualProcess:h,setLastProcess:f,resume:r}=s,[n,o]=c.useState([]),[m,u]=c.useState(!1),{mutate:C,isLoading:b}=R();c.useEffect(()=>{if(r!=null&&r.services){const a=(r==null?void 0:r.services.map(i=>{var t;return(t=d.find(v=>v.type.toString()===(i==null?void 0:i.type)))==null?void 0:t.name}))||[];o(a)}},[r==null?void 0:r.services]);const A=a=>{if(!n.includes(a.name))return o([...n,a.name]);const i=n.filter(t=>t!==a.name);return o(i)},j=()=>{if(n.length===0)return u(!0);const a=_(r,2),i=d.filter(t=>n.includes(t.name)).map(t=>({type:t.type.toString(),cardNumbers:"0",cardUse:"",personalized:"0"}));return C({...a,services:i},{onSuccess:()=>{h(S.COMMERCE_INFO),f({info:n,name:S.SERVICES_SELECTION}),u(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsx(x,{direction:"column",width:1,spacing:1,children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(p,{variant:"h4",color:"textPrimary",align:"center",children:"¡Bienvenido a Viabo!"}),e.jsx(p,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Seleccione los servicios para habilitar su ecosistema."})]})}),m&&e.jsxs(N,{listenElement:m,sx:{mb:5,mx:2,textAlign:"initial"},severity:"warning",children:[e.jsx(V,{sx:{textAlign:"initial"},children:"Servicios"}),"Se debe seleccionar al menos un servicio para continuar con el proceso"]}),e.jsx(l.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(T,{my:3,px:2,sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(2, 1fr)"}},children:d.map((a,i)=>{const t=n.includes(a.name);return e.jsx(l.div,{whileHover:{scale:1.05},whileTap:{scale:.9},children:e.jsxs(I,{onClick:()=>A(a),sx:{backgroundColor:"transparent",cursor:"pointer",height:"100%",...t?y.selected:y.unselected},children:[e.jsx(P,{sx:{px:{xs:10,sm:5},pt:3},component:"img",image:a.image}),e.jsx(k,{children:e.jsx(p,{variant:"caption",color:"text.disabled",children:a.description})})]})},i)})})}),e.jsx(x,{mt:7,px:2,children:e.jsx(B,{onClick:j,loading:b,color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{textTransform:"uppercase"},children:"Guardar"})})]})}export{F as ServicesSelection,F as default};
//# sourceMappingURL=ServicesSelection-zuByzHvX.js.map
