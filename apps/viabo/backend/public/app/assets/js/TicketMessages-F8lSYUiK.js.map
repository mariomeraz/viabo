{"version":3,"file":"TicketMessages-F8lSYUiK.js","sources":["../../../../../frontend/node_modules/.pnpm/react-infinite-scroll-component@6.1.0_react@18.2.0/node_modules/react-infinite-scroll-component/dist/index.es.js","../../../../../frontend/src/app/support/ticket-support-list/components/conversation/TicketMessageItemStyles.jsx","../../../../../frontend/src/app/support/ticket-support-list/components/conversation/TicketMessageFile.jsx","../../../../../frontend/src/app/support/ticket-support-list/components/conversation/TicketMessages.jsx"],"sourcesContent":["import React, { Component } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n    var args = arguments;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, args);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\nvar ThresholdUnits = {\r\n    Pixel: 'Pixel',\r\n    Percent: 'Percent',\r\n};\r\nvar defaultThreshold = {\r\n    unit: ThresholdUnits.Percent,\r\n    value: 0.8,\r\n};\r\nfunction parseThreshold(scrollThreshold) {\r\n    if (typeof scrollThreshold === 'number') {\r\n        return {\r\n            unit: ThresholdUnits.Percent,\r\n            value: scrollThreshold * 100,\r\n        };\r\n    }\r\n    if (typeof scrollThreshold === 'string') {\r\n        if (scrollThreshold.match(/^(\\d*(\\.\\d+)?)px$/)) {\r\n            return {\r\n                unit: ThresholdUnits.Pixel,\r\n                value: parseFloat(scrollThreshold),\r\n            };\r\n        }\r\n        if (scrollThreshold.match(/^(\\d*(\\.\\d+)?)%$/)) {\r\n            return {\r\n                unit: ThresholdUnits.Percent,\r\n                value: parseFloat(scrollThreshold),\r\n            };\r\n        }\r\n        console.warn('scrollThreshold format is invalid. Valid formats: \"120px\", \"50%\"...');\r\n        return defaultThreshold;\r\n    }\r\n    console.warn('scrollThreshold should be string or number');\r\n    return defaultThreshold;\r\n}\n\nvar InfiniteScroll = /** @class */ (function (_super) {\r\n    __extends(InfiniteScroll, _super);\r\n    function InfiniteScroll(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.lastScrollTop = 0;\r\n        _this.actionTriggered = false;\r\n        // variables to keep track of pull down behaviour\r\n        _this.startY = 0;\r\n        _this.currentY = 0;\r\n        _this.dragging = false;\r\n        // will be populated in componentDidMount\r\n        // based on the height of the pull down element\r\n        _this.maxPullDownDistance = 0;\r\n        _this.getScrollableTarget = function () {\r\n            if (_this.props.scrollableTarget instanceof HTMLElement)\r\n                return _this.props.scrollableTarget;\r\n            if (typeof _this.props.scrollableTarget === 'string') {\r\n                return document.getElementById(_this.props.scrollableTarget);\r\n            }\r\n            if (_this.props.scrollableTarget === null) {\r\n                console.warn(\"You are trying to pass scrollableTarget but it is null. This might\\n        happen because the element may not have been added to DOM yet.\\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\\n      \");\r\n            }\r\n            return null;\r\n        };\r\n        _this.onStart = function (evt) {\r\n            if (_this.lastScrollTop)\r\n                return;\r\n            _this.dragging = true;\r\n            if (evt instanceof MouseEvent) {\r\n                _this.startY = evt.pageY;\r\n            }\r\n            else if (evt instanceof TouchEvent) {\r\n                _this.startY = evt.touches[0].pageY;\r\n            }\r\n            _this.currentY = _this.startY;\r\n            if (_this._infScroll) {\r\n                _this._infScroll.style.willChange = 'transform';\r\n                _this._infScroll.style.transition = \"transform 0.2s cubic-bezier(0,0,0.31,1)\";\r\n            }\r\n        };\r\n        _this.onMove = function (evt) {\r\n            if (!_this.dragging)\r\n                return;\r\n            if (evt instanceof MouseEvent) {\r\n                _this.currentY = evt.pageY;\r\n            }\r\n            else if (evt instanceof TouchEvent) {\r\n                _this.currentY = evt.touches[0].pageY;\r\n            }\r\n            // user is scrolling down to up\r\n            if (_this.currentY < _this.startY)\r\n                return;\r\n            if (_this.currentY - _this.startY >=\r\n                Number(_this.props.pullDownToRefreshThreshold)) {\r\n                _this.setState({\r\n                    pullToRefreshThresholdBreached: true,\r\n                });\r\n            }\r\n            // so you can drag upto 1.5 times of the maxPullDownDistance\r\n            if (_this.currentY - _this.startY > _this.maxPullDownDistance * 1.5)\r\n                return;\r\n            if (_this._infScroll) {\r\n                _this._infScroll.style.overflow = 'visible';\r\n                _this._infScroll.style.transform = \"translate3d(0px, \" + (_this.currentY -\r\n                    _this.startY) + \"px, 0px)\";\r\n            }\r\n        };\r\n        _this.onEnd = function () {\r\n            _this.startY = 0;\r\n            _this.currentY = 0;\r\n            _this.dragging = false;\r\n            if (_this.state.pullToRefreshThresholdBreached) {\r\n                _this.props.refreshFunction && _this.props.refreshFunction();\r\n                _this.setState({\r\n                    pullToRefreshThresholdBreached: false,\r\n                });\r\n            }\r\n            requestAnimationFrame(function () {\r\n                // this._infScroll\r\n                if (_this._infScroll) {\r\n                    _this._infScroll.style.overflow = 'auto';\r\n                    _this._infScroll.style.transform = 'none';\r\n                    _this._infScroll.style.willChange = 'unset';\r\n                }\r\n            });\r\n        };\r\n        _this.onScrollListener = function (event) {\r\n            if (typeof _this.props.onScroll === 'function') {\r\n                // Execute this callback in next tick so that it does not affect the\r\n                // functionality of the library.\r\n                setTimeout(function () { return _this.props.onScroll && _this.props.onScroll(event); }, 0);\r\n            }\r\n            var target = _this.props.height || _this._scrollableNode\r\n                ? event.target\r\n                : document.documentElement.scrollTop\r\n                    ? document.documentElement\r\n                    : document.body;\r\n            // return immediately if the action has already been triggered,\r\n            // prevents multiple triggers.\r\n            if (_this.actionTriggered)\r\n                return;\r\n            var atBottom = _this.props.inverse\r\n                ? _this.isElementAtTop(target, _this.props.scrollThreshold)\r\n                : _this.isElementAtBottom(target, _this.props.scrollThreshold);\r\n            // call the `next` function in the props to trigger the next data fetch\r\n            if (atBottom && _this.props.hasMore) {\r\n                _this.actionTriggered = true;\r\n                _this.setState({ showLoader: true });\r\n                _this.props.next && _this.props.next();\r\n            }\r\n            _this.lastScrollTop = target.scrollTop;\r\n        };\r\n        _this.state = {\r\n            showLoader: false,\r\n            pullToRefreshThresholdBreached: false,\r\n            prevDataLength: props.dataLength,\r\n        };\r\n        _this.throttledOnScrollListener = throttle(150, _this.onScrollListener).bind(_this);\r\n        _this.onStart = _this.onStart.bind(_this);\r\n        _this.onMove = _this.onMove.bind(_this);\r\n        _this.onEnd = _this.onEnd.bind(_this);\r\n        return _this;\r\n    }\r\n    InfiniteScroll.prototype.componentDidMount = function () {\r\n        if (typeof this.props.dataLength === 'undefined') {\r\n            throw new Error(\"mandatory prop \\\"dataLength\\\" is missing. The prop is needed\" +\r\n                \" when loading more content. Check README.md for usage\");\r\n        }\r\n        this._scrollableNode = this.getScrollableTarget();\r\n        this.el = this.props.height\r\n            ? this._infScroll\r\n            : this._scrollableNode || window;\r\n        if (this.el) {\r\n            this.el.addEventListener('scroll', this\r\n                .throttledOnScrollListener);\r\n        }\r\n        if (typeof this.props.initialScrollY === 'number' &&\r\n            this.el &&\r\n            this.el instanceof HTMLElement &&\r\n            this.el.scrollHeight > this.props.initialScrollY) {\r\n            this.el.scrollTo(0, this.props.initialScrollY);\r\n        }\r\n        if (this.props.pullDownToRefresh && this.el) {\r\n            this.el.addEventListener('touchstart', this.onStart);\r\n            this.el.addEventListener('touchmove', this.onMove);\r\n            this.el.addEventListener('touchend', this.onEnd);\r\n            this.el.addEventListener('mousedown', this.onStart);\r\n            this.el.addEventListener('mousemove', this.onMove);\r\n            this.el.addEventListener('mouseup', this.onEnd);\r\n            // get BCR of pullDown element to position it above\r\n            this.maxPullDownDistance =\r\n                (this._pullDown &&\r\n                    this._pullDown.firstChild &&\r\n                    this._pullDown.firstChild.getBoundingClientRect()\r\n                        .height) ||\r\n                    0;\r\n            this.forceUpdate();\r\n            if (typeof this.props.refreshFunction !== 'function') {\r\n                throw new Error(\"Mandatory prop \\\"refreshFunction\\\" missing.\\n          Pull Down To Refresh functionality will not work\\n          as expected. Check README.md for usage'\");\r\n            }\r\n        }\r\n    };\r\n    InfiniteScroll.prototype.componentWillUnmount = function () {\r\n        if (this.el) {\r\n            this.el.removeEventListener('scroll', this\r\n                .throttledOnScrollListener);\r\n            if (this.props.pullDownToRefresh) {\r\n                this.el.removeEventListener('touchstart', this.onStart);\r\n                this.el.removeEventListener('touchmove', this.onMove);\r\n                this.el.removeEventListener('touchend', this.onEnd);\r\n                this.el.removeEventListener('mousedown', this.onStart);\r\n                this.el.removeEventListener('mousemove', this.onMove);\r\n                this.el.removeEventListener('mouseup', this.onEnd);\r\n            }\r\n        }\r\n    };\r\n    InfiniteScroll.prototype.componentDidUpdate = function (prevProps) {\r\n        // do nothing when dataLength is unchanged\r\n        if (this.props.dataLength === prevProps.dataLength)\r\n            return;\r\n        this.actionTriggered = false;\r\n        // update state when new data was sent in\r\n        this.setState({\r\n            showLoader: false,\r\n        });\r\n    };\r\n    InfiniteScroll.getDerivedStateFromProps = function (nextProps, prevState) {\r\n        var dataLengthChanged = nextProps.dataLength !== prevState.prevDataLength;\r\n        // reset when data changes\r\n        if (dataLengthChanged) {\r\n            return __assign(__assign({}, prevState), { prevDataLength: nextProps.dataLength });\r\n        }\r\n        return null;\r\n    };\r\n    InfiniteScroll.prototype.isElementAtTop = function (target, scrollThreshold) {\r\n        if (scrollThreshold === void 0) { scrollThreshold = 0.8; }\r\n        var clientHeight = target === document.body || target === document.documentElement\r\n            ? window.screen.availHeight\r\n            : target.clientHeight;\r\n        var threshold = parseThreshold(scrollThreshold);\r\n        if (threshold.unit === ThresholdUnits.Pixel) {\r\n            return (target.scrollTop <=\r\n                threshold.value + clientHeight - target.scrollHeight + 1);\r\n        }\r\n        return (target.scrollTop <=\r\n            threshold.value / 100 + clientHeight - target.scrollHeight + 1);\r\n    };\r\n    InfiniteScroll.prototype.isElementAtBottom = function (target, scrollThreshold) {\r\n        if (scrollThreshold === void 0) { scrollThreshold = 0.8; }\r\n        var clientHeight = target === document.body || target === document.documentElement\r\n            ? window.screen.availHeight\r\n            : target.clientHeight;\r\n        var threshold = parseThreshold(scrollThreshold);\r\n        if (threshold.unit === ThresholdUnits.Pixel) {\r\n            return (target.scrollTop + clientHeight >= target.scrollHeight - threshold.value);\r\n        }\r\n        return (target.scrollTop + clientHeight >=\r\n            (threshold.value / 100) * target.scrollHeight);\r\n    };\r\n    InfiniteScroll.prototype.render = function () {\r\n        var _this = this;\r\n        var style = __assign({ height: this.props.height || 'auto', overflow: 'auto', WebkitOverflowScrolling: 'touch' }, this.props.style);\r\n        var hasChildren = this.props.hasChildren ||\r\n            !!(this.props.children &&\r\n                this.props.children instanceof Array &&\r\n                this.props.children.length);\r\n        // because heighted infiniteScroll visualy breaks\r\n        // on drag down as overflow becomes visible\r\n        var outerDivStyle = this.props.pullDownToRefresh && this.props.height\r\n            ? { overflow: 'auto' }\r\n            : {};\r\n        return (React.createElement(\"div\", { style: outerDivStyle, className: \"infinite-scroll-component__outerdiv\" },\r\n            React.createElement(\"div\", { className: \"infinite-scroll-component \" + (this.props.className || ''), ref: function (infScroll) { return (_this._infScroll = infScroll); }, style: style },\r\n                this.props.pullDownToRefresh && (React.createElement(\"div\", { style: { position: 'relative' }, ref: function (pullDown) { return (_this._pullDown = pullDown); } },\r\n                    React.createElement(\"div\", { style: {\r\n                            position: 'absolute',\r\n                            left: 0,\r\n                            right: 0,\r\n                            top: -1 * this.maxPullDownDistance,\r\n                        } }, this.state.pullToRefreshThresholdBreached\r\n                        ? this.props.releaseToRefreshContent\r\n                        : this.props.pullDownToRefreshContent))),\r\n                this.props.children,\r\n                !this.state.showLoader &&\r\n                    !hasChildren &&\r\n                    this.props.hasMore &&\r\n                    this.props.loader,\r\n                this.state.showLoader && this.props.hasMore && this.props.loader,\r\n                !this.props.hasMore && this.props.endMessage)));\r\n    };\r\n    return InfiniteScroll;\r\n}(Component));\n\nexport default InfiniteScroll;\n//# sourceMappingURL=index.es.js.map\n","import { Typography, styled } from '@mui/material'\r\n\r\nconst ContentStyle = styled('div')(({ theme }) => ({\r\n  width: '100%',\r\n  [theme.breakpoints.up('lg')]: {\r\n    maxWidth: 400\r\n  },\r\n  [theme.breakpoints.up('xl')]: {\r\n    maxWidth: 500\r\n  },\r\n  padding: theme.spacing(1.5),\r\n  marginTop: theme.spacing(0.5),\r\n  borderRadius: theme.shape.borderRadius,\r\n  backgroundColor: theme.palette.mode === 'dark' ? theme.palette.info.main : theme.palette.info.lighter,\r\n  position: 'relative',\r\n  '&:before': {\r\n    bottom: '100%',\r\n    left: '0%',\r\n    border: '10px solid transparent',\r\n    content: '\" \"',\r\n    height: 0,\r\n    width: 0,\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    borderBottomColor: theme.palette.mode === 'dark' ? theme.palette.info.main : theme.palette.info.lighter,\r\n    borderWidth: '7px',\r\n    marginLeft: '15px'\r\n  }\r\n}))\r\n\r\nconst FileThumbStyle = styled('div')(({ theme }) => ({\r\n  width: 100,\r\n  height: 100,\r\n  flexShrink: 0,\r\n  display: 'flex',\r\n  overflow: 'hidden',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  cursor: 'pointer',\r\n  color: theme.palette.text.secondary,\r\n  borderRadius: theme.shape.borderRadius,\r\n  backgroundColor: theme.palette.grey[500_16],\r\n  '&:hover': { opacity: 0.8 }\r\n}))\r\n\r\nconst InfoStyle = styled(Typography)(({ theme }) => ({\r\n  display: 'flex',\r\n  marginBottom: theme.spacing(0.75),\r\n  color: theme.palette.text.secondary\r\n}))\r\n\r\nexport { ContentStyle, FileThumbStyle, InfoStyle }\r\n","import { useMemo } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { FilePresentRounded } from '@mui/icons-material'\r\nimport { isString } from 'lodash'\r\n\r\nimport { FileThumbStyle } from './TicketMessageItemStyles'\r\n\r\nimport { Image } from '@/shared/components/images'\r\nimport { getFileURL } from '@/shared/utils'\r\n\r\nconst TicketMessageFile = ({ file, isURL = true }) => {\r\n  const fileURL = useMemo(() => getFileURL(file, isURL), [file])\r\n  const src = useMemo(() => (isString(file) ? file : URL.createObjectURL(file)), [file])\r\n  const alt = useMemo(() => (isString(file) ? file : file.name), [file])\r\n  const sx = { width: 60, height: 60 }\r\n\r\n  return (\r\n    <FileThumbStyle\r\n      onClick={e => {\r\n        e.stopPropagation()\r\n        window.open(file, '_blank')\r\n      }}\r\n    >\r\n      {fileURL === 'image' && <Image src={src} alt={alt} sx={{ height: 1 }} ratio=\"1/1\" />}\r\n      {fileURL && fileURL !== 'image' && <Image src={fileURL} alt={file} sx={sx} />}\r\n      {!fileURL && <FilePresentRounded sx={sx} />}\r\n    </FileThumbStyle>\r\n  )\r\n}\r\n\r\nTicketMessageFile.propTypes = {\r\n  file: PropTypes.any,\r\n  isURL: PropTypes.bool\r\n}\r\n\r\nexport default TicketMessageFile\r\n","import { Fragment, memo, useEffect, useMemo, useRef } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { AccessTime, DoneAll } from '@mui/icons-material'\r\nimport { Alert, Avatar, Box, CircularProgress, Skeleton, Stack, Tooltip, styled } from '@mui/material'\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\n\r\nimport TicketMessageFile from './TicketMessageFile'\r\nimport { ContentStyle, InfoStyle } from './TicketMessageItemStyles'\r\n\r\nimport { createAvatar } from '@/theme/utils'\r\n\r\nconst TicketMessages = ({ queryTicketConversation, scroll, setScroll }) => {\r\n  const { data, isLoading, fetchNextPage, hasNextPage, refetch } = queryTicketConversation\r\n\r\n  const dataLength = data?.pages?.reduce((counter, page) => counter + (page.results?.messages?.length || 0), 0) ?? 0\r\n\r\n  const scrollRef = useRef(null)\r\n\r\n  const scrollMessagesToBottom = () => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    scrollMessagesToBottom()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (scroll) {\r\n      scrollMessagesToBottom()\r\n      setScroll(false)\r\n    }\r\n  }, [scroll])\r\n\r\n  const direction = useMemo(() => (dataLength === 0 ? 'column' : 'column-reverse'), [dataLength])\r\n\r\n  return (\r\n    <Stack ref={scrollRef} gap={2} p={3} sx={{ overflow: 'auto' }} id=\"scrollbar-target\" flexDirection={direction}>\r\n      <Box\r\n        component={InfiniteScroll}\r\n        dataLength={dataLength}\r\n        next={fetchNextPage}\r\n        hasMore={!!hasNextPage}\r\n        inverse\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: direction,\r\n          overflow: 'none'\r\n        }}\r\n        loader={\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', pt: 1 }}>\r\n            <CircularProgress />\r\n          </Box>\r\n        }\r\n        scrollableTarget=\"scrollbar-target\"\r\n        endMessage={\r\n          !isLoading && (\r\n            <Alert variant=\"outlined\" severity=\"info\" sx={{ justifyContent: 'center', m: 2 }}>\r\n              Este es el principio del chat\r\n            </Alert>\r\n          )\r\n        }\r\n        refreshFunction={refetch}\r\n        pullDownToRefresh\r\n        pullDownToRefreshThreshold={50}\r\n      >\r\n        {(isLoading ? [...Array(12)] : data?.pages)?.map((group, index) =>\r\n          group ? (\r\n            <Fragment key={index}>\r\n              {group.results?.messages?.map((message, index) => (\r\n                <TicketMessageItem key={index} message={message} />\r\n              ))}\r\n            </Fragment>\r\n          ) : (\r\n            <MessageSkeleton key={index} />\r\n          )\r\n        )}\r\n      </Box>\r\n    </Stack>\r\n  )\r\n}\r\n\r\nTicketMessages.propTypes = {\r\n  queryTicketConversation: PropTypes.shape({\r\n    data: PropTypes.shape({\r\n      pages: PropTypes.array\r\n    }),\r\n    fetchNextPage: PropTypes.any,\r\n    hasNextPage: PropTypes.any,\r\n    isFetching: PropTypes.any,\r\n    isLoading: PropTypes.any,\r\n    refetch: PropTypes.any\r\n  }),\r\n  scroll: PropTypes.any,\r\n  setScroll: PropTypes.func\r\n}\r\n\r\nexport default memo(TicketMessages)\r\n\r\nfunction MessageSkeleton() {\r\n  return (\r\n    <Stack direction={'row'} spacing={1} p={3}>\r\n      <Skeleton variant=\"circular\" width={40} height={40} />\r\n      <Stack spacing={1}>\r\n        <Skeleton variant=\"text\" width={100} />\r\n        <Skeleton animation={'wave'} variant=\"rounded\" width={300} height={60} />\r\n      </Stack>\r\n    </Stack>\r\n  )\r\n}\r\n\r\nconst RootStyle = styled('div')(({ theme }) => ({\r\n  display: 'flex',\r\n  paddingTop: theme.spacing(1.5)\r\n}))\r\n\r\nfunction TicketMessageItem({ message }) {\r\n  const isMe = Boolean(message?.my)\r\n  const hasFiles = message?.attachment?.length > 0\r\n  const files = message?.attachment || []\r\n  const { color } = createAvatar(message?.name)\r\n\r\n  return (\r\n    <RootStyle>\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          ...(isMe && {\r\n            ml: 'auto'\r\n          })\r\n        }}\r\n      >\r\n        {!isMe && (\r\n          <Avatar\r\n            alt={message?.name}\r\n            src={message?.avatar}\r\n            sx={theme => ({\r\n              width: 32,\r\n              height: 32,\r\n              fontSize: 'inherit',\r\n              mr: 2,\r\n              color: theme.palette[color].contrastText,\r\n              backgroundColor: theme.palette[color].main\r\n            })}\r\n          >\r\n            {message?.initials}\r\n          </Avatar>\r\n        )}\r\n\r\n        <div>\r\n          <InfoStyle\r\n            variant=\"caption\"\r\n            sx={{\r\n              ...(isMe && { justifyContent: 'flex-end' })\r\n            }}\r\n          >\r\n            {!isMe && `${message?.name}`}&nbsp;\r\n            {\r\n              <Tooltip title={message?.createDate?.original || ''} followCursor>\r\n                <Box component={'span'} color={'text.disabled'}>\r\n                  {!isMe && <>&bull; {message?.createDate?.fToNow}</>}\r\n                  {isMe && message?.createDate?.fToNow}\r\n                </Box>\r\n              </Tooltip>\r\n            }\r\n          </InfoStyle>\r\n          <Stack gap={1}>\r\n            <ContentStyle\r\n              sx={{\r\n                ...(isMe && {\r\n                  color: 'grey.800',\r\n                  bgcolor: 'success.lighter',\r\n                  '&:before': {\r\n                    bottom: '100%',\r\n                    left: '100%',\r\n                    border: '10px solid transparent',\r\n                    content: '\" \"',\r\n                    height: 0,\r\n                    width: 0,\r\n                    position: 'absolute',\r\n                    pointerEvents: 'none',\r\n                    borderBottomColor: 'success.lighter',\r\n                    borderWidth: '7px',\r\n                    marginLeft: '-30px'\r\n                  }\r\n                })\r\n              }}\r\n            >\r\n              {hasFiles ? (\r\n                <Stack flexDirection={'row'} justifyContent={'space-between'} gap={1}>\r\n                  <Stack spacing={2}>\r\n                    <Box\r\n                      sx={{ wordWrap: 'break-word', textWrap: 'pretty', fontSize: 'small' }}\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: `<p style='font-size: small'>${message?.message}</p>`\r\n                      }}\r\n                    />\r\n\r\n                    <Stack\r\n                      flexDirection=\"row\"\r\n                      flexWrap=\"wrap\"\r\n                      justifyContent=\"start\"\r\n                      alignItems=\"end\"\r\n                      gap={2}\r\n                      sx={{ overflow: 'auto', pb: 2 }}\r\n                    >\r\n                      {files?.map((file, index) => (\r\n                        <TicketMessageFile key={index} file={file} isURL={!!message?.isSent} />\r\n                      ))}\r\n                    </Stack>\r\n                  </Stack>\r\n                  {isMe && (\r\n                    <Box component={'span'} sx={{ display: 'flex', alignItems: 'flex-end' }}>\r\n                      {message?.isSent ? (\r\n                        <DoneAll sx={{ color: 'info.main', fontSize: 16 }} />\r\n                      ) : (\r\n                        <AccessTime sx={{ color: 'info.main', fontSize: 16 }} />\r\n                      )}\r\n                    </Box>\r\n                  )}\r\n                </Stack>\r\n              ) : (\r\n                <Stack flexDirection={'row'} justifyContent={'space-between'} gap={1}>\r\n                  <Box\r\n                    sx={{ wordWrap: 'break-word', textWrap: 'pretty' }}\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: `<p style='font-size: small'>${message?.message}</p>`\r\n                    }}\r\n                  />\r\n                  {isMe && (\r\n                    <Box component={'span'} sx={{ display: 'flex', alignItems: 'flex-end' }}>\r\n                      {message?.isSent ? (\r\n                        <DoneAll sx={{ color: 'info.main', fontSize: 16 }} />\r\n                      ) : (\r\n                        <AccessTime sx={{ color: 'info.main', fontSize: 16 }} />\r\n                      )}\r\n                    </Box>\r\n                  )}\r\n                </Stack>\r\n              )}\r\n            </ContentStyle>\r\n          </Stack>\r\n        </div>\r\n      </Box>\r\n    </RootStyle>\r\n  )\r\n}\r\n\r\nTicketMessageItem.propTypes = {\r\n  message: PropTypes.shape({\r\n    attachment: PropTypes.array,\r\n    avatar: PropTypes.any,\r\n    createDate: PropTypes.shape({\r\n      fToNow: PropTypes.any,\r\n      original: PropTypes.string\r\n    }),\r\n    initials: PropTypes.any,\r\n    message: PropTypes.any,\r\n    my: PropTypes.any,\r\n    name: PropTypes.any\r\n  })\r\n}\r\n"],"names":["extendStatics","d","b","p","__extends","__","__assign","t","s","i","n","throttle","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","cancel","wrapper","self","elapsed","args","exec","clear","ThresholdUnits","defaultThreshold","parseThreshold","scrollThreshold","InfiniteScroll","_super","props","_this","evt","event","target","atBottom","prevProps","nextProps","prevState","dataLengthChanged","clientHeight","threshold","style","hasChildren","outerDivStyle","React","infScroll","pullDown","Component","ContentStyle","styled","theme","width","breakpoints","up","maxWidth","padding","spacing","marginTop","borderRadius","shape","backgroundColor","palette","mode","info","main","lighter","position","bottom","left","border","content","height","pointerEvents","borderBottomColor","borderWidth","marginLeft","FileThumbStyle","flexShrink","display","overflow","alignItems","justifyContent","cursor","color","text","secondary","grey","opacity","InfoStyle","Typography","marginBottom","TicketMessageFile","file","isURL","fileURL","useMemo","getFileURL","src","isString","URL","createObjectURL","alt","name","sx","jsxs","e","stopPropagation","open","jsx","Image","FilePresentRounded","propTypes","PropTypes","any","bool","TicketMessages","queryTicketConversation","scroll","setScroll","data","isLoading","fetchNextPage","hasNextPage","refetch","dataLength","pages","reduce","counter","page","results","messages","length","scrollRef","useRef","scrollMessagesToBottom","current","scrollTop","scrollHeight","useEffect","direction","Stack","Box","flexDirection","pt","CircularProgress","Alert","m","Array","map","group","index","Fragment","message","TicketMessageItem","MessageSkeleton","array","isFetching","func","TicketMessages$1","memo","Skeleton","RootStyle","paddingTop","isMe","Boolean","my","hasFiles","attachment","files","createAvatar","ml","Avatar","avatar","fontSize","mr","contrastText","initials","Tooltip","createDate","original","fToNow","bgcolor","wordWrap","textWrap","__html","pb","isSent","DoneAll","AccessTime","string"],"mappings":"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","x_google_ignoreList":[0]}