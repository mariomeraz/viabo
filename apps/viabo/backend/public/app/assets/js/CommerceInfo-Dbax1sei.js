import{r as $,i as r,S as x,T as S,B as G,bB as n,M as H,e1 as E,b7 as R,Q,P as J}from"./vendor-5lkxkETF.js";import{u as K}from"./formik.esm-CTTSENmf.js";import{u as X,C as Y}from"./commerceUpdateAdapter-CObYPfcj.js";import"./index-DkbAsBWZ.js";import{P as T}from"./processList-CzVvLx1j.js";import{p as Z}from"./CommerceRegister-Aw28vNLE.js";import{c as P,a as t,b as c}from"./index.esm-gIIytEq8.js";const ee=["Pago compensaciones a colaboradores","Pago servicios","Control de gastos ","Otro"],re=P({fiscalName:t().required("El nombre fiscal es requerido"),rfc:t().required("El RFC es requerido"),commercialName:t().required("El nombre comercial es requerido"),employeesNumber:c().min(1,"Al menos debe exisitir un empleado").required("El número de empleados es requerido"),branchesNumber:c().min(1,"Al menos debe existir una sucursal").required("El número de sucursales es requerido"),tpvsNumber:c().min(1,"Al menos debe seleccionar una terminal punto de venta").required("El número de terminales de punto de venta es requerido")}),ae=P({fiscalName:t().required("El nombre fiscal es requerido"),rfc:t().required("El RFC es requerido"),commercialName:t().required("El nombre comercial es requerido"),employeesNumber:c().min(1,"Al menos debe exisitir un empleado").required("El número de empleados es requerido"),branchesNumber:c().min(1,"Al menos debe existir una sucursal").required("El número de sucursales es requerido"),tpvsNumber:c().min(1,"Al menos debe seleccionar una terminal punto de venta").required("El número de terminales de punto de venta es requerido"),cardsUse:t().required("El uso de la tarjetas es requerido"),cardsNumber:c().min(1,"Al menos debe seleccionar una tarjeta").required("El número de tarjetas es requerido")}),oe=e=>{var h;const m={fiscalName:(e==null?void 0:e.fiscalName)||"",rfc:(e==null?void 0:e.rfc)||"",commercialName:(e==null?void 0:e.commercialName)||"",employeesNumber:(e==null?void 0:e.employeesNumber)||"",branchesNumber:(e==null?void 0:e.branchesNumber)||"",tpvsNumber:(e==null?void 0:e.tpvsNumber)||"",apiRequired:(e==null?void 0:e.apiRequired)||!1,cardsUse:(e==null?void 0:e.cardsUse)||"",cardsNumber:(e==null?void 0:e.cardsNumber)||"",customCardsRequired:(e==null?void 0:e.customCardsRequired)||!1};let b=re;const N=!!((h=e==null?void 0:e.services)!=null&&h.find(u=>(u==null?void 0:u.type)==="2"));return N&&(b=ae),{initialValues:m,schema:b,allInfoIsRequired:N}};ie.propTypes={store:J.shape(Z)};function ie({store:e}){const{resume:m,setActualProcess:b,setLastProcess:N}=e,{schema:h,initialValues:u,allInfoIsRequired:q}=$.useMemo(()=>oe(m),[m]),{mutate:U,isLoading:v}=X(),I=K({initialValues:u,enableReinitialize:!0,validationSchema:h,onSubmit:p=>{var j;const{fiscalName:M,rfc:A,commercialName:F,employeesNumber:W,branchesNumber:O,tpvsNumber:k,apiRequired:w,cardsUse:L,cardsNumber:z,customCardsRequired:D}=p,f=Y(m,3),V=(j=f==null?void 0:f.services)==null?void 0:j.map(d=>(d==null?void 0:d.type)==="2"?{...d,type:d.type.toString(),cardNumbers:z.toString(),cardUse:L,personalized:D?"1":"0"}:d),_={...f,fiscalName:M,tradeName:F,rfc:A,employees:W,branchOffices:O,pointSaleTerminal:k,paymentApi:w?"1":"0",services:V};U(_,{onSuccess:()=>{b(T.COMMERCE_DOCUMENTATION),N({info:null,name:T.COMMERCE_INFO}),C(!1)},onError:()=>{C(!1)}})}}),{handleSubmit:B,values:a,errors:o,touched:i,handleChange:l,isSubmitting:g,setSubmitting:C,getFieldProps:y}=I,s=g||v;return r.jsxs(r.Fragment,{children:[r.jsxs(x,{direction:"column",width:1,spacing:1,children:[r.jsx(S,{variant:"h4",color:"textPrimary",align:"center",children:"Información del Comercio"}),r.jsx(S,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Ingrese la información del comercio para continuar con el proceso"})]}),r.jsx(G,{width:1,py:4,component:"form",onSubmit:B,children:r.jsxs(x,{spacing:3,children:[r.jsx(n,{fullWidth:!0,name:"fiscalName",label:"Nombre Fiscal",autoFocus:!0,value:a.fiscalName,error:i.fiscalName&&!!o.fiscalName,helperText:i.fiscalName&&o.fiscalName,onChange:l,disabled:s}),r.jsx(n,{fullWidth:!0,name:"rfc",label:"RFC",value:a.rfc,error:i.rfc&&!!o.rfc,helperText:i.rfc&&o.rfc,onChange:l,disabled:s}),r.jsx(n,{fullWidth:!0,name:"commercialName",label:"Nombre Comercial",value:a.commercialName,error:i.commercialName&&!!o.commercialName,helperText:i.commercialName&&o.commercialName,onChange:l,disabled:s}),r.jsxs(x,{direction:{xs:"column",md:"row"},spacing:3,children:[r.jsx(n,{fullWidth:!0,name:"employeesNumber",label:"No. Empleados",type:"number",inputProps:{inputMode:"numeric",min:"1"},value:a.employeesNumber,error:i.employeesNumber&&!!o.employeesNumber,helperText:i.employeesNumber&&o.employeesNumber,onChange:l,disabled:s}),r.jsx(n,{fullWidth:!0,name:"branchesNumber",label:"No. Sucursales",type:"number",inputProps:{inputMode:"numeric",min:"1"},value:a.branchesNumber,error:i.branchesNumber&&!!o.branchesNumber,helperText:i.branchesNumber&&o.branchesNumber,onChange:l,disabled:s})]}),r.jsxs(x,{direction:{xs:"column",md:"row"},spacing:3,children:[r.jsx(n,{fullWidth:!0,name:"tpvsNumber",label:"No. Terminales TPV's",type:"number",inputProps:{inputMode:"numeric",min:"1"},value:a.tpvsNumber,error:i.tpvsNumber&&!!o.tpvsNumber,helperText:i.tpvsNumber&&o.tpvsNumber,onChange:l,disabled:s}),q&&r.jsx(n,{fullWidth:!0,name:"cardsNumber",label:"No. de Tarjetas",type:"number",inputProps:{inputMode:"numeric",min:"1"},value:a.cardsNumber,error:i.cardsNumber&&!!o.cardsNumber,helperText:i.cardsNumber&&o.cardsNumber,onChange:l,disabled:s})]}),q&&r.jsx(n,{...y("cardsUse"),value:a==null?void 0:a.cardsUse,disabled:g,fullWidth:!0,select:!0,label:"Uso de las tarjetas viabo",placeholder:"Seleccionar",SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},error:i.cardsUse&&!!o.cardsUse,helperText:i.cardsUse&&o.cardsUse,sx:{textTransform:"capitalize"},children:ee.map(p=>r.jsx(H,{value:p,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"uppercase"},children:p},p))}),r.jsx(E,{control:r.jsx(R,{...y("apiRequired"),disabled:s,checked:a==null?void 0:a.apiRequired,value:a==null?void 0:a.apiRequired}),label:"¿Se requiere API para ligas de cobro? (Pagos a distancia sin tarjeta física, protegido con 3D secure)"}),q&&r.jsx(E,{control:r.jsx(R,{...y("customCardsRequired"),disabled:s,checked:a==null?void 0:a.customCardsRequired,value:a==null?void 0:a.customCardsRequired}),label:"¿Desea que las tarjetas fisicas esten personalizadas? (Grabadas)"}),r.jsx(Q,{loading:s,color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{textTransform:"uppercase"},children:"Guardar"})]})})]})}export{ie as default};
//# sourceMappingURL=CommerceInfo-Dbax1sei.js.map
