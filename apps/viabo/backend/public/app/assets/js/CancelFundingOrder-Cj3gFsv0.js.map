{"version":3,"file":"CancelFundingOrder-Cj3gFsv0.js","sources":["../../../../../frontend/src/app/business/funding-orders/hooks/useCancelFundingOrder.js","../../../../../frontend/src/app/business/funding-orders/components/CancelFundingOrder.jsx"],"sourcesContent":["import { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { FUNDING_ORDERS_KEYS } from '../adapters'\r\nimport { cancelFundingOrder } from '../services'\r\n\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\nimport { isFunction } from '@/shared/utils'\r\n\r\nexport const useCancelFundingOrder = (options = {}) => {\r\n  const client = useQueryClient()\r\n  const cancelOrder = useMutation(cancelFundingOrder, options)\r\n  const cancel = async (formData, options = {}) => {\r\n    const { onSuccess, onError, mutationOptions } = options\r\n\r\n    try {\r\n      await toast.promise(cancelOrder.mutateAsync(formData, mutationOptions), {\r\n        pending: 'Cancelando orden de fondeo ...',\r\n        success: {\r\n          render({ data }) {\r\n            client.invalidateQueries([FUNDING_ORDERS_KEYS.LIST])\r\n            isFunction(onSuccess) && onSuccess(data)\r\n            return 'Se canceló la orden de fondeo con éxito'\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      const errorFormatted = getErrorAPI(\r\n        error,\r\n        `No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas`\r\n      )\r\n      isFunction(onError) && onError(errorFormatted)\r\n      toast.error(errorFormatted, {\r\n        type: getNotificationTypeByErrorCode(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...cancelOrder,\r\n    mutate: cancel\r\n  }\r\n}\r\n","import { WarningAmberOutlined } from '@mui/icons-material'\r\nimport { Stack, Typography } from '@mui/material'\r\n\r\nimport { useCancelFundingOrder } from '../hooks'\r\nimport { useFundingOrderStore } from '../store'\r\n\r\nimport { ModalAlert } from '@/shared/components/modals'\r\n\r\nconst CancelFundingOrder = () => {\r\n  const setFundingOrder = useFundingOrderStore(state => state.setFundingOrder)\r\n  const fundingOrder = useFundingOrderStore(state => state.fundingOrder)\r\n  const setOpenCancelFundingOrder = useFundingOrderStore(state => state.setOpenCancelFundingOrder)\r\n  const openCancelFundingOrder = useFundingOrderStore(state => state.openCancelFundingOrder)\r\n\r\n  const { mutate, isLoading } = useCancelFundingOrder()\r\n\r\n  const handleClose = () => {\r\n    setOpenCancelFundingOrder(false)\r\n    setFundingOrder(null)\r\n  }\r\n\r\n  const handleSuccess = () => {\r\n    handleClose()\r\n    mutate({ id: fundingOrder?.id })\r\n  }\r\n\r\n  return (\r\n    <ModalAlert\r\n      title=\"Cancelar Orden de Fondeo\"\r\n      typeAlert=\"warning\"\r\n      textButtonSuccess=\"Si, estoy de acuerdo\"\r\n      onClose={handleClose}\r\n      open={openCancelFundingOrder}\r\n      isSubmitting={isLoading}\r\n      description={\r\n        <Stack spacing={2}>\r\n          <Stack direction={'row'} alignItems={'center'} spacing={1}>\r\n            <WarningAmberOutlined />\r\n            <Typography>¿Está seguro de cancelar esta orden de fondeo?</Typography>\r\n          </Stack>\r\n        </Stack>\r\n      }\r\n      onSuccess={handleSuccess}\r\n      fullWidth\r\n      maxWidth=\"xs\"\r\n    />\r\n  )\r\n}\r\n\r\nexport default CancelFundingOrder\r\n"],"names":["useCancelFundingOrder","options","client","useQueryClient","cancelOrder","useMutation","cancelFundingOrder","formData","onSuccess","onError","mutationOptions","toast","data","FUNDING_ORDERS_KEYS","isFunction","error","errorFormatted","getErrorAPI","getNotificationTypeByErrorCode","CancelFundingOrder","setFundingOrder","useFundingOrderStore","state","fundingOrder","setOpenCancelFundingOrder","openCancelFundingOrder","mutate","isLoading","handleClose","handleSuccess","id","jsx","ModalAlert","Stack","jsxs","WarningAmberOutlined","Typography"],"mappings":"y7BASO,MAAMA,EAAwB,CAACC,EAAU,KAAO,CACrD,MAAMC,EAASC,EAAgB,EACzBC,EAAcC,EAAYC,EAAoBL,CAAO,EA2B3D,MAAO,CACL,GAAGG,EACH,OA5Ba,MAAOG,EAAUN,EAAU,CAAA,IAAO,CAC/C,KAAM,CAAE,UAAAO,EAAW,QAAAC,EAAS,gBAAAC,CAAiB,EAAGT,EAEhD,GAAI,CACF,MAAMU,EAAM,QAAQP,EAAY,YAAYG,EAAUG,CAAe,EAAG,CACtE,QAAS,iCACT,QAAS,CACP,OAAO,CAAE,KAAAE,GAAQ,CACf,OAAAV,EAAO,kBAAkB,CAACW,EAAoB,IAAI,CAAC,EACnDC,EAAWN,CAAS,GAAKA,EAAUI,CAAI,EAChC,yCACR,CACF,CACT,CAAO,CACF,OAAQG,EAAO,CACd,MAAMC,EAAiBC,EACrBF,EACA,8FACD,EACDD,EAAWL,CAAO,GAAKA,EAAQO,CAAc,EAC7CL,EAAM,MAAMK,EAAgB,CAC1B,KAAME,EAA+BH,CAAK,CAClD,CAAO,CACF,CACF,CAKA,CACH,EClCMI,EAAqBA,IAAM,CAC/B,MAAMC,EAAkBC,EAA8BC,GAAAA,EAAMF,eAAe,EACrEG,EAAeF,EAA8BC,GAAAA,EAAMC,YAAY,EAC/DC,EAA4BH,EAA8BC,GAAAA,EAAME,yBAAyB,EACzFC,EAAyBJ,EAA8BC,GAAAA,EAAMG,sBAAsB,EAEnF,CAAEC,OAAAA,EAAQC,UAAAA,GAAc3B,EAAsB,EAE9C4B,EAAcA,IAAM,CACxBJ,EAA0B,EAAK,EAC/BJ,EAAgB,IAAI,CAAA,EAGhBS,EAAgBA,IAAM,CACdD,IACLF,EAAA,CAAEI,GAAIP,GAAAA,YAAAA,EAAcO,EAAAA,CAAI,CAAA,EAI/B,OAAAC,EAAAA,IAACC,EACC,CAAA,MAAM,2BACN,UAAU,UACV,kBAAkB,uBAClB,QAASJ,EACT,KAAMH,EACN,aAAcE,EACd,YACEI,EAAA,IAACE,EAAM,CAAA,QAAS,EACd,SAAAC,EAAAA,KAACD,EAAM,CAAA,UAAW,MAAO,WAAY,SAAU,QAAS,EACtD,SAAA,CAAAF,EAAA,IAACI,EAAuB,EAAA,EACxBJ,EAAAA,IAACK,GAAW,SAA8C,gDAAA,CAAA,CAAA,EAC5D,EACF,EAEF,UAAWP,EACX,UAAS,GACT,SAAS,IACT,CAAA,CAEN"}