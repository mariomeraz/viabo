{"version":3,"file":"PaymentSidebar-ClZiyJ8j.js","sources":["../../../../../frontend/src/app/business/viabo-card/cards/components/send-payment/PaymentForm.jsx","../../../../../frontend/src/shared/assets/img/qr-code.png","../../../../../frontend/src/app/business/viabo-card/cards/components/send-payment/PaymentSidebar.jsx"],"sourcesContent":["import { useEffect } from 'react'\r\n\r\nimport { Send } from '@mui/icons-material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { InputAdornment, Stack, Typography } from '@mui/material'\r\nimport { useFormik } from 'formik'\r\n\r\nimport { FormProvider, RFTextField } from '@/shared/components/form'\r\nimport { Scrollbar } from '@/shared/components/scroll'\r\n\r\nconst MIN_AMOUNT = 0\r\nconst MAX_AMOUNT = 2000\r\nconst STEP = 100\r\n\r\nexport function PaymentForm({ balance, setCurrentBalance, insufficient, setShowQR }) {\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      amount: ''\r\n    },\r\n    onSubmit: values => {\r\n      setTimeout(() => {\r\n        setShowQR(true)\r\n      }, 3000)\r\n    }\r\n  })\r\n\r\n  const { isSubmitting, values } = formik\r\n\r\n  const { amount } = values\r\n\r\n  useEffect(() => {\r\n    const value = amount === '' ? 0 : amount\r\n    setCurrentBalance(parseFloat(balance) - parseFloat(value))\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [amount])\r\n\r\n  return (\r\n    <Scrollbar containerProps={{ sx: { flexGrow: 0, height: 'auto' } }}>\r\n      <FormProvider formik={formik}>\r\n        <Stack spacing={3} sx={{ p: 3 }}>\r\n          <Typography variant=\"overline\" sx={{ color: 'text.secondary' }}>\r\n            Ingresa La Cantidad (Máximo ${MAX_AMOUNT}.00)\r\n          </Typography>\r\n          <Stack flexDirection={'row'} gap={1} alignItems={'center'} justifyContent={'center'}>\r\n            <RFTextField\r\n              fullWidth\r\n              placeholder={'0.00'}\r\n              name={'amount'}\r\n              type={'number'}\r\n              InputLabelProps={{\r\n                shrink: true\r\n              }}\r\n              InputProps={{\r\n                startAdornment: <span style={{ marginRight: '5px' }}>$</span>,\r\n                endAdornment: <InputAdornment position=\"end\">MXN</InputAdornment>\r\n              }}\r\n              inputProps={{ inputMode: 'numeric', step: 'any', min: MIN_AMOUNT }}\r\n            />\r\n          </Stack>\r\n\r\n          <Stack>\r\n            <LoadingButton\r\n              loading={isSubmitting}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={amount <= 0 || insufficient}\r\n              fullWidth\r\n              type=\"submit\"\r\n              startIcon={<Send />}\r\n            >\r\n              Enviar\r\n            </LoadingButton>\r\n          </Stack>\r\n        </Stack>\r\n      </FormProvider>\r\n    </Scrollbar>\r\n  )\r\n}\r\n","export default \"__VITE_ASSET__CMWOJCHq__\"","import { useEffect, useMemo, useState } from 'react'\r\n\r\nimport { CheckCircle } from '@mui/icons-material'\r\nimport { Stack, Typography } from '@mui/material'\r\nimport { format } from 'date-fns'\r\nimport { es } from 'date-fns/locale'\r\n\r\nimport { PaymentForm } from '@/app/business/viabo-card/cards/components/send-payment/PaymentForm'\r\nimport { useCommerceDetailsCard } from '@/app/business/viabo-card/cards/store'\r\nimport { RightPanel } from '@/app/shared/components'\r\nimport QRExample from '@/shared/assets/img/qr-code.png'\r\nimport { Image } from '@/shared/components/images'\r\nimport { Scrollbar } from '@/shared/components/scroll'\r\nimport { fCurrency } from '@/shared/utils'\r\n\r\nexport default function PaymentSidebar({ open, setOpen }) {\r\n  const card = useCommerceDetailsCard(state => state.card)\r\n\r\n  const [currentBalance, setCurrentBalance] = useState(card?.balance)\r\n  const [showQR, setShowQR] = useState(true)\r\n\r\n  const insufficient = useMemo(() => Boolean(currentBalance < 0), [currentBalance])\r\n  const handleClose = () => {\r\n    setOpen(false)\r\n    setShowQR(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setCurrentBalance(card?.balance)\r\n    setShowQR(false)\r\n  }, [card?.balance])\r\n\r\n  return (\r\n    <RightPanel open={open} handleClose={handleClose} title={'Enviar Pago'}>\r\n      {showQR ? (\r\n        <Scrollbar>\r\n          <Stack flexDirection=\"column\" alignItems={'center'} justifyContent={'space-between'} spacing={2} p={5}>\r\n            <Stack flexDirection=\"column\" alignItems={'center'} spacing={2}>\r\n              <Typography variant=\"subtitle1\">Transferencia Exitosa</Typography>\r\n              <CheckCircle sx={{ width: 40, height: 40 }} color={'success'} />\r\n            </Stack>\r\n            <Stack flexDirection=\"column\" alignItems={'center'} justifyContent={'space-between'} spacing={0}>\r\n              <Typography variant=\"subtitle2\">Importe</Typography>\r\n              <Stack direction={'row'} spacing={2} alignItems={'center'}>\r\n                <Typography variant=\"h3\">{fCurrency(100)}</Typography>\r\n                <Typography variant=\"caption\">MXN</Typography>\r\n              </Stack>\r\n            </Stack>\r\n            <Image src={QRExample} sx={{ width: 250 }} />\r\n            <Typography variant=\"caption\" color={'text.disabled'}>\r\n              {format(new Date(), 'dd MMM yyyy hh:mm a', { locale: es })}\r\n            </Typography>\r\n          </Stack>\r\n        </Scrollbar>\r\n      ) : (\r\n        <>\r\n          <Stack\r\n            flexDirection=\"column\"\r\n            alignItems={'center'}\r\n            justifyContent={'space-between'}\r\n            spacing={0}\r\n            px={3}\r\n            pt={3}\r\n            pb={0}\r\n          >\r\n            <Typography variant=\"subtitle1\">Saldo</Typography>\r\n            <Stack direction={'row'} spacing={2} alignItems={'center'}>\r\n              <Typography variant=\"h3\" color={insufficient ? 'error' : 'success.main'}>\r\n                {fCurrency(currentBalance)}\r\n              </Typography>\r\n              <Typography variant=\"caption\" color={insufficient ? 'error' : 'success.main'}>\r\n                MXN\r\n              </Typography>\r\n            </Stack>\r\n            {insufficient && (\r\n              <Typography variant=\"caption\" color={'warning.main'} textAlign={'center'}>\r\n                No cuenta con suficiente saldo para realizar la operación\r\n              </Typography>\r\n            )}\r\n          </Stack>\r\n          <PaymentForm\r\n            balance={card?.balance}\r\n            insufficient={insufficient}\r\n            setCurrentBalance={setCurrentBalance}\r\n            setShowQR={setShowQR}\r\n          />\r\n        </>\r\n      )}\r\n    </RightPanel>\r\n  )\r\n}\r\n"],"names":["MIN_AMOUNT","MAX_AMOUNT","PaymentForm","balance","setCurrentBalance","insufficient","setShowQR","formik","useFormik","initialValues","amount","onSubmit","values","setTimeout","isSubmitting","useEffect","value","parseFloat","jsx","Scrollbar","sx","flexGrow","height","FormProvider","Stack","p","jsxs","Typography","color","RFTextField","shrink","startAdornment","marginRight","endAdornment","InputAdornment","inputMode","step","min","LoadingButton","Send","QRExample","PaymentSidebar","open","setOpen","card","useCommerceDetailsCard","state","currentBalance","useState","showQR","useMemo","handleClose","RightPanel","CheckCircle","width","fCurrency","Image","format","Date","locale","es","Fragment"],"mappings":"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"}