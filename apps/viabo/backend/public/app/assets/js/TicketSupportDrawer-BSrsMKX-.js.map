{"version":3,"mappings":"gOAAO,MAAMA,EAA0B,CACrC,kBAAmB,mCACrB,ECFaC,EAA+BC,IAC1CA,GAAA,YAAAA,EAAQ,IAAIC,GAAU,gBACpB,GAAIA,GAAA,YAAAA,EAAO,GACX,MAAOA,GAAA,YAAAA,EAAO,KACd,QAAOC,EAAAD,GAAA,YAAAA,EAAO,QAAP,YAAAC,EAAc,UAAW,GAAK,MAAOC,EAAAF,GAAA,YAAAA,EAAO,QAAP,YAAAE,EAAc,MAC3D,MAAM,GCDIC,EAAmB,MAAMC,GAAU,CAC9C,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,KAAK,0BAA2BF,CAAM,EACnE,OAAOC,CACT,EAEaE,EAA2B,SAAY,CAClD,KAAM,CAAE,KAAAF,CAAM,EAAG,MAAMC,EAAM,IAAI,gDAAgD,EACjF,OAAOR,EAA6BO,CAAI,CAC1C,ECFaG,EAA+B,CAACC,EAAU,KAAO,CAC5D,KAAM,CAACC,EAAaC,CAAc,EAAIC,WAAS,IAAI,EAE7CC,EAAQC,EAAS,CACrB,SAAU,CAACjB,EAAwB,iBAAiB,EACpD,QAASU,EACT,qBAAsB,GACtB,MAAO,GACP,UAAW,IACX,GAAGE,CACP,CAAG,EAEDM,mBAAU,IAAM,CACd,GAAIF,GAAA,MAAAA,EAAO,QAAS,CAClB,MAAMG,EAAeC,EACnBJ,EAAM,MACN,qFACD,EACDF,EAAeK,CAAY,EAC3BE,EAAM,MAAMF,EAAc,CACxB,KAAMG,EAA+BN,EAAM,KAAK,CACxD,CAAO,CACF,CACF,EAAE,CAACA,EAAM,QAASA,EAAM,KAAK,CAAC,EAExB,CACL,GAAGA,EACH,MAAOH,GAAe,IACvB,CACH,ECxBMU,EAAoBC,EAAQC,OAAK,UAAM,OAAO,iCAAqB,2DAAC,CAAC,EAErEC,EAAsBA,CAAC,CAAEC,OAAMC,SAAQ,IAAM,CAC3C,MAAEpB,KAAMN,EAAQ2B,YAAWC,UAASC,QAAOC,WAAYrB,EAA6B,CAAEsB,QAAS,GAAO,EAE5Gf,YAAU,IAAM,CACVS,GACMK,GACV,EACC,CAACL,CAAI,CAAC,EAET,MAAMO,EAAcA,IAAM,CACxBN,EAAQ,EAAK,GAGf,aACGO,EACC,MAAAR,EACA,YAAAO,EACA,mBACGE,EACC,UAAAC,MAACC,EAAW,SAAS,KAAO,SAA0B,4BACxD,EAGF,SAAAD,EAAA,IAACE,GAAU,eAAgB,CAAEC,GAAI,CAAEC,SAAU,EAAGC,OAAQ,MAAO,GAC7D,SAACC,EAAA,KAAAP,EAAA,CAAM,QAAS,EAAG,EAAG,EACnBP,mBAAce,MACdd,GAAW,CAACD,GACXQ,MAACQ,EAAiB,cAAcd,EAAO,aAAc,kBAAmB,aAAc,IAAMC,MAE7F,CAACF,GAAW,CAACD,GAAaF,IAAQzB,iBAAQ4C,UAAW,GACpDT,EAAA,IAACU,EACC,SAAS,qFAAsF,GAGlG,CAACjB,GAAW,CAACD,GAAaF,IAAQzB,iBAAQ4C,QAAS,GACjDT,MAAAd,EAAA,CAAkB,OAAArB,EAAgB,UAAWgC,KAElD,EACF,CACF,EAEJ,EAEAR,EAAoBsB,UAAY,CAC9BrB,KAAMsB,EAAUC,IAChBtB,QAASqB,EAAUE,IACrB","names":["NEW_TICKET_SUPPORT_KEYS","TicketCausesByProfileAdapter","causes","cause","_a","_b","newTicketSupport","ticket","data","axios","getTicketCausesByProfile","useFindTicketCausesByProfile","options","customError","setCustomError","useState","query","useQuery","useEffect","errorMessage","getErrorAPI","toast","getNotificationTypeByErrorCode","TicketSupportForm","Lodable","lazy","TicketSupportDrawer","open","setOpen","isLoading","isError","error","refetch","enabled","handleClose","RightPanel","Stack","jsx","Typography","Scrollbar","sx","flexGrow","height","jsxs","RequestLoadingComponent","ErrorRequestPage","length","EmptyList","propTypes","PropTypes","any","func"],"sources":["../../../../../frontend/src/app/support/new-ticket-support/adapters/new-ticket-support-keys.js","../../../../../frontend/src/app/support/new-ticket-support/adapters/ticket-causes-by-profile-adapter.js","../../../../../frontend/src/app/support/new-ticket-support/services/NewTicketSupportRepository.js","../../../../../frontend/src/app/support/new-ticket-support/hooks/useFindTicketCausesByProfile.js","../../../../../frontend/src/app/support/new-ticket-support/components/TicketSupportDrawer.jsx"],"sourcesContent":["export const NEW_TICKET_SUPPORT_KEYS = {\r\n  CAUSES_BY_PROFILE: 'new-ticket-causes-list-by-profile'\r\n}\r\n","export const TicketCausesByProfileAdapter = causes =>\r\n  causes?.map(cause => ({\r\n    id: cause?.id,\r\n    cause: cause?.name,\r\n    color: cause?.color?.trim() === '' ? null : cause?.color?.trim()\r\n  })) || []\r\n","import { TicketCausesByProfileAdapter } from '../adapters'\r\n\r\nimport { axios } from '@/shared/interceptors'\r\n\r\nexport const newTicketSupport = async ticket => {\r\n  const { data } = await axios.post('/api/tickets/ticket/new', ticket)\r\n  return data\r\n}\r\n\r\nexport const getTicketCausesByProfile = async () => {\r\n  const { data } = await axios.get('/api/tickets/applicant-profile/support-reasons')\r\n  return TicketCausesByProfileAdapter(data)\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { NEW_TICKET_SUPPORT_KEYS } from '../adapters'\r\nimport { getTicketCausesByProfile } from '../services'\r\n\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\n\r\nexport const useFindTicketCausesByProfile = (options = {}) => {\r\n  const [customError, setCustomError] = useState(null)\r\n\r\n  const query = useQuery({\r\n    queryKey: [NEW_TICKET_SUPPORT_KEYS.CAUSES_BY_PROFILE],\r\n    queryFn: getTicketCausesByProfile,\r\n    refetchOnWindowFocus: false,\r\n    retry: false,\r\n    staleTime: 300000,\r\n    ...options\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (query?.isError) {\r\n      const errorMessage = getErrorAPI(\r\n        query.error,\r\n        'No se puede obtener la lista de las causas. Intente nuevamente o reporte a sistemas'\r\n      )\r\n      setCustomError(errorMessage)\r\n      toast.error(errorMessage, {\r\n        type: getNotificationTypeByErrorCode(query.error)\r\n      })\r\n    }\r\n  }, [query.isError, query.error])\r\n\r\n  return {\r\n    ...query,\r\n    error: customError || null\r\n  }\r\n}\r\n","import { lazy, useEffect } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Stack, Typography } from '@mui/material'\r\n\r\nimport { useFindTicketCausesByProfile } from '../hooks'\r\n\r\nimport { RightPanel } from '@/app/shared/components'\r\nimport { RequestLoadingComponent } from '@/shared/components/loadings'\r\nimport { Lodable } from '@/shared/components/lodables'\r\nimport { ErrorRequestPage } from '@/shared/components/notifications'\r\nimport EmptyList from '@/shared/components/notifications/EmptyList'\r\nimport { Scrollbar } from '@/shared/components/scroll'\r\n\r\nconst TicketSupportForm = Lodable(lazy(() => import('./TicketSupportForm')))\r\n\r\nconst TicketSupportDrawer = ({ open, setOpen }) => {\r\n  const { data: causes, isLoading, isError, error, refetch } = useFindTicketCausesByProfile({ enabled: false })\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      refetch()\r\n    }\r\n  }, [open])\r\n\r\n  const handleClose = () => {\r\n    setOpen(false)\r\n  }\r\n\r\n  return (\r\n    <RightPanel\r\n      open={open}\r\n      handleClose={handleClose}\r\n      titleElement={\r\n        <Stack>\r\n          <Typography variant={'h6'}>{'Nuevo Ticket de Soporte'}</Typography>\r\n        </Stack>\r\n      }\r\n    >\r\n      <Scrollbar containerProps={{ sx: { flexGrow: 0, height: 'auto' } }}>\r\n        <Stack spacing={3} p={3}>\r\n          {isLoading && <RequestLoadingComponent />}\r\n          {isError && !isLoading && (\r\n            <ErrorRequestPage errorMessage={error} titleMessage={'Lista de Causas'} handleButton={() => refetch()} />\r\n          )}\r\n          {!isError && !isLoading && open && causes?.length === 0 && (\r\n            <EmptyList\r\n              message={'Por el momento no se puede generar un ticket de soporte , No tiene causas asignadas'}\r\n            />\r\n          )}\r\n          {!isError && !isLoading && open && causes?.length > 0 && (\r\n            <TicketSupportForm causes={causes} onSuccess={handleClose} />\r\n          )}\r\n        </Stack>\r\n      </Scrollbar>\r\n    </RightPanel>\r\n  )\r\n}\r\n\r\nTicketSupportDrawer.propTypes = {\r\n  open: PropTypes.any,\r\n  setOpen: PropTypes.func\r\n}\r\n\r\nexport default TicketSupportDrawer\r\n"],"file":"assets/js/TicketSupportDrawer-BSrsMKX-.js"}