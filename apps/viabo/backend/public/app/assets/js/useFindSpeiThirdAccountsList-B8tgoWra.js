import{r as t,e as S,U as T}from"./vendor-5lkxkETF.js";import{a as p,g as A,b as f}from"./index-DkbAsBWZ.js";import{c as m}from"./matchTypes-mENztEWg.js";const y=r=>{const i=(r==null?void 0:r.map(e=>({id:e==null?void 0:e.id,stpCode:e==null?void 0:e.code,name:`${e==null?void 0:e.shortName} - ${e==null?void 0:e.code}`,commercialName:e==null?void 0:e.name,status:(e==null?void 0:e.active)==="1"})))||[];return m(i,"id","name","status")},C={THIRD_ACCOUNTS_LIST:"spei-third-accounts-list",BANKS_LIST:"spei-banks-list"},E=r=>{const i=(r==null?void 0:r.map(e=>{var s,d,l;return{id:e==null?void 0:e.id,name:e!=null&&e.alias&&((s=e==null?void 0:e.alias)==null?void 0:s.trim())!==""?e==null?void 0:e.alias:e==null?void 0:e.beneficiary,beneficiary:e==null?void 0:e.beneficiary,alias:e==null?void 0:e.alias,clabe:e==null?void 0:e.interbankCLABE,clabeHidden:`${(l=(d=e==null?void 0:e.interbankCLABE)==null?void 0:d.replace(/.(?=.{4})/g,"*"))==null?void 0:l.slice(-8)}`,email:e==null?void 0:e.email,phone:e==null?void 0:e.phone,bank:{name:e==null?void 0:e.shorNameBank,id:e==null?void 0:e.bankId},status:(e==null?void 0:e.active)==="1",date:e==null?void 0:e.date,rfc:e==null?void 0:e.rfc}}))||[];return m(i,"id","name","status")},g=async()=>{const{data:r}=await p.get("/api/spei/external-accounts");return E(r)},B=async r=>{const{data:i}=await p.post("/api/spei/external-account/new",r);return i},L=async()=>{const{data:r}=await p.get("/api/spei/banks");return y(r)},_=async r=>{const{data:i}=await p.put("/api/spei/external-account/disable",r);return i},w=(r={})=>{const[i,e]=t.useState(null),s=S({queryKey:[C.THIRD_ACCOUNTS_LIST],queryFn:g,refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...r});return t.useEffect(()=>{if(s!=null&&s.isError){const d=A(s.error,"No se puede obtener la lista de cuentas de terceros. Intente nuevamente o reporte a sistemas");e(d),T.error(d,{type:f(s.error)})}},[s.isError,s.error]),{...s,error:i||null}};export{C as S,_ as d,L as g,B as n,w as u};
//# sourceMappingURL=useFindSpeiThirdAccountsList-B8tgoWra.js.map
