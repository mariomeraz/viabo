import{c as E,f as F,U as y,i as r,S as s,T as o,B as v,aT as S,dj as I,dn as P,dk as u,Q as z,P as a}from"./vendor-5lkxkETF.js";import{u as R}from"./formik.esm-CTTSENmf.js";import{c as C,a as d}from"./index.esm-gIIytEq8.js";import{g as L,b as N}from"./index-DkbAsBWZ.js";import{i as A}from"./matchTypes-mENztEWg.js";import{n as q,S as k}from"./useFindSpeiThirdAccountsList-B8tgoWra.js";import{F as w,R as m}from"./TextMaxLine-B63DtfW-.js";import{R as B}from"./RFSelect-DSsw7uR8.js";import"./formatTime-jCgU2sMR.js";import"./UploadSingleFile-ByYCreVQ.js";import"./fade-CViozI82.js";import"./transition-anLY3gj9.js";import"./formatNumber-dGNhWwxT.js";const M=e=>{var l,t,h,p,x,n;return{interbankCLABE:e==null?void 0:e.clabe,beneficiary:(l=e==null?void 0:e.name)==null?void 0:l.trim(),rfc:((t=e==null?void 0:e.rfc)==null?void 0:t.trim())||"",alias:((h=e==null?void 0:e.alias)==null?void 0:h.trim())||"",bankId:(p=e==null?void 0:e.bank)==null?void 0:p.value,email:((x=e==null?void 0:e.email)==null?void 0:x.trim())||"",phone:((n=e==null?void 0:e.phone)==null?void 0:n.trim())||"",googleAuthenticatorCode:(e==null?void 0:e.googleCode.toString())||""}},V=(e={})=>{const l=E(),t=F(q,e);return{...t,mutate:async(p,x)=>{const{onSuccess:n,onError:f,mutationOptions:c}=x;try{await y.promise(t.mutateAsync(p,c),{pending:"Agregando Cuenta ...",success:{render({data:g}){return l.invalidateQueries([k.THIRD_ACCOUNTS_LIST]),A(n)&&n(g),"Se agrego la cuenta con éxito"}}})}catch(g){const i=L(g,"No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas");A(f)&&f(i),y.error(i,{type:N(g)})}}}},_=({account:e,catalogBanks:l,onSuccess:t})=>{const{mutate:h,isLoading:p}=V(),x=C().shape({clabe:d().trim().max(18,"Máximo 18 caracteres").matches(/^\S{18}$/,"La clabe debe contener 18 caracteres y no puede contener espacios en blanco").required("Es necesario la clabe"),name:d().trim().max(100,"Máximo 100 caracteres").required("Es necesario el beneficiario"),rfc:d(),alias:d().trim().max(100,"Máximo 100 caracteres"),bank:C().nullable().required("Es necesario el banco"),email:d().trim().email("Ingrese un correo valido"),phone:d().trim(),googleCode:d().trim().min(6,"Es necesario el código de 6 dígitos").required("Es necesario el código de 6 dígitos")}),n=R({initialValues:{clabe:(e==null?void 0:e.clabe)||"",name:(e==null?void 0:e.beneficiary)||"",alias:(e==null?void 0:e.alias)||"",rfc:(e==null?void 0:e.rfc)||"",bank:(l==null?void 0:l.find(b=>{var j;return(b==null?void 0:b.id)===((j=e==null?void 0:e.bank)==null?void 0:j.id)}))||null,email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",googleCode:""},enableReinitialize:!0,validationSchema:x,onSubmit:(b,{setSubmitting:j,setFieldValue:O})=>{const T=M(b);h(T,{onSuccess:()=>{j(!1),t()},onError:()=>{j(!1)}})}}),{isSubmitting:f,setFieldValue:c,values:g}=n,i=f||p;return r.jsx(w,{formik:n,children:r.jsxs(s,{spacing:2,children:[r.jsxs(s,{spacing:1,children:[r.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Cuenta CLABE",r.jsx(v,{component:"span",color:"error.main",ml:.5,children:"*"})]}),r.jsx(m,{inputProps:{maxLength:"18"},required:!0,name:"clabe",size:"small",disabled:i,placeholder:"Clabe..."})]}),r.jsxs(s,{spacing:1,children:[r.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Beneficiario",r.jsx(v,{component:"span",color:"error.main",ml:.5,children:"*"})]}),r.jsx(m,{required:!0,name:"name",size:"small",placeholder:"Nombre del titular de la cuenta...",disabled:i})]}),r.jsxs(s,{spacing:1,children:[r.jsx(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"RFC"}),r.jsx(m,{name:"rfc",size:"small",placeholder:"RFC del beneficiario...",disabled:i})]}),r.jsxs(s,{spacing:1,children:[r.jsx(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Alias"}),r.jsx(m,{name:"alias",size:"small",placeholder:"Alias de la cuenta...",disabled:i})]}),r.jsxs(s,{spacing:1,children:[r.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Banco",r.jsx(v,{component:"span",color:"error.main",ml:.5,children:"*"})]}),r.jsx(B,{name:"bank",textFieldParams:{placeholder:"Seleccionar ...",required:!0,size:"small"},options:l||[],disabled:i})]}),r.jsxs(s,{flexDirection:{md:"row"},gap:2,children:[r.jsxs(s,{spacing:1,flex:1,children:[r.jsx(o,{type:"email",paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Correo"}),r.jsx(m,{name:"email",size:"small",placeholder:"beneficiario@domino.com...",InputProps:{startAdornment:r.jsx(S,{position:"start",children:r.jsx(I,{})})},disabled:i})]}),r.jsxs(s,{spacing:1,children:[r.jsx(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Teléfono"}),r.jsx(m,{name:"phone",type:"tel",size:"small",placeholder:"55 5555 5555",InputProps:{startAdornment:r.jsx(S,{position:"start",children:r.jsx(P,{})})},disabled:i})]})]}),r.jsxs(s,{spacing:1,children:[r.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Token de Google"," ",r.jsx(v,{component:"span",color:"error.main",children:"*"})]}),r.jsx(m,{name:"googleCode",type:"number",size:"small",placeholder:"000000",inputProps:{maxLength:"6",inputMode:"numeric",min:"1"},InputProps:{startAdornment:r.jsx(S,{position:"start",children:r.jsx(u,{})})},disabled:i})]}),r.jsx(s,{sx:{pt:1},children:r.jsx(z,{size:"large",loading:i,variant:"contained",color:"primary",fullWidth:!0,type:"submit",children:"Crear"})})]})})};_.propTypes={account:a.shape({alias:a.string,bank:a.shape({id:a.any}),beneficiary:a.string,clabe:a.string,email:a.string,phone:a.string,rfc:a.string}),catalogBanks:a.array,onSuccess:a.func};export{_ as default};
//# sourceMappingURL=NewSpeiThirdAccountForm-B4ilN3WD.js.map
