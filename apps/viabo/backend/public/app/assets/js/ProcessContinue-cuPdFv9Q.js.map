{"version":3,"file":"ProcessContinue-cuPdFv9Q.js","sources":["../../../../../frontend/src/shared/assets/img/forms_steps.svg","../../../../../frontend/src/app/business/commerce/components/process/ProcessContinue.jsx"],"sourcesContent":["export default \"__VITE_ASSET__CwKRAXwq__\"","import PropTypes from 'prop-types'\r\n\r\nimport { EmailOutlined } from '@mui/icons-material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { Box, InputAdornment, Stack, TextField, Typography } from '@mui/material'\r\nimport { useFormik } from 'formik'\r\nimport { motion } from 'framer-motion'\r\nimport * as Yup from 'yup'\r\n\r\nimport { useFindCommerceToken } from '@/app/business/commerce/hooks'\r\nimport { PROCESS_LIST } from '@/app/business/commerce/services'\r\nimport { propTypesStore } from '@/app/business/commerce/store'\r\nimport { useSendValidationCode } from '@/app/business/shared/hooks'\r\nimport FormSteps from '@/shared/assets/img/forms_steps.svg'\r\n\r\nProcessContinue.propTypes = {\r\n  store: PropTypes.shape(propTypesStore)\r\n}\r\n\r\nfunction ProcessContinue({ store }) {\r\n  const { setToken, setActualProcess, setLastProcess } = store\r\n  const { mutate: sendValidationCode, isLoading: isSendingCode } = useSendValidationCode()\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: ''\r\n    },\r\n    validationSchema: Yup.object({\r\n      email: Yup.string().email('Ingresa un correo valido').required('El correo es requerido')\r\n    }),\r\n    onSubmit: values => {\r\n      const email = values?.email\r\n      refetch().then(result => {\r\n        const { isError, data } = result\r\n        if (isError) {\r\n          setSubmitting(false)\r\n        } else {\r\n          setToken(data?.token)\r\n          sendValidationCode(\r\n            { email, token: data?.token },\r\n            {\r\n              onSuccess: () => {\r\n                setActualProcess(PROCESS_LIST.VALIDATION_CODE)\r\n                setLastProcess({ info: { email }, name: PROCESS_LIST.CONTINUE_PROCESS })\r\n              },\r\n              onError: () => {\r\n                setSubmitting(false)\r\n              }\r\n            }\r\n          )\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  const {\r\n    handleSubmit,\r\n    values,\r\n    errors,\r\n    touched,\r\n    handleChange,\r\n    isSubmitting,\r\n    setSubmitting,\r\n    getFieldProps,\r\n    setFieldValue\r\n  } = formik\r\n\r\n  const { data, isError, refetch } = useFindCommerceToken(values?.email, {\r\n    enabled: false\r\n  })\r\n\r\n  const loading = isSendingCode || isSubmitting\r\n\r\n  return (\r\n    <>\r\n      <Stack direction=\"column\" width={1} spacing={1}>\r\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.5 }}>\r\n          <Typography variant=\"h4\" color=\"textPrimary\" align=\"center\">\r\n            Continué con el proceso\r\n          </Typography>\r\n          <Typography paragraph align=\"center\" variant=\"body1\" color={'text.secondary'} whiteSpace=\"pre-line\">\r\n            Ingrese el correo electrónico con el que se hizo el registro para poder continuar con su proceso.\r\n          </Typography>\r\n        </motion.div>\r\n      </Stack>\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.5 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        transition={{ duration: 0.5 }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            my: 4\r\n          }}\r\n        >\r\n          <img src={FormSteps} width=\"40%\" alt=\"fill forms\" />\r\n        </Box>\r\n      </motion.div>\r\n      <Box component={'form'} mt={3} onSubmit={handleSubmit}>\r\n        <Stack direction=\"column\" spacing={3}>\r\n          <TextField\r\n            fullWidth\r\n            id=\"email\"\r\n            name=\"email\"\r\n            label=\"Correo\"\r\n            placeholder={'usuario@dominio.com'}\r\n            value={values.email}\r\n            onChange={handleChange}\r\n            error={touched.email && Boolean(errors.email)}\r\n            helperText={touched.email && errors.email}\r\n            disabled={loading}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <EmailOutlined />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n          <LoadingButton\r\n            onClick={handleSubmit}\r\n            loading={loading}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            fullWidth\r\n            type=\"submit\"\r\n            sx={{ textTransform: 'uppercase' }}\r\n          >\r\n            Continuar\r\n          </LoadingButton>\r\n        </Stack>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProcessContinue\r\n"],"names":["FormSteps","ProcessContinue","propTypes","store","PropTypes","shape","propTypesStore","setToken","setActualProcess","setLastProcess","mutate","sendValidationCode","isLoading","isSendingCode","useSendValidationCode","formik","useFormik","initialValues","email","validationSchema","Yup","required","onSubmit","values","refetch","then","result","isError","data","setSubmitting","token","onSuccess","PROCESS_LIST","VALIDATION_CODE","info","name","CONTINUE_PROCESS","onError","handleSubmit","errors","touched","handleChange","isSubmitting","getFieldProps","setFieldValue","useFindCommerceToken","enabled","loading","jsxs","Fragment","jsx","Stack","motion","opacity","y","duration","Typography","scale","Box","display","flexDirection","alignItems","justifyContent","my","TextField","Boolean","startAdornment","InputAdornment","EmailOutlined","LoadingButton","textTransform"],"mappings":"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"}