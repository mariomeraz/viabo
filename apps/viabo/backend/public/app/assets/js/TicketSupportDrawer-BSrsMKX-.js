import{a as d,g as E,b as g,L as y,_ as u,S as T,R as S,E as _,m as P}from"./index-DkbAsBWZ.js";import{r as a,e as h,U as x,i as s,S as p,T as k,P as c}from"./vendor-5lkxkETF.js";import{R as j}from"./RightPanel-DRwW1nHJ.js";const C={CAUSES_BY_PROFILE:"new-ticket-causes-list-by-profile"},R=t=>(t==null?void 0:t.map(e=>{var o,r;return{id:e==null?void 0:e.id,cause:e==null?void 0:e.name,color:((o=e==null?void 0:e.color)==null?void 0:o.trim())===""?null:(r=e==null?void 0:e.color)==null?void 0:r.trim()}}))||[],v=async t=>{const{data:e}=await d.post("/api/tickets/ticket/new",t);return e},b=async()=>{const{data:t}=await d.get("/api/tickets/applicant-profile/support-reasons");return R(t)},w=(t={})=>{const[e,o]=a.useState(null),r=h({queryKey:[C.CAUSES_BY_PROFILE],queryFn:b,refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...t});return a.useEffect(()=>{if(r!=null&&r.isError){const n=E(r.error,"No se puede obtener la lista de las causas. Intente nuevamente o reporte a sistemas");o(n),x.error(n,{type:g(r.error)})}},[r.isError,r.error]),{...r,error:e||null}},L=y(a.lazy(()=>u(()=>import("./TicketSupportForm-lNxetIuk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))),f=({open:t,setOpen:e})=>{const{data:o,isLoading:r,isError:n,error:m,refetch:i}=w({enabled:!1});a.useEffect(()=>{t&&i()},[t]);const l=()=>{e(!1)};return s.jsx(j,{open:t,handleClose:l,titleElement:s.jsx(p,{children:s.jsx(k,{variant:"h6",children:"Nuevo Ticket de Soporte"})}),children:s.jsx(T,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:s.jsxs(p,{spacing:3,p:3,children:[r&&s.jsx(S,{}),n&&!r&&s.jsx(_,{errorMessage:m,titleMessage:"Lista de Causas",handleButton:()=>i()}),!n&&!r&&t&&(o==null?void 0:o.length)===0&&s.jsx(P,{message:"Por el momento no se puede generar un ticket de soporte , No tiene causas asignadas"}),!n&&!r&&t&&(o==null?void 0:o.length)>0&&s.jsx(L,{causes:o,onSuccess:l})]})})})};f.propTypes={open:c.any,setOpen:c.func};const F=Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"}));export{F as T,v as n};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/TicketSupportForm-lNxetIuk.js","assets/js/vendor-5lkxkETF.js","assets/js/formik.esm-CTTSENmf.js","assets/js/index.esm-gIIytEq8.js","assets/js/getColorName-DlaFStQx.js","assets/js/index-DkbAsBWZ.js","assets/css/build-Bl0dWaDY.css","assets/js/matchTypes-mENztEWg.js","assets/js/tickets-support-list-keys-S53qn0fN.js","assets/js/TextMaxLine-B63DtfW-.js","assets/js/formatTime-jCgU2sMR.js","assets/js/UploadSingleFile-ByYCreVQ.js","assets/js/fade-CViozI82.js","assets/js/transition-anLY3gj9.js","assets/js/formatNumber-dGNhWwxT.js","assets/js/RightPanel-DRwW1nHJ.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=TicketSupportDrawer-BSrsMKX-.js.map
