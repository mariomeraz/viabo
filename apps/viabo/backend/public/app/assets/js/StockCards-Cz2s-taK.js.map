{"version":3,"mappings":"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","names":["CardTypesAdapter","cardTypes","dataAdapted","cardType","_a","convertCatalogToReactSelect","SHARED_CARD_KEYS","getCardTypes","data","axios","CardCvv","card","disableShow","showCVV","setShowCVV","useState","onToggleShowCVV","e","stopPropagation","prev","jsxs","Stack","jsx","Typography","mb","typography","opacity","cvv","Box","left","top","IconButton","Visibility","VisibilityOff","StockCardMenu","isReadyToAssign","useAssignCardStore","state","setOpenAssignCards","setOpen","setCard","anchorEl","setAnchorEl","open","Boolean","enqueueSnackbar","useSnackbar","handleClick","event","currentTarget","handleClose","handleAssignCard","variant","autoHideDuration","Fragment","Tooltip","ml","undefined","MoreVertTwoTone","MenuPopover","vertical","horizontal","mt","mr","p","width","px","borderRadius","height","MenuItem","color","AddBusiness","StockCard","CardStyled","CardHeader","register","CardNumber","expiration","CardCVV","StockCardSkeleton","Card","theme","palette","common","white","display","flexDirection","justifyContent","Skeleton","py","CardsList","cards","emptyMessage","cardComponent","others","isDesktop","useResponsive","isCollapse","useCollapseDrawer","page","setPage","searchTerm","setSearchTerm","searchResult","setSearchResult","isLoading","isError","error","isSuccess","isSuccessCards","refetch","cardList","loadingCards","PER_PAGE","source","useMemo","length","count","Math","ceil","_DATA","usePagination","handleChange","jump","useEffect","filterCards","searchByTerm","xs","sm","TextField","target","value","startAdornment","InputAdornment","Search","marginTop","flex","Pagination","EmptyList","ErrorRequestPage","gap","gridTemplateColumns","md","lg","xl","Array","currentData","map","index","createElement","key","AssignCardTableToolbar","handleAssign","marginRight","AssignmentIndRounded","info","main","MANAGEMENT_STOCK_CARDS_KEYS","CreateCardAdapter","cardNumber","assigned","expirationYear","expirationFormatted","cardAdapter","getCryptInfo","AffiliatedCommercesAdapter","commerces","commerce","createNewStockCard","getAffiliatedCommerces","getStockCards","CardsAdapter","assignCards","url","useCreateNewStockCard","options","client","useQueryClient","registerMutation","useMutation","formData","onSuccess","onError","mutationOptions","toast","errorFormatted","getErrorAPI","getNotificationTypeByErrorCode","useFindAffiliatedCommerces","customError","setCustomError","useQuery","errorMessage","useFindStockCards","StockCardForm","registerCard","createCard","isCreatingCard","useGetQueryData","AFFILIATED_COMMERCES_LIST","CARD_TYPES_LIST","openAlertConfirm","setOpenAlertConfirm","CardSchema","Yup","shape","string","transform","originalValue","replace","min","required","nullable","test","date","parse","Date","currentDate","isDateValid","isValid","isAfter","formik","useFormik","initialValues","validationSchema","onSubmit","values","setSubmitting","handleCreateCard","isSubmitting","setFieldValue","errors","handleSubmit","touched","resetForm","loading","isAssigned","Scrollbar","sx","flexGrow","FormProvider","RFSelect","placeholder","RFTextField","CreditCard","inputComponent","MaskedInput","inputProps","mask","onAccept","VpnKey","DatePicker","newValue","format","textField","fullWidth","helperText","pt","LoadingButton","AddCard","ModalAlert","WarningAmberOutlined","StockCardSidebar","themeDirection","useSettings","varSidebar","varFade","distance","NAVBAR","BASE_WIDTH","durationIn","durationOut","inRight","inLeft","body","style","overflow","Backdrop","background","zIndex","drawer","AnimatePresence","RightPanelStyle","pr","pl","Close","Divider","borderStyle","StockCardTable","selectedCard","setSelectedCard","columns","name","label","customBodyRenderLite","dataIndex","rowIndex","rowData","cardNumberHidden","row","Avatar","primary","contrastText","backgroundColor","light","CarnetLogo","MasterCardLogo","filterType","registerDate","registerTime","DataTable","responsive","rowHover","selectableRows","selectableRowsOnClick","selectToolbarPlacement","sortOrder","direction","downloadOptions","filename","filterOptions","useDisplayedColumnsOnly","onRowSelectionChange","currentRowsSelected","allRowsSelected","rowsSelected","find","valor","includes","customToolbarSelect","selectedRows","useFindCardTypes","AssignCardModal","Lodable","lazy","StockCards","affiliatedCommerces","isSuccessCardTypes","isLoadingCardTypes","stockCards","isLoadingStockCards","setReadyToAssign","openAssignCard","view","setView","handleNewCard","handleAssignCards","Page","ContainerPage","HeaderPage","href","PATH_DASHBOARD","root","MANAGEMENT_PATHS","stock_cards","MANAGEMENT_ROUTES_NAMES","Button","AddBusinessTwoTone","Add","ToggleButtonGroup","ToggleButton","FormatListBulleted","Apps"],"sources":["../../../../../frontend/src/app/shared/adapters/cardTypesAdapter.js","../../../../../frontend/src/app/shared/adapters/sharedCardKeys.js","../../../../../frontend/src/app/shared/services/CardsSharedRepository.js","../../../../../frontend/src/app/shared/components/card/CardCVV.jsx","../../../../../frontend/src/app/management/stock-cards/components/stock-card/StockCardMenu.jsx","../../../../../frontend/src/app/management/stock-cards/components/stock-card/StockCard.jsx","../../../../../frontend/src/app/management/stock-cards/components/stock-card/StockCardSkeleton.jsx","../../../../../frontend/src/app/shared/components/CardsList.jsx","../../../../../frontend/src/app/shared/components/AssignCardTableToolbar.jsx","../../../../../frontend/src/app/management/stock-cards/adapters/managementStockCardsKeys.js","../../../../../frontend/src/app/management/stock-cards/adapters/createCardAdapter.js","../../../../../frontend/src/app/management/stock-cards/adapters/affiliatedCommercesAdapter.js","../../../../../frontend/src/app/management/stock-cards/services/StockCardRepository.js","../../../../../frontend/src/app/management/stock-cards/hooks/useCreateNewStockCard.js","../../../../../frontend/src/app/management/stock-cards/hooks/useFindAffiliatedCommerces.js","../../../../../frontend/src/app/management/stock-cards/hooks/useFindStockCards.js","../../../../../frontend/src/app/management/stock-cards/components/StockCardForm.jsx","../../../../../frontend/src/app/management/stock-cards/components/StockCardSidebar.jsx","../../../../../frontend/src/app/management/stock-cards/components/StockCardTable.jsx","../../../../../frontend/src/app/shared/hooks/useFindCardTypes.js","../../../../../frontend/src/app/management/stock-cards/pages/StockCards.jsx"],"sourcesContent":["import { convertCatalogToReactSelect } from '@/shared/utils'\r\n\r\nexport const CardTypesAdapter = cardTypes => {\r\n  const dataAdapted =\r\n    cardTypes.map(cardType => ({\r\n      id: cardType?.id,\r\n      name: cardType?.name?.toUpperCase(),\r\n      statusId: cardType?.active\r\n    })) || []\r\n\r\n  return convertCatalogToReactSelect(dataAdapted, 'id', 'name')\r\n}\r\n","export const SHARED_CARD_KEYS = {\r\n  CARD_TYPES_LIST: 'cardTypes'\r\n}\r\n","import { CardTypesAdapter } from '@/app/shared/adapters'\r\nimport { axios } from '@/shared/interceptors'\r\n\r\nexport const getCardTypes = async () => {\r\n  const { data } = await axios.get('/api/payment-processors')\r\n  return CardTypesAdapter(data)\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { Visibility, VisibilityOff } from '@mui/icons-material'\r\nimport { Box, IconButton, Stack, Typography } from '@mui/material'\r\n\r\nexport default function CardCvv({ card, disableShow }) {\r\n  const [showCVV, setShowCVV] = useState(true)\r\n\r\n  const onToggleShowCVV = e => {\r\n    e.stopPropagation()\r\n    setShowCVV(prev => !prev)\r\n  }\r\n\r\n  return (\r\n    <Stack position={'relative'}>\r\n      <Typography sx={{ mb: 1, typography: 'caption', opacity: 0.48 }}>CVV</Typography>\r\n      <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n        <Typography sx={{ typography: showCVV ? 'subtitle2' : 'subtitle2' }}>{showCVV ? '***' : card?.cvv}</Typography>\r\n      </Stack>\r\n      {!disableShow && (\r\n        <Box position={'absolute'} sx={{ left: '32px', top: '20px' }}>\r\n          <IconButton size={'small'} color=\"inherit\" onClick={onToggleShowCVV} sx={{ opacity: 0.2 }}>\r\n            {showCVV ? <Visibility /> : <VisibilityOff />}\r\n          </IconButton>\r\n        </Box>\r\n      )}\r\n    </Stack>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { AddBusiness, MoreVertTwoTone } from '@mui/icons-material'\r\nimport { IconButton, MenuItem, Tooltip } from '@mui/material'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { useAssignCardStore } from '@/app/management/stock-cards/store'\r\nimport { MenuPopover } from '@/shared/components/containers'\r\n\r\nexport function StockCardMenu({ card }) {\r\n  const isReadyToAssign = useAssignCardStore(state => state.isReadyToAssign)\r\n  const setOpenAssignCards = useAssignCardStore(state => state.setOpen)\r\n  const setCard = useAssignCardStore(state => state.setCard)\r\n  const [anchorEl, setAnchorEl] = useState(null)\r\n  const open = Boolean(anchorEl)\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const handleClick = event => {\r\n    setAnchorEl(event.currentTarget)\r\n  }\r\n  const handleClose = () => {\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const handleAssignCard = () => {\r\n    if (isReadyToAssign) {\r\n      setOpenAssignCards(true)\r\n      setCard(card)\r\n    } else {\r\n      setOpenAssignCards(false)\r\n      enqueueSnackbar(`Por el momento no se puede asignar la tarjeta. No hay comercios disponibles`, {\r\n        variant: 'warning',\r\n        autoHideDuration: 5000\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title=\"Acciones\">\r\n        <IconButton\r\n          onClick={handleClick}\r\n          sx={{ ml: 2 }}\r\n          aria-controls={open ? 'card-menu' : undefined}\r\n          aria-haspopup=\"true\"\r\n          aria-expanded={open ? 'true' : undefined}\r\n        >\r\n          <MoreVertTwoTone width={20} height={20} />\r\n        </IconButton>\r\n      </Tooltip>\r\n      <MenuPopover\r\n        open={Boolean(open)}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n        transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n        arrow=\"right-start\"\r\n        sx={{\r\n          mt: -1,\r\n          mr: 0,\r\n          p: 2,\r\n          width: 250,\r\n          '& .MuiMenuItem-root': {\r\n            px: 1,\r\n            typography: 'body2',\r\n            borderRadius: 0.75,\r\n            '& svg': { mr: 2, width: 20, height: 20 }\r\n          }\r\n        }}\r\n      >\r\n        <MenuItem\r\n          onClick={() => {\r\n            handleAssignCard()\r\n            handleClose()\r\n          }}\r\n          sx={{ color: 'text.secondary' }}\r\n        >\r\n          <AddBusiness width={24} height={24} />\r\n          Asignar a Comercio\r\n        </MenuItem>\r\n      </MenuPopover>\r\n    </>\r\n  )\r\n}\r\n","import { CardHeader, Stack, Typography } from '@mui/material'\r\n\r\nimport { StockCardMenu } from '@/app/management/stock-cards/components/stock-card/StockCardMenu'\r\nimport { CardCVV, CardNumber, CardStyled } from '@/app/shared/components/card'\r\n\r\nexport function StockCard({ card }) {\r\n  return (\r\n    <CardStyled>\r\n      <CardHeader\r\n        action={<StockCardMenu card={card} />}\r\n        title={<Typography sx={{ typography: 'subtitle2', opacity: 0.72 }}>Viabo Card</Typography>}\r\n        subheader={card?.register}\r\n        sx={{ p: 0 }}\r\n      />\r\n\r\n      <div>\r\n        <CardNumber card={card} />\r\n      </div>\r\n\r\n      <Stack direction=\"row\" spacing={5}>\r\n        <Stack>\r\n          <Typography sx={{ mb: 1, typography: 'caption', opacity: 0.48 }}>Vencimiento</Typography>\r\n          <Typography sx={{ typography: 'subtitle1' }}>{card?.expiration}</Typography>\r\n        </Stack>\r\n        <CardCVV card={card} />\r\n      </Stack>\r\n    </CardStyled>\r\n  )\r\n}\r\n","import { Card, Skeleton, Stack } from '@mui/material'\r\n\r\nexport function StockCardSkeleton() {\r\n  return (\r\n    <Card\r\n      sx={theme => ({\r\n        color: theme.palette.common.white,\r\n        display: 'flex',\r\n        p: 3,\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between'\r\n      })}\r\n    >\r\n      <Stack>\r\n        <Skeleton variant=\"text\" sx={{ width: 0.3 }} />\r\n        <Skeleton variant=\"text\" sx={{ width: 0.5 }} />\r\n      </Stack>\r\n\r\n      <Stack sx={{ py: 1.5 }}>\r\n        <Skeleton variant=\"text\" sx={{ width: 0.9, height: 40 }} />\r\n      </Stack>\r\n\r\n      <Stack direction={'row'} spacing={2}>\r\n        <Stack spacing={0.5}>\r\n          <Skeleton variant=\"text\" sx={{ width: 100 }} />\r\n          <Skeleton variant=\"text\" sx={{ width: 40 }} />\r\n        </Stack>\r\n\r\n        <Stack spacing={0.5}>\r\n          <Skeleton variant=\"text\" sx={{ width: 100 }} />\r\n          <Stack direction={'row'} spacing={1} alignItems={'center'}>\r\n            <Skeleton variant=\"text\" sx={{ width: 40 }} />\r\n            <Skeleton variant=\"circular\" sx={{ width: 16, height: 16 }} />\r\n          </Stack>\r\n        </Stack>\r\n      </Stack>\r\n    </Card>\r\n  )\r\n}\r\n","import { createElement, useEffect, useMemo, useState } from 'react'\r\n\r\nimport { Search } from '@mui/icons-material'\r\nimport { Box, InputAdornment, Pagination, TextField } from '@mui/material'\r\nimport { useCollapseDrawer, useResponsive } from '@theme/hooks'\r\n\r\nimport { StockCard, StockCardSkeleton } from '@/app/management/stock-cards/components/stock-card'\r\nimport { searchByTerm } from '@/app/shared/utils'\r\nimport { ErrorRequestPage } from '@/shared/components/notifications'\r\nimport EmptyList from '@/shared/components/notifications/EmptyList'\r\nimport { usePagination } from '@/shared/hooks'\r\n\r\nexport function CardsList({\r\n  cards,\r\n  emptyMessage = 'No hay tarjetas disponibles en stock',\r\n  cardComponent = StockCard,\r\n  ...others\r\n}) {\r\n  const isDesktop = useResponsive('up', 'xl')\r\n  const { isCollapse } = useCollapseDrawer()\r\n  const [page, setPage] = useState(1)\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [searchResult, setSearchResult] = useState([])\r\n  const { data, isLoading, isError, error, isSuccess: isSuccessCards, refetch } = cards\r\n\r\n  const cardList = data || []\r\n  const loadingCards = isLoading\r\n\r\n  const PER_PAGE = isDesktop ? 12 : 9\r\n  const source = useMemo(\r\n    () => (searchTerm !== '' ? searchResult : cardList) || [],\r\n    [searchTerm, cardList, searchResult]\r\n  )\r\n  const length = source.length || 0\r\n  const count = Math.ceil(length / PER_PAGE)\r\n  const _DATA = usePagination(source || [], PER_PAGE)\r\n\r\n  const handleChange = (e, p) => {\r\n    setPage(p)\r\n    _DATA.jump(p)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (searchTerm) {\r\n      const filterCards = searchByTerm(cardList, searchTerm)\r\n      setSearchResult(filterCards)\r\n    } else {\r\n      setSearchResult([])\r\n    }\r\n  }, [searchTerm, cardList])\r\n\r\n  return (\r\n    <>\r\n      {isSuccessCards && cardList?.length > 0 && (\r\n        <Box\r\n          display=\"flex\"\r\n          mb={3}\r\n          flexDirection={{ xs: 'column', sm: 'row' }}\r\n          alignItems={{ xs: 'center' }}\r\n          {...others}\r\n        >\r\n          <Box>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Buscar ...\"\r\n              value={searchTerm}\r\n              onChange={e => setSearchTerm(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Box sx={{ color: 'text.disabled' }}>\r\n                      <Search sx={{ marginTop: 1 }} />\r\n                    </Box>\r\n                  </InputAdornment>\r\n                )\r\n              }}\r\n            />\r\n          </Box>\r\n          <Box sx={{ flex: '1 1 auto', mb: { xs: 3 } }} />\r\n          <Pagination count={count} page={page} onChange={handleChange} />\r\n        </Box>\r\n      )}\r\n\r\n      {!loadingCards && isSuccessCards && cardList.length === 0 && (\r\n        <EmptyList widthImage={'30%'} message={emptyMessage} />\r\n      )}\r\n\r\n      {!loadingCards && isError && <ErrorRequestPage widthImage={'30%'} errorMessage={error} handleButton={refetch} />}\r\n\r\n      {!isError && (\r\n        <Box\r\n          mb={3}\r\n          sx={{\r\n            display: 'grid',\r\n            gap: 3,\r\n            gridTemplateColumns: {\r\n              xs: 'repeat(1, 1fr)',\r\n              sm: 'repeat(2, 1fr)',\r\n              md: 'repeat(2, 1fr)',\r\n              lg: isCollapse ? 'repeat(3, 1fr)' : 'repeat(2, 1fr)',\r\n              xl: 'repeat(4, 1fr)'\r\n            }\r\n          }}\r\n        >\r\n          {(loadingCards ? [...Array(PER_PAGE)] : _DATA.currentData() || []).map((card, index) =>\r\n            card ? createElement(cardComponent, { card, key: index }) : <StockCardSkeleton key={index} />\r\n          )}\r\n        </Box>\r\n      )}\r\n\r\n      {cardList.length > 0 && length === 0 && (\r\n        <EmptyList widthImage={'30%'} message=\"No hay tarjetas que coincidan con la búsqueda\" />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import { AssignmentIndRounded } from '@mui/icons-material'\r\nimport { Box, IconButton, Tooltip } from '@mui/material'\r\n\r\nexport function AssignCardTableToolbar({ handleAssign }) {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        marginRight: 3\r\n      }}\r\n    >\r\n      <Tooltip title=\"Asignar\">\r\n        <IconButton onClick={handleAssign}>\r\n          <AssignmentIndRounded sx={{ color: theme => theme.palette.info.main }} width={24} height={24} />\r\n        </IconButton>\r\n      </Tooltip>\r\n    </Box>\r\n  )\r\n}\r\n","export const MANAGEMENT_STOCK_CARDS_KEYS = {\r\n  STOCK_CARDS_LIST: 'stockCards',\r\n  AFFILIATED_COMMERCES_LIST: 'affiliatedCommerces'\r\n}\r\n","import { getCryptInfo } from '@/shared/utils'\r\n\r\nexport const CreateCardAdapter = card => {\r\n  const { cardNumber, cardType, expiration, cvv, assigned } = card\r\n\r\n  const expirationYear = expiration?.slice(-2)\r\n\r\n  const expirationFormatted = expiration?.slice(0, 3) + expirationYear\r\n\r\n  const cardAdapter = {\r\n    cardNumber: cardNumber.replace(/\\s+/g, ''),\r\n    paymentProcessorId: cardType?.value,\r\n    expirationDate: expirationFormatted,\r\n    cvv,\r\n    commerceId: assigned?.value || ''\r\n  }\r\n  return getCryptInfo(cardAdapter)\r\n}\r\n","import { convertCatalogToReactSelect } from '@/shared/utils'\r\n\r\nexport const AffiliatedCommercesAdapter = commerces => {\r\n  const dataAdapted =\r\n    commerces?.map(commerce => ({\r\n      id: commerce?.id,\r\n      name: commerce?.name\r\n    })) || []\r\n  return convertCatalogToReactSelect(dataAdapted, 'id', 'name')\r\n}\r\n","import { AffiliatedCommercesAdapter } from '@/app/management/stock-cards/adapters'\r\nimport { CardsAdapter } from '@/app/shared/adapters'\r\nimport { axios } from '@/shared/interceptors'\r\n\r\nexport const createNewStockCard = async card => {\r\n  const { data } = await axios.post('/api/card/new', card)\r\n  return card\r\n}\r\n\r\nexport const getAffiliatedCommerces = async () => {\r\n  const { data } = await axios.get(`/api/commerces/affiliates`)\r\n  return AffiliatedCommercesAdapter(data)\r\n}\r\n\r\nexport const getStockCards = async () => {\r\n  const { data } = await axios.get('/api/cards/stock')\r\n  return CardsAdapter(data)\r\n}\r\n\r\nexport const assignCards = async cards => {\r\n  const url = cards?.cardId ? '/api/card/assign/commerce' : '/api/cards/assign/commerce'\r\n  const { data } = await axios.post(url, cards)\r\n  return data\r\n}\r\n","import { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { MANAGEMENT_STOCK_CARDS_KEYS } from '@/app/management/stock-cards/adapters'\r\nimport { createNewStockCard } from '@/app/management/stock-cards/services'\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\n\r\nexport const useCreateNewStockCard = (options = {}) => {\r\n  const client = useQueryClient()\r\n\r\n  const registerMutation = useMutation(createNewStockCard, options)\r\n\r\n  const registerCard = async (formData, options) => {\r\n    const { onSuccess, onError, mutationOptions } = options\r\n\r\n    try {\r\n      await toast.promise(registerMutation.mutateAsync(formData, mutationOptions), {\r\n        pending: 'Registrando tarjeta ...',\r\n        success: {\r\n          render({ data }) {\r\n            client.invalidateQueries([MANAGEMENT_STOCK_CARDS_KEYS.STOCK_CARDS_LIST])\r\n            onSuccess(data)\r\n            return data?.isAssigned ? 'Se agrego una nueva tarjeta al comercio' : 'Se agrego una nueva tarjeta al stock'\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      const errorFormatted = getErrorAPI(error, 'No se puede agregar la tarjeta al stock')\r\n      onError(errorFormatted)\r\n      toast.error(errorFormatted, {\r\n        type: getNotificationTypeByErrorCode(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...registerMutation,\r\n    registerCard\r\n  }\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { MANAGEMENT_STOCK_CARDS_KEYS } from '@/app/management/stock-cards/adapters'\r\nimport { getAffiliatedCommerces } from '@/app/management/stock-cards/services'\r\nimport { getErrorAPI } from '@/shared/interceptors'\r\n\r\nexport const useFindAffiliatedCommerces = (options = {}) => {\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const [customError, setCustomError] = useState(null)\r\n  const commerces = useQuery([MANAGEMENT_STOCK_CARDS_KEYS.AFFILIATED_COMMERCES_LIST], getAffiliatedCommerces, {\r\n    staleTime: 60 * 5000,\r\n    onError: error => {\r\n      const errorMessage = getErrorAPI(error, 'No se puede obtener la lista de comercios afiliados')\r\n      setCustomError(errorMessage)\r\n      enqueueSnackbar(errorMessage, {\r\n        variant: 'error',\r\n        autoHideDuration: 5000\r\n      })\r\n    },\r\n    ...options\r\n  })\r\n  return {\r\n    ...commerces,\r\n    error: customError || null\r\n  }\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { useQuery } from '@tanstack/react-query'\r\n\r\nimport { MANAGEMENT_STOCK_CARDS_KEYS } from '@/app/management/stock-cards/adapters'\r\nimport { getStockCards } from '@/app/management/stock-cards/services'\r\nimport { getErrorAPI } from '@/shared/interceptors'\r\n\r\nexport const useFindStockCards = (options = {}) => {\r\n  const [customError, setCustomError] = useState(null)\r\n  const commerces = useQuery([MANAGEMENT_STOCK_CARDS_KEYS.STOCK_CARDS_LIST], getStockCards, {\r\n    staleTime: 60000,\r\n    onError: error => {\r\n      const errorMessage = getErrorAPI(\r\n        error,\r\n        'No se puede obtener la lista de tarjetas. Intente nuevamente o reporte a sistemas'\r\n      )\r\n      setCustomError(errorMessage)\r\n    },\r\n    ...options\r\n  })\r\n  return {\r\n    ...commerces,\r\n    error: customError || null\r\n  }\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { AddCard, CreditCard, VpnKey, WarningAmberOutlined } from '@mui/icons-material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { InputAdornment, Stack, Typography } from '@mui/material'\r\nimport { DatePicker } from '@mui/x-date-pickers'\r\nimport { format, isAfter, isValid, parse } from 'date-fns'\r\nimport { useFormik } from 'formik'\r\nimport * as Yup from 'yup'\r\n\r\nimport { CreateCardAdapter, MANAGEMENT_STOCK_CARDS_KEYS } from '@/app/management/stock-cards/adapters'\r\nimport { useCreateNewStockCard } from '@/app/management/stock-cards/hooks'\r\nimport { SHARED_CARD_KEYS } from '@/app/shared/adapters'\r\nimport { FormProvider, MaskedInput, RFSelect, RFTextField } from '@/shared/components/form'\r\nimport { ModalAlert } from '@/shared/components/modals'\r\nimport { Scrollbar } from '@/shared/components/scroll'\r\nimport { useGetQueryData } from '@/shared/hooks'\r\n\r\nexport function StockCardForm({ setOpen }) {\r\n  const { registerCard: createCard, isLoading: isCreatingCard } = useCreateNewStockCard()\r\n  const commerces = useGetQueryData([MANAGEMENT_STOCK_CARDS_KEYS.AFFILIATED_COMMERCES_LIST]) || []\r\n  const cardTypes = useGetQueryData([SHARED_CARD_KEYS.CARD_TYPES_LIST]) || []\r\n  const [openAlertConfirm, setOpenAlertConfirm] = useState(false)\r\n\r\n  const CardSchema = Yup.object().shape({\r\n    cardNumber: Yup.string()\r\n      .transform((value, originalValue) => originalValue.replace(/\\s/g, '')) // Elimina los espacios en blanco\r\n      .min(16, 'Debe contener 16 digitos')\r\n      .required('El número de la tarjeta es requerido'),\r\n    cvv: Yup.string().min(3, 'Debe contener 3 digitos').required('El CVV es requerido'),\r\n    cardType: Yup.object().nullable().required('El tipo de tarjeta es requerido'),\r\n    expiration: Yup.string()\r\n      .required('La fecha de vencimiento es requerida')\r\n      .test('is-future-date', 'La fecha  debe ser mayor que la fecha actual', function (value) {\r\n        const date = parse(`01/${value}`, 'dd/MM/yyyy', new Date())\r\n        const currentDate = new Date()\r\n        const isDateValid = isValid(date)\r\n        return isDateValid && isAfter(date, currentDate)\r\n      })\r\n  })\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      cardNumber: '',\r\n      cardType: (cardTypes && cardTypes.length > 0 && cardTypes[0]) || null,\r\n      expiration: '',\r\n      cvv: '',\r\n      assigned: null\r\n    },\r\n    validationSchema: CardSchema,\r\n    onSubmit: (values, { setSubmitting }) => {\r\n      setSubmitting(false)\r\n      if (values.assigned) {\r\n        setOpenAlertConfirm(true)\r\n      } else {\r\n        handleCreateCard(values)\r\n      }\r\n    }\r\n  })\r\n\r\n  const { isSubmitting, values, setFieldValue, errors, handleSubmit, touched, resetForm, setSubmitting } = formik\r\n\r\n  const loading = isSubmitting || isCreatingCard\r\n\r\n  const handleCreateCard = (card, isAssigned = false) => {\r\n    const cardAdapter = CreateCardAdapter(card)\r\n    createCard(\r\n      { ...cardAdapter, isAssigned },\r\n      {\r\n        onSuccess: () => {\r\n          setOpen(false)\r\n          resetForm()\r\n          setOpenAlertConfirm(false)\r\n        },\r\n        onError: () => {\r\n          setOpenAlertConfirm(false)\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Scrollbar containerProps={{ sx: { flexGrow: 0, height: 'auto' } }}>\r\n        <FormProvider formik={formik}>\r\n          <Stack spacing={5} sx={{ p: 3 }}>\r\n            <Stack spacing={3}>\r\n              <Stack>\r\n                <Typography paragraph variant=\"overline\" sx={{ color: 'text.disabled' }}>\r\n                  Tipo de Tarjeta\r\n                </Typography>\r\n\r\n                <RFSelect\r\n                  name={'cardType'}\r\n                  disableClearable\r\n                  textFieldParams={{ placeholder: 'Seleccionar ...', required: true }}\r\n                  options={cardTypes}\r\n                  disabled={loading}\r\n                />\r\n              </Stack>\r\n\r\n              <Stack>\r\n                <Typography paragraph variant=\"overline\" sx={{ color: 'text.disabled' }}>\r\n                  Número de Tarjeta\r\n                </Typography>\r\n                <RFTextField\r\n                  autoFocus\r\n                  name={'cardNumber'}\r\n                  required={true}\r\n                  placeholder={'5254 2700 9717 8968'}\r\n                  fullWidth\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <CreditCard />\r\n                      </InputAdornment>\r\n                    ),\r\n                    inputComponent: MaskedInput,\r\n                    inputProps: {\r\n                      mask: '0000 0000 0000 0000',\r\n                      value: values.cardNumber,\r\n                      onAccept: value => {\r\n                        setFieldValue('cardNumber', value)\r\n                      }\r\n                    }\r\n                  }}\r\n                  disabled={loading}\r\n                />\r\n              </Stack>\r\n\r\n              <Stack direction={{ xs: 'column', lg: 'row' }} spacing={3} display={'flex'}>\r\n                <Stack sx={{ width: { xs: '100%', lg: '40%' } }}>\r\n                  <Typography paragraph variant=\"overline\" sx={{ color: 'text.disabled' }}>\r\n                    CVV\r\n                  </Typography>\r\n                  <RFTextField\r\n                    name={'cvv'}\r\n                    required={true}\r\n                    placeholder={'123'}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">\r\n                          <VpnKey />\r\n                        </InputAdornment>\r\n                      ),\r\n                      inputComponent: MaskedInput,\r\n                      inputProps: {\r\n                        mask: '000',\r\n                        onAccept: value => {\r\n                          setFieldValue('cvv', value)\r\n                        },\r\n                        value: values.cvv\r\n                      }\r\n                    }}\r\n                    disabled={loading}\r\n                  />\r\n                </Stack>\r\n                <Stack>\r\n                  <Typography paragraph variant=\"overline\" sx={{ color: 'text.disabled' }}>\r\n                    Vence\r\n                  </Typography>\r\n                  <DatePicker\r\n                    disabled={loading}\r\n                    views={['year', 'month']}\r\n                    name={'expiration'}\r\n                    value={new Date(values.expiration) ?? null}\r\n                    onChange={newValue => {\r\n                      const isDateValid = isValid(newValue)\r\n                      if (isDateValid) {\r\n                        return formik.setFieldValue('expiration', format(newValue, 'MM/yyyy'))\r\n                      } else {\r\n                        return formik.setFieldValue('expiration', '')\r\n                      }\r\n                    }}\r\n                    slotProps={{\r\n                      textField: {\r\n                        fullWidth: true,\r\n                        error: Boolean(touched.expiration && errors.expiration),\r\n                        required: true,\r\n                        helperText: touched.expiration && errors.expiration ? errors.expiration : ''\r\n                      }\r\n                    }}\r\n                    disablePast={true}\r\n                    format=\"MM/yy\"\r\n                  />\r\n                </Stack>\r\n              </Stack>\r\n              <Stack>\r\n                <Typography paragraph variant=\"overline\" sx={{ color: 'text.disabled' }}>\r\n                  Asignar:\r\n                </Typography>\r\n                <RFSelect\r\n                  name={'assigned'}\r\n                  textFieldParams={{ placeholder: 'Seleccionar ...', required: true }}\r\n                  options={commerces}\r\n                  disabled={loading}\r\n                />\r\n              </Stack>\r\n            </Stack>\r\n          </Stack>\r\n        </FormProvider>\r\n      </Scrollbar>\r\n      <Stack sx={{ px: 3, pt: 3 }}>\r\n        <LoadingButton\r\n          loading={loading}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          fullWidth\r\n          type=\"submit\"\r\n          onClick={handleSubmit}\r\n          disabled={loading}\r\n          startIcon={<AddCard />}\r\n        >\r\n          Crear\r\n        </LoadingButton>\r\n      </Stack>\r\n      {openAlertConfirm && (\r\n        <ModalAlert\r\n          title=\"Asignar Tarjeta\"\r\n          typeAlert=\"warning\"\r\n          textButtonSuccess=\"Asignar\"\r\n          onClose={() => {\r\n            setOpenAlertConfirm(false)\r\n            setSubmitting(false)\r\n          }}\r\n          open={openAlertConfirm}\r\n          isSubmitting={isCreatingCard}\r\n          description={\r\n            <Stack spacing={2}>\r\n              <Typography>¿Está seguro de asignar esta tarjeta a este comercio?</Typography>\r\n              <Stack direction={'row'} alignItems={'center'} spacing={1}>\r\n                <WarningAmberOutlined />\r\n                <Typography variant={'caption'}>Verifique que todos los datos esten correctos</Typography>\r\n              </Stack>\r\n            </Stack>\r\n          }\r\n          onSuccess={() => {\r\n            handleCreateCard(values, true)\r\n          }}\r\n          fullWidth\r\n          maxWidth=\"xs\"\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\n\r\nimport { Close } from '@mui/icons-material'\r\nimport { Backdrop, Divider, IconButton, Stack, Typography } from '@mui/material'\r\nimport { useSettings } from '@theme/hooks'\r\nimport { NAVBAR } from '@theme/overrides/options'\r\nimport { AnimatePresence } from 'framer-motion'\r\n\r\nimport { StockCardForm } from '@/app/management/stock-cards/components/StockCardForm'\r\nimport { RightPanelStyle } from '@/app/shared/components'\r\nimport { varFade } from '@/shared/components/animate'\r\n\r\nexport function StockCardSidebar({ open, setOpen }) {\r\n  const { themeDirection } = useSettings()\r\n\r\n  const varSidebar =\r\n    themeDirection !== 'rtl'\r\n      ? varFade({\r\n          distance: NAVBAR.BASE_WIDTH,\r\n          durationIn: 0.32,\r\n          durationOut: 0.32\r\n        }).inRight\r\n      : varFade({\r\n          distance: NAVBAR.BASE_WIDTH,\r\n          durationIn: 0.32,\r\n          durationOut: 0.32\r\n        }).inLeft\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      document.body.style.overflow = 'hidden'\r\n    } else {\r\n      document.body.style.overflow = 'unset'\r\n    }\r\n  }, [open])\r\n\r\n  const handleClose = () => {\r\n    setOpen(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Backdrop\r\n        open={open}\r\n        onClick={handleClose}\r\n        sx={{ background: 'transparent', zIndex: theme => theme.zIndex.drawer + 1 }}\r\n      />\r\n\r\n      <AnimatePresence>\r\n        {open && (\r\n          <>\r\n            <RightPanelStyle {...varSidebar}>\r\n              <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" sx={{ py: 2, pr: 1, pl: 2.5 }}>\r\n                <Typography variant=\"subtitle1\">Nueva Tarjeta</Typography>\r\n                <div>\r\n                  <IconButton aria-label=\"close\" size=\"medium\" onClick={handleClose}>\r\n                    <Close width={20} height={20} fontSize=\"inherit\" color=\"primary\" />\r\n                  </IconButton>\r\n                </div>\r\n              </Stack>\r\n\r\n              <Divider sx={{ borderStyle: 'dashed' }} />\r\n\r\n              <StockCardForm setOpen={setOpen} />\r\n            </RightPanelStyle>\r\n          </>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { Avatar, Card, Stack, Typography } from '@mui/material'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { useAssignCardStore } from '@/app/management/stock-cards/store'\r\nimport { AssignCardTableToolbar } from '@/app/shared/components'\r\nimport { DataTable } from '@/shared/components/dataTables'\r\nimport { CarnetLogo, MasterCardLogo } from '@/shared/components/images'\r\n\r\nexport function StockCardTable({ isLoading, cards = [] }) {\r\n  const isReadyToAssign = useAssignCardStore(state => state.isReadyToAssign)\r\n  const setOpenAssignCards = useAssignCardStore(state => state.setOpen)\r\n  const setCard = useAssignCardStore(state => state.setCard)\r\n  const [selectedCard, setSelectedCard] = useState(null)\r\n  const { enqueueSnackbar } = useSnackbar()\r\n\r\n  const columns = [\r\n    {\r\n      name: 'cardNumberHidden',\r\n      label: 'Tarjeta',\r\n      options: {\r\n        customBodyRenderLite: (dataIndex, rowIndex) => {\r\n          const rowData = cards[dataIndex]\r\n          return (\r\n            <Typography variant=\"subtitle2\" fontWeight=\"bold\">\r\n              {rowData?.cardNumberHidden}\r\n            </Typography>\r\n          )\r\n        }\r\n      }\r\n    },\r\n    {\r\n      name: 'cardType',\r\n      label: 'Tipo',\r\n      options: {\r\n        customBodyRenderLite: (dataIndex, rowIndex) => {\r\n          const row = cards[dataIndex]\r\n          return (\r\n            <Stack flexDirection={'row'} alignItems={'center'} gap={1}>\r\n              <Avatar\r\n                sx={theme => ({\r\n                  width: 45,\r\n                  height: 45,\r\n                  color: theme.palette.primary.contrastText,\r\n                  backgroundColor: theme.palette.primary.light\r\n                })}\r\n              >\r\n                {row?.cardType === 'Carnet' ? (\r\n                  <CarnetLogo sx={{ width: 30 }} color={'white'} />\r\n                ) : (\r\n                  <MasterCardLogo sx={{ width: 30 }} />\r\n                )}\r\n              </Avatar>\r\n              <Typography variant=\"subtitle2\">{row?.cardType}</Typography>\r\n            </Stack>\r\n          )\r\n        }\r\n      }\r\n    },\r\n    {\r\n      name: 'expiration',\r\n      label: 'Vence',\r\n      options: {\r\n        filterType: 'textField'\r\n      }\r\n    },\r\n    {\r\n      name: 'register',\r\n      label: 'Fecha',\r\n      options: {\r\n        filterType: 'textField',\r\n        customBodyRenderLite: (dataIndex, rowIndex) => {\r\n          const row = cards[dataIndex]\r\n          return (\r\n            <Stack>\r\n              <Typography variant=\"subtitle2\">{row?.registerDate}</Typography>\r\n              <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\r\n                {row?.registerTime}\r\n              </Typography>\r\n            </Stack>\r\n          )\r\n        }\r\n      }\r\n    }\r\n  ]\r\n\r\n  const handleAssignCard = () => {\r\n    if (isReadyToAssign) {\r\n      setOpenAssignCards(true)\r\n      setCard(selectedCard)\r\n    } else {\r\n      setOpenAssignCards(false)\r\n      enqueueSnackbar(`Por el momento no se puede asignar la tarjeta. No hay comercios disponibles`, {\r\n        variant: 'warning',\r\n        autoHideDuration: 5000\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <DataTable\r\n        isLoading={isLoading}\r\n        data={cards || []}\r\n        columns={columns}\r\n        options={{\r\n          responsive: 'simple',\r\n          rowHover: true,\r\n          selectableRows: 'single',\r\n          selectableRowsOnClick: true,\r\n          selectToolbarPlacement: 'replace',\r\n          sortOrder: {\r\n            name: 'register',\r\n            direction: 'desc'\r\n          },\r\n          downloadOptions: {\r\n            filename: 'tarjetas_stock.csv',\r\n            filterOptions: {\r\n              useDisplayedColumnsOnly: false // it was true\r\n            }\r\n          },\r\n          onRowSelectionChange: (currentRowsSelected, allRowsSelected, rowsSelected) => {\r\n            const selectedCard = cards?.find((valor, index) => rowsSelected.includes(index))\r\n            setSelectedCard(selectedCard)\r\n          },\r\n          customToolbarSelect: selectedRows => <AssignCardTableToolbar handleAssign={handleAssignCard} />\r\n        }}\r\n      />\r\n    </Card>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { SHARED_CARD_KEYS } from '@/app/shared/adapters'\r\nimport { getCardTypes } from '@/app/shared/services'\r\nimport { getErrorAPI } from '@/shared/interceptors'\r\n\r\nexport const useFindCardTypes = (options = {}) => {\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const [customError, setCustomError] = useState(null)\r\n  const commerces = useQuery([SHARED_CARD_KEYS.CARD_TYPES_LIST], getCardTypes, {\r\n    staleTime: 60 * 5000,\r\n    onError: error => {\r\n      const errorMessage = getErrorAPI(error, 'No se puede obtener la lista de los tipos de tarjeta')\r\n      setCustomError(errorMessage)\r\n      enqueueSnackbar(errorMessage, {\r\n        variant: 'error',\r\n        autoHideDuration: 5000\r\n      })\r\n    },\r\n    ...options\r\n  })\r\n  return {\r\n    ...commerces,\r\n    error: customError || null\r\n  }\r\n}\r\n","import { lazy, useEffect, useState } from 'react'\r\n\r\nimport { Add, AddBusinessTwoTone, Apps, FormatListBulleted } from '@mui/icons-material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { Button, Stack, ToggleButton, ToggleButtonGroup } from '@mui/material'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { MANAGEMENT_PATHS, MANAGEMENT_ROUTES_NAMES } from '@/app/management/shared/routes'\r\nimport { StockCardSidebar, StockCardTable } from '@/app/management/stock-cards/components'\r\nimport { useFindAffiliatedCommerces, useFindStockCards } from '@/app/management/stock-cards/hooks'\r\nimport { useAssignCardStore } from '@/app/management/stock-cards/store'\r\nimport { CardsList } from '@/app/shared/components'\r\nimport { useFindCardTypes } from '@/app/shared/hooks'\r\nimport { PATH_DASHBOARD } from '@/routes'\r\nimport { Page } from '@/shared/components/containers'\r\nimport { ContainerPage } from '@/shared/components/containers/ContainerPage'\r\nimport { HeaderPage } from '@/shared/components/layout'\r\nimport { Lodable } from '@/shared/components/lodables'\r\n\r\nconst AssignCardModal = Lodable(lazy(() => import('@/app/management/stock-cards/components/AssignCardModal')))\r\n\r\nexport default function StockCards() {\r\n  const [open, setOpen] = useState(false)\r\n  const { data: affiliatedCommerces, isSuccess, isLoading } = useFindAffiliatedCommerces()\r\n  const { data: cardTypes, isSuccess: isSuccessCardTypes, isLoading: isLoadingCardTypes } = useFindCardTypes()\r\n  const stockCards = useFindStockCards()\r\n  const { data: cards, isLoading: isLoadingStockCards } = stockCards\r\n  const setOpenAssignCards = useAssignCardStore(state => state.setOpen)\r\n  const setReadyToAssign = useAssignCardStore(state => state.setReadyToAssign)\r\n  const openAssignCard = useAssignCardStore(state => state.open)\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const [view, setView] = useState('1')\r\n  const handleChange = (event, newValue) => {\r\n    setView(newValue)\r\n  }\r\n\r\n  const handleNewCard = () => {\r\n    if (affiliatedCommerces && cardTypes && isSuccessCardTypes && isSuccess) {\r\n      setOpen(true)\r\n    } else {\r\n      enqueueSnackbar(`Por el momento no se puede crear una tarjeta. Intente nuevamenta o reporte a sistemas`, {\r\n        variant: 'warning',\r\n        autoHideDuration: 5000\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleAssignCards = () => {\r\n    if (affiliatedCommerces && affiliatedCommerces.length > 0 && cardTypes && cardTypes.length > 0) {\r\n      setOpenAssignCards(true)\r\n    } else {\r\n      setOpenAssignCards(false)\r\n      enqueueSnackbar(`Por el momento no se puede asignar tarjetas. No hay comercios disponibles`, {\r\n        variant: 'warning',\r\n        autoHideDuration: 5000\r\n      })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (affiliatedCommerces && affiliatedCommerces.length > 0) {\r\n      setReadyToAssign(true)\r\n    } else {\r\n      setReadyToAssign(false)\r\n    }\r\n  }, [affiliatedCommerces])\r\n\r\n  return (\r\n    <Page title=\"Stock de Tarjetas\">\r\n      <ContainerPage>\r\n        <HeaderPage\r\n          name={'Stock de Tarjetas'}\r\n          links={[\r\n            { name: 'Inicio', href: PATH_DASHBOARD.root },\r\n            { name: 'Administracion', href: MANAGEMENT_PATHS.stock_cards },\r\n            { name: MANAGEMENT_ROUTES_NAMES.stock_cards.name }\r\n          ]}\r\n          buttons={\r\n            <Stack direction={'column'} spacing={2} mt={{ xs: 2, md: 0 }}>\r\n              <Stack spacing={2} direction={{ xs: 'column', md: 'row' }}>\r\n                {cards && cards?.length > 0 && (\r\n                  <Button\r\n                    sx={{ color: 'text.primary' }}\r\n                    type=\"button\"\r\n                    color=\"secondary\"\r\n                    variant=\"contained\"\r\n                    onClick={handleAssignCards}\r\n                    startIcon={<AddBusinessTwoTone />}\r\n                  >\r\n                    Asignar Tarjetas\r\n                  </Button>\r\n                )}\r\n\r\n                <LoadingButton\r\n                  loading={isLoading || isLoadingCardTypes}\r\n                  variant=\"contained\"\r\n                  onClick={handleNewCard}\r\n                  startIcon={<Add />}\r\n                >\r\n                  Nueva Tarjeta\r\n                </LoadingButton>\r\n              </Stack>\r\n              <Stack alignItems={{ xs: 'center', md: 'flex-end' }}>\r\n                <ToggleButtonGroup\r\n                  size={'small'}\r\n                  color=\"primary\"\r\n                  value={view}\r\n                  exclusive\r\n                  onChange={handleChange}\r\n                  aria-label=\"Platform\"\r\n                >\r\n                  <ToggleButton value=\"1\">\r\n                    <FormatListBulleted />\r\n                  </ToggleButton>\r\n                  <ToggleButton value=\"2\">\r\n                    <Apps />\r\n                  </ToggleButton>\r\n                </ToggleButtonGroup>\r\n              </Stack>\r\n            </Stack>\r\n          }\r\n        />\r\n        {view === '2' && <CardsList cards={stockCards} />}\r\n        {view === '1' && <StockCardTable cards={cards} isLoading={isLoadingStockCards} />}\r\n        <StockCardSidebar open={open} setOpen={setOpen} />\r\n        {openAssignCard && <AssignCardModal />}\r\n      </ContainerPage>\r\n    </Page>\r\n  )\r\n}\r\n"],"file":"assets/js/StockCards-Cz2s-taK.js"}